<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React | 薛定谔see猫</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta charset="UTF-8" version="1">
    <meta name="baidu-site-verification" content="code-E5pfjV93p5">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="Keywords" content="个人博客, 薛定谔see猫,程序员,java">
    
    <link rel="preload" href="/assets/css/0.styles.aea1a24b.css" as="style"><link rel="preload" href="/assets/js/app.20b6ccbb.js" as="script"><link rel="preload" href="/assets/js/3.0bb47036.js" as="script"><link rel="preload" href="/assets/js/1.5a70b7c3.js" as="script"><link rel="preload" href="/assets/js/15.6a3aab66.js" as="script"><link rel="prefetch" href="/assets/js/10.e081399c.js"><link rel="prefetch" href="/assets/js/11.b3593ba0.js"><link rel="prefetch" href="/assets/js/12.99ec9357.js"><link rel="prefetch" href="/assets/js/13.3f7c05d0.js"><link rel="prefetch" href="/assets/js/14.03a9d67b.js"><link rel="prefetch" href="/assets/js/16.cd52b21f.js"><link rel="prefetch" href="/assets/js/17.c1fc6e34.js"><link rel="prefetch" href="/assets/js/18.251b9b1b.js"><link rel="prefetch" href="/assets/js/19.1361dd29.js"><link rel="prefetch" href="/assets/js/20.ff6d385e.js"><link rel="prefetch" href="/assets/js/21.4b7739fe.js"><link rel="prefetch" href="/assets/js/22.feb304d6.js"><link rel="prefetch" href="/assets/js/23.829a93c8.js"><link rel="prefetch" href="/assets/js/24.430bd966.js"><link rel="prefetch" href="/assets/js/25.ebe62ec6.js"><link rel="prefetch" href="/assets/js/4.d6e8508b.js"><link rel="prefetch" href="/assets/js/5.dbaaa577.js"><link rel="prefetch" href="/assets/js/6.4fe70386.js"><link rel="prefetch" href="/assets/js/7.3c24189a.js"><link rel="prefetch" href="/assets/js/8.238afdc8.js"><link rel="prefetch" href="/assets/js/9.a5a3cc1f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aea1a24b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>薛定谔see猫</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc></p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>薛定谔see猫</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.jpg" alt="薛定谔see猫" class="logo"> <span class="site-name">薛定谔see猫</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/assets/img/logo.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    薛定谔see猫
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>14</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>19</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6><li class="social-item" data-v-828910c6><i class="iconfont reco-github" style="color:#e15b64;" data-v-828910c6></i></li><li class="social-item" data-v-828910c6><i class="iconfont reco-bilibili" style="color:#e15b64;" data-v-828910c6></i></li></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>React</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>薛定谔see猫</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">React</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>薛定谔see猫</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>2021/4/3</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>框架</span><span class="tag-item" data-v-1ff7123e>React</span><span class="tag-item" data-v-1ff7123e>javascript</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="_1-react入门"><a href="#_1-react入门" class="header-anchor">#</a> 1. React入门</h2> <ul><li><code>React</code>使用虚拟<code>DOM</code>，不总是直接操作页面的真实<code>DOM</code>，以至于会比较高效</li> <li>使用<code>DOM Diffing</code>算法，最小化页面重绘</li></ul> <h3 id="_1-1-react的基本使用"><a href="#_1-1-react的基本使用" class="header-anchor">#</a> 1.1 React的基本使用</h3> <h4 id="_1-1-1-相关js库"><a href="#_1-1-1-相关js库" class="header-anchor">#</a> 1.1.1 相关js库</h4> <ol><li><code>react.js</code>：<code>React</code>核心库</li> <li><code>react-dom.js</code>：提供操作<code>DOM</code>的<code>react</code>扩展库</li> <li><code>babel.min.js</code>：解析<code>JSX</code>语法转换为<code>JS</code>代码的库</li></ol> <h4 id="_1-1-2-创建虚拟dom"><a href="#_1-1-2-创建虚拟dom" class="header-anchor">#</a> 1.1.2 创建虚拟DOM</h4> <p><strong>jsx创建虚拟DOM</strong>⭐️</p> <ol><li><p>创建<code>index.html</code>并准备“容器”</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>引入<code>react</code>依赖库</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 引入react和核心库 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../js/16.x/react.development.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 引入react-dom，用于支持react操作DOM --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../js/16.x/react-dom.development.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 引入babel，用于将jsx转化为js --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../js/16.x/babel.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>编写<code>jsx</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/babel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 1. 创建虚拟DOM</span>
    <span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello React<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span> <span class="token comment">// jsx不需要加引号</span>

    <span class="token comment">// 2. 渲染虚拟DOM到页面 </span>
    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token constant">VDOM</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>render</code>默认为覆盖不是追加</p></li></ol> <p><strong>js创建虚拟DOM</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;h1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token string">&quot;title&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello React&quot;</span><span class="token punctuation">)</span> 

    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token constant">VDOM</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>对于多层级的虚拟<code>DOM</code>，<code>js</code>就会显得十分繁琐，<code>jsx</code>挺身而出</p> <h4 id="_1-1-3-虚拟dom与真实dom"><a href="#_1-1-3-虚拟dom与真实dom" class="header-anchor">#</a> 1.1.3 虚拟DOM与真实DOM</h4> <ol><li><p><code>React</code>提供了一些<code>API</code>来创建一种 “特别” 的一般js对象</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>h1 id<span class="token operator">=</span><span class="token string">&quot;test&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Hello React<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre></div><p>上面创建的就是一个简单的虚拟<code>DOM</code>对象</p> <p>虚拟<code>DOM</code>的本质是<code>Object</code>类型的对象</p> <p>虚拟<code>DOM</code>相比真实<code>DOM</code>属性会少很多</p></li> <li><p>虚拟<code>DOM</code>对象最终都会被<code>React</code>转换为真实的<code>DOM</code></p></li> <li><p>我们编码时基本只需要操作<code>react</code>的虚拟<code>DOM</code>相关数据, <code>react</code>会转换为真实<code>DOM</code>变化而更新界。</p></li></ol> <h3 id="_1-2-react-jsx"><a href="#_1-2-react-jsx" class="header-anchor">#</a> 1.2 React Jsx</h3> <h4 id="_1-2-1-简介"><a href="#_1-2-1-简介" class="header-anchor">#</a> 1.2.1 简介</h4> <ol><li><p><code>jsx</code>全称<code>JavaScript XML</code></p></li> <li><p><code>react</code>定义的一种类似于<code>XML</code>的<code>JS</code>扩展语法</p></li> <li><p>本质是<code>React.createElement(Component, props, ...children)</code>方法的语法糖</p></li> <li><p>作用：用来简化创建虚拟<code>DOM</code></p> <p>写法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> ele <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello <span class="token constant">JSX</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
</code></pre></div><p>它不是字符串，也不是<code>HTML/XML</code>标签</p> <p>它最终产生的就是一个<code>js</code>对象</p></li> <li><p>标签名任意：<code>HTML</code>标签或其他标签</p></li></ol> <h4 id="_1-2-2-基本语法"><a href="#_1-2-2-基本语法" class="header-anchor">#</a> 1.2.2 基本语法</h4> <ol><li><p>定义<code>DOM</code>是，不要写引号</p></li> <li><p>如果说标签内的内容是一个变量则需要<code>{}</code>进行取值</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/babel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 1. 创建虚拟DOM</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token string">&quot;haha&quot;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token string">&quot;Hello React&quot;</span>
    <span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>h2 id<span class="token operator">=</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        	<span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>

    <span class="token comment">// 2.渲染虚拟DOM到页面</span>
    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token constant">VDOM</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>样式的类名指定不能用<code>class</code>，要用<code>className</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">.title</span><span class="token punctuation">{</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/babel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>h2 className<span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span>
        	<span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token string">&quot;Hello React&quot;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>

    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token constant">VDOM</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>内敛样式需要使用<code>{{}}</code>，且如果是<code>font-size</code>这样有两个单词组成的需要用驼峰命名法</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/babel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>
        	<span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>color<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> fontSize<span class="token operator">:</span> <span class="token string">'30px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token string">&quot;Hello React&quot;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>

    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token constant">VDOM</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p><code>jsx</code>只能有一个根标签</p></li> <li><p>标签必须闭合</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/babel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>
        	<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>

    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token constant">VDOM</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>首字符小写标签仅能为<code>html</code>的标准标签，首字符大写是一个自定义的组件</p></li></ol> <h4 id="_1-2-3-练习"><a href="#_1-2-3-练习" class="header-anchor">#</a> 1.2.3 练习</h4> <p><code>jsx</code>动态渲染数据</p> <ul><li><p>表达式：一个表达式会产生一个值，可以放在任何一个需要值的地方</p> <p>变量</p> <p>函数。。。</p></li> <li><p>语句(代码)：</p> <p><code>if</code>语句，<code>for</code>语句</p></li> <li><p>对于<code>jsx</code>内部的<code>{}</code>只能为表达式</p></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/babel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 模拟后端数据</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Angular&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;React&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Vue&quot;</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
	<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>前端js框架列表<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>    
		<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
			<span class="token punctuation">{</span>
				data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>   
    	<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
	ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token constant">VDOM</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>每一个虚拟<code>DOM</code>节点，都需要一个<code>key</code>用来作为唯一标识</p> <h3 id="_1-3-模块与组件、模块化与组件化"><a href="#_1-3-模块与组件、模块化与组件化" class="header-anchor">#</a> 1.3 模块与组件、模块化与组件化</h3> <h4 id="_1-3-1-模块"><a href="#_1-3-1-模块" class="header-anchor">#</a> 1.3.1 模块</h4> <ol><li>理解：向外部提供特定功能的<code>js</code>程序，一般就是一个<code>js</code>文件</li> <li>为什么要拆分模块：随着业务逻辑的增加，代码越来越多且复杂</li> <li>作用：复用<code>js</code>，简化<code>js</code>的编写，提高<code>js</code>运行效率</li></ol> <h4 id="_1-3-2-组件"><a href="#_1-3-2-组件" class="header-anchor">#</a> 1.3.2 组件</h4> <ol><li>理解：用来实现局部功能效果的代码和资源的集合<code>html/css/js/image</code>等等</li> <li>为什么需要组件：一个界面的功能太过复杂</li> <li>作用：复用编码，简化项目编码，提高运行效率</li></ol> <h4 id="_1-3-3-模块化"><a href="#_1-3-3-模块化" class="header-anchor">#</a> 1.3.3 模块化</h4> <p>当应用的<code>js</code>都已模块来编写的，这个应用就是一个模块化的应用</p> <h4 id="_1-3-4-组件化"><a href="#_1-3-4-组件化" class="header-anchor">#</a> 1.3.4 组件化</h4> <p>当应用是以多组件的方式实现的，这个应用就是一个组件化的应用</p> <h2 id="_2-react面向组件开发"><a href="#_2-react面向组件开发" class="header-anchor">#</a> 2. React面向组件开发</h2> <h3 id="_2-1-基本理解和使用"><a href="#_2-1-基本理解和使用" class="header-anchor">#</a> 2.1 基本理解和使用</h3> <h4 id="_2-1-1-使用react开发者工具调试"><a href="#_2-1-1-使用react开发者工具调试" class="header-anchor">#</a> 2.1.1 使用React开发者工具调试</h4> <p>安装插件<code>React Developer Tools</code></p> <h4 id="_2-1-2-组件的创建方式"><a href="#_2-1-2-组件的创建方式" class="header-anchor">#</a> 2.1.2 组件的创建方式</h4> <p><strong>函数式组件</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/babel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 1. 创建函数式组件</span>
    <span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>函数式组件，适用于简单组件的定义<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2. 渲染组件到页面</span>
    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>MyComponent <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>函数内部的<code>this</code>是<code>ubderfined</code>，因为<code>babel</code>编译后开启了严格模式</p> <p><code>render</code>之后的过程</p> <ol><li><code>React</code>解析组件标签，找到了<code>MyComponent</code>组件</li> <li>返现组件是使用函数定义的，随后调用该函数，将返回的虚拟<code>DOM</code>转为真实<code>DOM</code>，随后呈现在页面中</li></ol> <p><strong>类式组件</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/babel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 1. 创建类式组件</span>
<span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>我是用类定义的组件<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2. 渲染组件到页面</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>MyComponent <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>render</code>是放在了原型对象上，供实例使用</p> <p><code>render()</code>函数内部的<code>this</code>指向<code>MyComponent</code>的实例对象</p> <p><code>ReactDOM.render</code>之后的过程</p> <ol><li><code>React</code>解析组件标签，找到了<code>MyComponent</code>组件</li> <li>发现组件是类定义的，随后创建该类的实例，并通过该实例代用原型上的<code>render</code>方法</li> <li>将<code>render</code>返回的虚拟<code>DOM</code>转换为真实<code>DOM</code>，随后呈现在页面中</li></ol> <p><strong>总结</strong></p> <p>函数式组件适用于简单组件</p> <p>类式组件适用于复杂组件</p> <h3 id="_2-2-三大核心属性"><a href="#_2-2-三大核心属性" class="header-anchor">#</a> 2.2 三大核心属性</h3> <p>三大核心属性仅仅针对类式组件</p> <h4 id="_2-2-1-state"><a href="#_2-2-1-state" class="header-anchor">#</a> 2.2.1 state</h4> <p><strong>理解</strong></p> <ol><li><code>state</code>是组件对象最重要的属性，值是对象(可以包含多个<code>key-value</code>的组合)</li> <li>组件被称为''状态机“，通过更新组件的<code>state</code>来更新对应的页面显示(重新渲染组件)</li></ol> <p><strong>强烈注意</strong></p> <ol><li><p>组件中的<code>render</code>方法中的<code>this</code>为组件实例对象</p></li> <li><p>组件自定义的方法中<code>this</code>为<code>undefined</code></p> <p>强制绑定<code>this</code>通过函数对象的<code>bind()</code></p> <p>箭头函数</p></li> <li><p>状态数据，不能直接修改或更新</p></li></ol> <p><strong>动态渲染数据</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
&lt; type=&quot;text/babel&quot;&gt;
    // 1. 创建类式组件
    class Weather extends React.Component{

        // 初始化状态
        state = {
            isHot: true
        }
        render() {
            return (
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{this.changeWeather}</span><span class="token punctuation">&gt;</span></span>今天天气很{this.state.isHot ? &quot;炎热&quot; : &quot;凉爽&quot;}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
            )
        }

        // 自动以方法要用赋值语句的形式+箭头函数
        changeWeather = () =&gt; {
            this.setState({isHot: !this.state.isHot})
        }
    }

    // 2. 渲染组件到页面
    ReactDOM.render(<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Weather</span> <span class="token punctuation">/&gt;</span></span>, document.getElementById(&quot;test&quot;))
&lt;/&gt;
</code></pre></div><h4 id="_2-2-2-props"><a href="#_2-2-2-props" class="header-anchor">#</a> 2.2.2 props</h4> <p>需求：自定义用来显示一个人员信息的组件</p> <ul><li>名字必须指定，且为字符串类型</li> <li>性别为字符串类型，如果性别没有指定，默认为男</li> <li>年龄必须指定，且为数字类型</li></ul> <p>对<code>props</code>的属性进行限制，属性的限制需要引入<code>prop-types.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 对Person属性的类型进行限制</span>
<span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// string类型为字符串，isRequired必须有值</span>
    name<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
    sex<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
    age<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span>
    speak<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>func
<span class="token punctuation">}</span>  

<span class="token comment">// 设置属性的默认值</span>
<span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    sex<span class="token operator">:</span> <span class="token string">&quot;待鉴定&quot;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span>
</code></pre></div><p>渲染组件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>姓名：<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>性别：<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>age <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>年龄：<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>sex<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>传递<code>props</code>的两种方式</p> <ol><li><p>直接传递</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person name<span class="token operator">=</span><span class="token string">&quot;Tom&quot;</span> age<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">18</span><span class="token punctuation">}</span> sex<span class="token operator">=</span><span class="token string">&quot;男&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p><code>...</code>传递</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">&quot;老刘&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">}</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person <span class="token punctuation">{</span><span class="token operator">...</span>p<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li></ol> <p><strong>理解</strong></p> <ol><li>每个组件对象都会有<code>props(properties)</code>属性</li> <li>组件标签的所有属性都保存在<code>props</code>中</li></ol> <p><strong>注意</strong></p> <p><code>props</code>的属性是只读的</p> <p>函数式组件使用<code>props</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>姓名：<span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>性别：<span class="token punctuation">{</span>props<span class="token punctuation">.</span>age <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>年龄：<span class="token punctuation">{</span>props<span class="token punctuation">.</span>sex<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person name<span class="token operator">=</span><span class="token string">&quot;Alcie&quot;</span> age<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">18</span><span class="token punctuation">}</span> sex<span class="token operator">=</span><span class="token string">&quot;女&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>对于属性限制，限制只能写在函数的外部</p> <h4 id="_2-2-3-refs"><a href="#_2-2-3-refs" class="header-anchor">#</a> 2.2.3 refs</h4> <p>组件内的标签可以定义<code>ref</code>属性来标识自己，相当于<code>id</code>属性，<code>ref</code>指定的值都会被收集到<code>refs</code>属性中</p> <ol><li><p>字符串形式的<code>ref</code>：不推荐使用</p> <p><code>render</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token string">&quot;input1&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;点击按钮提示数据&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">}</span> <span class="token operator">&gt;</span>点我提示左侧的数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre></div><p>方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function-variable function">showData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>input1<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>回调函数形式的<code>ref</code></p> <p><code>render</code>，<code>c</code>为当前节点对象</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>input1 <span class="token operator">=</span> c<span class="token punctuation">}</span><span class="token punctuation">}</span> placeholder<span class="token operator">=</span><span class="token string">&quot;点击按钮提示数据&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">}</span> ref<span class="token operator">=</span><span class="token string">&quot;btn&quot;</span><span class="token operator">&gt;</span>点我提示左侧的数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
<span class="token operator">&lt;</span>input onBlur<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showData2<span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>input2 <span class="token operator">=</span> c<span class="token punctuation">}</span> placeholder<span class="token operator">=</span><span class="token string">&quot;失去焦点提示&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function-variable function">showData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>input1<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function-variable function">showData2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>input2<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>对于内敛的<code>ref</code>会在组件更新时调用两次，第一的参数为<code>null</code>，第二次的参数为当前节点，如果不想要调用两次，需要将方法绑定在类上</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>今天天气很{this.state.isHot ? &quot;炎热&quot; : &quot;凉爽&quot;}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{this.showData}</span><span class="token punctuation">&gt;</span></span>点我获取天气<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="&amp;nbsp;">&amp;nbsp;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>state <span class="token operator">=</span><span class="token punctuation">{</span>
	isHot<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
<span class="token function-variable function">showData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>isHot<span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isHot<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><code>createRef</code></p> <p>首先创建容器</p> <div class="language- extra-class"><pre class="language-text"><code>myRef = React.createRef()
</code></pre></div><p><code>React.createRef</code>调用后可以返回一个容器，该容器可以存储被ref所标识的节点，一个容器只能存储一个节点</p> <p>创建<code>jsx</code>结构</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{this.myRef}</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>点击按钮提示数据<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{this.showData}</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我提示左侧的数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="&amp;nbsp;">&amp;nbsp;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>创建方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function-variable function">showData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>myRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h4 id="_2-2-4-三大属性与事件处理"><a href="#_2-2-4-三大属性与事件处理" class="header-anchor">#</a> 2.2.4 三大属性与事件处理</h4> <ol><li><p>通过<code>onXxx</code>属性来指定事件处理函数</p> <p><code>React</code>使用的是自定义(合成)事件，而不是使用原生的<code>DOM</code>事件----为了更好的兼容性</p> <p><code>React</code>中的事件是通过事件委托方式处理的(委托给组件最外层的元素)-----为了高效</p></li> <li><p>当发生事件的<code>DOM</code>与要操作的<code>DOM</code>相同时，可以省略<code>ref</code>通过<code>event.target</code>得到发生事件的<code>DOM</code>元素对象</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>input onBlur<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;失去焦点提示数据&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token function-variable function">showData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token function">alert</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="_2-3-收集表单数据"><a href="#_2-3-收集表单数据" class="header-anchor">#</a> 2.3 收集表单数据</h3> <p>包含表单组件的分类</p> <ol><li><p>非受控组件</p> <p>现用现取</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Login</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>

    <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    	event<span class="token punctuation">.</span><span class="token function">prevenDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 阻止表单提交</span>
    	<span class="token keyword">const</span> <span class="token punctuation">{</span>username<span class="token punctuation">,</span> password<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
    	<span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">用户名：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，密码：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>password<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">&quot;http://www.baidu.com&quot;</span> onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                用户名：<span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> c<span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                密码：<span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> c<span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                	<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>受控组件：推荐使用</p> <p>将需要的信息存储在<code>state</code>中</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Login</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>

    <span class="token comment">// 初始化状态</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        username<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
    <span class="token punctuation">}</span>

    <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        event<span class="token punctuation">.</span><span class="token function">prevenDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 阻止表单提交</span>

        <span class="token keyword">const</span> <span class="token punctuation">{</span>username<span class="token punctuation">,</span> password<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">用户名：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，密码：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>password<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 保存用户名密码到状态中</span>
    <span class="token function-variable function">saveFormData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dataType</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">[</span>dataType<span class="token punctuation">]</span><span class="token operator">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                用户名：<span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">saveFormData</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                密码：<span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">saveFormData</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>对于<code>saveFormData</code>就是一个高阶函数</p> <p>高阶函数：</p> <ul><li>若<code>A</code>函数，接受的参数是一个函数，那么<code>A</code>就可以成为高阶函数</li> <li>若<code>A</code>函数，调用的返回值依然是一个函数，那么<code>A</code>就可以称之为高阶函数</li> <li>常见的高阶函数：<code>Promise</code>、<code>setTimeout</code>、<code>arr.map()</code></li></ul> <p>函数的柯里化：</p> <ul><li>通过函数调用继续返回函数的方式，实现多次接受参数最后统一处理的函数编码形式</li></ul></li></ol> <h3 id="_2-4-组件的生命周期"><a href="#_2-4-组件的生命周期" class="header-anchor">#</a> 2.4 组件的生命周期</h3> <p>组件分为挂载和卸载</p> <ul><li><p>当组件被渲染到页面上时，称为挂载</p></li> <li><p>当组件被从页面中移除时，称为卸载</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 参数为指定的容器</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">unmountComponentAtNode</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h4 id="_2-4-1-生命周期理解"><a href="#_2-4-1-生命周期理解" class="header-anchor">#</a> 2.4.1 生命周期理解</h4> <ol><li>组件从创建到死亡它会经历一些特定的阶段</li> <li><code>React</code>中包含了一系列钩子函数(生命周期回调函数)，会在特定的时刻调用</li> <li>我们定义组件时，会在特定的生命周期回调函数中做特定的工作</li></ol> <h4 id="_2-4-1-生命周期钩子"><a href="#_2-4-1-生命周期钩子" class="header-anchor">#</a> 2.4.1 生命周期钩子</h4> <ol><li>旧版本的钩子</li></ol> <img src="https://gitee.com/dingwanli/picture/raw/master/20210403201013.png" alt="react生命周期(旧)" style="zoom:80%;"> <ul><li><p>初始化阶段：由<code>ReactDOM.render()</code>触发</p> <p><code>constructor</code></p> <p><code>componentWillMount</code></p> <p>⭐️<code>render</code></p> <p>⭐️<code>compoonentDidMount</code>：一般用于初始化的操作，订阅消息，会接受<code>preProps</code>和<code>preState</code>作为参数，新版本中还会接受<code>getSnapshotBeforeUpdate</code>的快照值</p></li> <li><p>更新阶段：由组件内部<code>this.setState()</code>或者父组件重新<code>render</code>触发</p> <p><code>shouldConponentUpdate</code>：仅当返回值为<code>true</code>是，组件允许更新，如果是<code>forceUpdate()</code>将会跳过验证</p> <p><code>componentWillUpdate</code></p> <p><code>render</code></p> <p><code>componentDidUpdate</code></p></li> <li><p>卸载组件：由<code>ReactDOM.unmountComponentAtNode:()</code>触发</p> <p>⭐️<code>componentWillUnmount</code>：一般用于收尾工作，取消订阅</p></li></ul> <ol start="2"><li>新版本的钩子</li></ol> <img src="https://gitee.com/dingwanli/picture/raw/master/20210403201107.png" alt="react生命周期(新)" style="zoom:60%;"> <p>对于新版的钩子，由于以下三个钩子经常被误用，所以<code>componentWillMount</code>、<code>componentWillReceiveProps</code>、<code>componentWillUpdate</code>需要加上前缀<code>UNSAFE_</code></p> <ul><li><p>初始化阶段：由<code>ReactDOM.render</code>触发</p> <p><code>constructor</code></p> <p><code>getDerivedStateFromProps</code></p> <p><code>render</code></p> <p><code>componentDidMount()</code></p></li> <li><p>更新阶段</p> <p><code>getDerivedStateFromProps</code></p> <p><code>shouldComponentUpdate</code></p> <p><code>render</code></p> <p><code>getSnapshotBeforeUpdate</code></p> <p><code>componentDidUpdate</code></p></li> <li><p>卸载组件：由<code>ReactDOM.umountComponentAtNode</code>触发</p> <p><code>componentWillUnmount</code></p></li></ul> <h3 id="_2-5-diffing算法"><a href="#_2-5-diffing算法" class="header-anchor">#</a> 2.5 Diffing算法</h3> <p><code>Diffing</code>算法的最小力度是标签</p> <h4 id="_2-5-1-key的作用"><a href="#_2-5-1-key的作用" class="header-anchor">#</a> 2.5.1 key的作用</h4> <ol><li><p>虚拟<code>DOM</code>中<code>key</code>的作用</p> <ul><li><p>简单来说：<code>key</code>是虚拟<code>DOM</code>对象的标识，在更新显示时<code>key</code>起着极其重要的作用</p></li> <li><p>详细的说：当状态中的数据发生变化时，<code>react</code>会根据【新数据】生成【新的虚拟<code>DOM</code>】,随后<code>React</code>进行了【新虚拟<code>DOM</code>】与【旧虚拟<code>DOM</code>】的<code>diff</code>比较，比较规则如下：</p> <p>旧虚拟<code>DOM</code>中找到了与新虚拟<code>DOM</code>相同的<code>key</code></p> <ul><li>若虚拟<code>DOM</code>内容没变，直接使用之前的真实<code>DOM</code></li> <li>若虚拟<code>DOM</code>内容变了，则生成新的真实<code>DOM</code>，随后替换掉页面之前的真实<code>DOM</code></li></ul> <p>旧虚拟<code>DOM</code>中未找到与新虚拟<code>DOM</code>相同的<code>key</code>，根据数据创建新的真实<code>DOM</code>，随后渲染到页面</p></li></ul></li> <li><p>用<code>index</code>作用作为<code>key</code>可能会引发的问题</p> <ul><li>若对数据进行：逆序添加、逆序删除等破坏顺序操作：会产生没有必要的真实<code>DOM</code>更新 ==&gt; 界面效果没问题，但效率低</li> <li>如果结构中还包含输入类的<code>DOM</code>：会产生错误<code>DOM</code>更新 ==&gt; 界面有问题</li> <li>如果不存在对数据的逆序添加、逆序删除等破坏顺序的操作，仅用于渲染列表用于展示，使用<code>index</code>作为<code>key</code>是没有问题的</li></ul></li> <li><p>开发中如何选择<code>key</code></p> <ul><li>最好使用每条数据的唯一标识作为<code>key</code>、比如<code>id</code>、手机号、身份证号、学号等唯一值</li> <li>如果确定只是简单的展示数据，用<code>idnex</code>也是可以的</li></ul></li></ol> <h2 id="_3-react脚手架"><a href="#_3-react脚手架" class="header-anchor">#</a> 3. React脚手架</h2> <h3 id="_3-1-react脚手架"><a href="#_3-1-react脚手架" class="header-anchor">#</a> 3.1 react脚手架</h3> <ol><li><p><code>xxx</code>脚手架: 用来帮助程序员快速创建一个基于<code>xxx</code>库的模板项目</p> <p>包含了所有需要的配置（语法检查、<code>jsx</code>编译、<code>devServer</code>…）</p> <p>下载好了所有相关的依赖</p> <p>可以直接运行一个简单效果</p></li> <li><p><code>react</code>提供了一个用于创建react项目的脚手架库: <code>create-react-app</code></p></li> <li><p>项目的整体技术架构为:  <code>react</code> + <code>webpack</code>+ ``es6<code>+</code>eslint`</p></li> <li><p>使用脚手架开发的项目的特点: 模块化, 组件化, 工程化</p></li></ol> <h3 id="_3-2-创建项目并启动"><a href="#_3-2-创建项目并启动" class="header-anchor">#</a> 3.2 创建项目并启动</h3> <ol><li><p>全局安装</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -g create-react-app
</code></pre></div></li> <li><p>切换到想创项目的目录，使用命令</p> <div class="language-bash extra-class"><pre class="language-bash"><code>create-react-app hello-react
</code></pre></div></li> <li><p>进入项目文件夹</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> hello-react
</code></pre></div></li> <li><p>启动项目</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> start
</code></pre></div></li> <li><p>常用命令</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> start <span class="token comment"># 启动项目</span>
<span class="token function">npm</span> build <span class="token comment"># 编译打包项目</span>
<span class="token function">npm</span> <span class="token builtin class-name">test</span> <span class="token comment"># 测试</span>
<span class="token function">npm</span> <span class="token function">eject</span> <span class="token comment"># 显示配置文件</span>
</code></pre></div></li></ol> <h3 id="_3-3-react脚手架项目结构"><a href="#_3-3-react脚手架项目结构" class="header-anchor">#</a> 3.3 react脚手架项目结构</h3> <div class="language- extra-class"><pre class="language-text"><code>public ---- 静态资源文件夹
    favicon.icon ------ 网站页签图标
    index.html -------- 主页面 --重要
    logo192.png ------- logo图
    logo512.png ------- logo图
    manifest.json ----- 应用加壳的配置文件
    robots.txt -------- 爬虫协议文件
src ---- 源码文件夹
    App.css -------- App组件的样式
    App.js --------- App组件 --重要
    App.test.js ---- 用于给App做测试
    index.css ------ 样式
    index.js ------- 入口文件 --重要
    logo.svg ------- logo图
    reportWebVitals.js
    	--- 页面性能分析文件(需要web-vitals库的支持)
    setupTests.js
    	---- 组件单元测试的文件(需要jest-dom库的支持)
</code></pre></div><h3 id="_3-4-功能界面的组件化编码流程"><a href="#_3-4-功能界面的组件化编码流程" class="header-anchor">#</a> 3.4 功能界面的组件化编码流程</h3> <ol><li><p>拆分组件：拆分界面抽组件</p></li> <li><p>实现静态组件：使用组件实现静态页面效果</p></li> <li><p>实现动态组件</p> <ul><li><p>动态显示初始化数据</p> <p>数据类型</p> <p>数据名称</p> <p>保存在哪个组价</p></li> <li><p>交互(从绑定事件监听开始)</p></li></ul></li></ol> <h3 id="_3-5-常用库"><a href="#_3-5-常用库" class="header-anchor">#</a> 3.5 常用库</h3> <ol><li><p>唯一id</p> <p>安装</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> nanoid
</code></pre></div><p>使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>nanoid<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'nanoid'</span>

<span class="token comment">// 返回一个字符串类型的id</span>
id <span class="token operator">=</span> <span class="token function">nanoid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>类型限制</p> <p>安装</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i prop-types
</code></pre></div><p>使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>

<span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
    name<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
    done<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>bool<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
    updateTodo<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">.</span>isRequired
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="_3-6-状态提升"><a href="#_3-6-状态提升" class="header-anchor">#</a> 3.6 状态提升</h3> <p>如果对于A、B两兄弟组件，状态数据需要共享，那就需要把他们的状态统一放到其父组件中，通过父组件向其传递状态</p> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><ol><li>父组件向子组件传递数据，通过<code>props</code></li></ol> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><ol start="2"><li><p>子组件向父组件传递数据</p> <p>如果是子组件向父组件传递数据，就需要在父组件创建函数，然后将其传递给子组件，子组件进行调用时，将数据传递给父组件</p> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div></li></ol> <h2 id="_4-react-ajax"><a href="#_4-react-ajax" class="header-anchor">#</a> 4. React ajax</h2> <h3 id="_4-1-理解"><a href="#_4-1-理解" class="header-anchor">#</a> 4.1 理解</h3> <h4 id="_4-1-1-前置说明"><a href="#_4-1-1-前置说明" class="header-anchor">#</a> 4.1.1 前置说明</h4> <ol><li><code>React</code>本身只关注界面，并不包含发送<code>ajax</code>请求的代码</li> <li>前端应用需要通过<code>ajax</code>请求与后台进行交互(<code>json</code>数据)</li> <li><code>react</code>应用中需要集成第三方<code>ajax</code>库(或自己封装)</li></ol> <h4 id="_4-1-2-常用的ajax请求库"><a href="#_4-1-2-常用的ajax请求库" class="header-anchor">#</a> 4.1.2 常用的<code>ajax</code>请求库</h4> <ol><li><code>jQuery</code>比较重，如果需要另外引用不建议使用</li> <li><code>axios</code>轻量级，建议使用
<ul><li>封装<code>XmlHttpRequest</code>对象的<code>ajax</code></li> <li><code>promis</code>风格</li> <li>可以用在浏览器端和<code>node</code>服务器端</li></ul></li></ol> <h3 id="_4-2-axios"><a href="#_4-2-axios" class="header-anchor">#</a> 4.2 axios</h3> <h4 id="_4-2-1-安装使用"><a href="#_4-2-1-安装使用" class="header-anchor">#</a> 4.2.1 安装使用</h4> <ol><li><p>安装</p> <div class="language- extra-class"><pre class="language-text"><code>npm add axios
</code></pre></div></li> <li><p>使用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getStudentData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'www.baidu.com'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>getStudentData<span class="token punctuation">}</span><span class="token operator">&gt;</span>点我获取数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="_4-3-配置代理解决跨域"><a href="#_4-3-配置代理解决跨域" class="header-anchor">#</a> 4.3 配置代理解决跨域</h3> <h4 id="_4-3-1-方法一"><a href="#_4-3-1-方法一" class="header-anchor">#</a> 4.3.1 方法一</h4> <blockquote><p>在package.json中追加如下配置</p></blockquote> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;proxy&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080&quot;</span>
</code></pre></div><p>说明：</p> <ol><li>优点：配置简单，前端请求资源时可以不加任何前缀。</li> <li>缺点：不能配置多个代理。</li> <li>工作方式：上述方式配置代理，当请求了3000不存在的资源时，那么该请求会转发给8080（优先匹配前端资源）</li></ol> <h4 id="_4-3-2-方法二"><a href="#_4-3-2-方法二" class="header-anchor">#</a> 4.3.2 方法二</h4> <ol><li><p>第一步：创建代理配置文件</p> <div class="language- extra-class"><pre class="language-text"><code>在src下创建配置文件：src/setupProxy.js
</code></pre></div></li> <li><p>编写<code>setupProxy.js</code>配置具体代理规则：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
    <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token string">'/api1'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token comment">//api1是需要转发的请求(所有带有/api1前缀的请求都会转发给8080)</span>
      target<span class="token operator">:</span> <span class="token string">'http://localhost:8080'</span><span class="token punctuation">,</span> <span class="token comment">//配置转发目标地址(能返回数据的服务器地址)</span>
      changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//控制服务器接收到的请求头中host字段的值</span>
      <span class="token comment">/*
      	changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:8080
      	changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:8080
      	changeOrigin默认值为false，但我们一般将changeOrigin值设为true
      */</span>
      pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">'^/api1'</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span> <span class="token comment">//去除请求前缀，保证交给后台服务器的是正常请求地址(必须配置)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token string">'/api2'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> 
      target<span class="token operator">:</span> <span class="token string">'http://localhost:8080'</span><span class="token punctuation">,</span>
      changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">'^/api2'</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <p>说明：</p> <ol><li>优点：可以配置多个代理，可以灵活的控制请求是否走代理。</li> <li>缺点：配置繁琐，前端请求资源时必须加前缀。</li></ol> <h3 id="_4-4-消息订阅-发布机制"><a href="#_4-4-消息订阅-发布机制" class="header-anchor">#</a> 4.4 消息订阅-发布机制</h3> <p>用于解决兄弟组件传参的问题，当然也适用于所有的组件的传参</p> <ol><li><p>工具库<code>PubSubJs</code></p></li> <li><p>安装</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> pubsub-js
</code></pre></div></li> <li><p>使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> PubSub <span class="token keyword">from</span> <span class="token string">'pubsub-js'</span> <span class="token comment">//引入</span>
PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'delete'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//订阅</span>
PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'delete'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token comment">//发布消息</span>
</code></pre></div></li></ol> <p>假设有A组件想要向B组件发送数据，A组件与B组件为兄弟组件</p> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><ol><li><p>在<code>B</code>组件挂载时订阅消息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> PubSub <span class="token keyword">from</span> <span class="token string">'pubsub-js'</span>

<span class="token comment">// 订阅消息并保存token</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>token <span class="token operator">=</span> PubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'messageName'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'收到数据'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>在<code>A</code>中发布消息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> PubSub <span class="token keyword">from</span> <span class="token string">'pubsub-js'</span>

<span class="token comment">// 发布消息</span>
PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'messageName'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>data<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>在<code>B</code>组件卸载之前应该取消订阅</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 取消消息订阅</span>
    PubSub<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>token<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="_4-5-fetch"><a href="#_4-5-fetch" class="header-anchor">#</a> 4.5 fetch</h3> <p>属于<code>javascript</code>的内置库，与<code>xhr</code>同级的内置对象</p> <h4 id="_4-5-1-文档"><a href="#_4-5-1-文档" class="header-anchor">#</a> 4.5.1 文档</h4> <ol><li><p>https://github.github.io/fetch/</p></li> <li><p>https://segmentfault.com/a/1190000003810652</p></li></ol> <h4 id="_4-5-2-特点"><a href="#_4-5-2-特点" class="header-anchor">#</a> 4.5.2 特点</h4> <ol><li><p><code>fetch</code>: 原生函数，不再使用<code>XmlHttpRequest</code>对象提交<code>ajax</code>请求</p></li> <li><p>老版本浏览器可能不支持</p></li></ol> <h4 id="_4-5-3-相关api"><a href="#_4-5-3-相关api" class="header-anchor">#</a> 4.5.3 相关API</h4> <ol><li><p><code>GET</code>请求</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>POST</code>请求</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
    body<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ol> <h2 id="_5-react路由"><a href="#_5-react路由" class="header-anchor">#</a> 5. React路由</h2> <h3 id="_5-1-相关理解"><a href="#_5-1-相关理解" class="header-anchor">#</a> 5.1 相关理解</h3> <h4 id="_5-1-1-spa的理解"><a href="#_5-1-1-spa的理解" class="header-anchor">#</a> 5.1.1 SPA的理解</h4> <ol><li>单页<code>Web</code>应用<code>single page web application SPA</code></li> <li>整个应用只有一个完整的页面</li> <li>点击页面中的链接不会刷新页面，只会做页面的局部更新</li> <li>数据都需要通过<code>ajax</code>请求获取，并在前端异步展现</li></ol> <h4 id="_5-1-2-路由的理解"><a href="#_5-1-2-路由的理解" class="header-anchor">#</a> 5.1.2 路由的理解</h4> <ol><li><p>什么是路由</p> <p>一个路由就是一个映射关系(<code>key: value</code>)</p> <p><code>key</code>为路径，<code>value</code>可能是<code>function</code>或者<code>component</code></p></li> <li><p>路由分类</p> <p>后端路由</p> <ul><li><p>理解：<code>value</code>是<code>function</code>，用来处理客户端提交的请求</p></li> <li><p>注册路由：<code>router.get(path, function(req, res))</code></p></li> <li><p>工作过程中：当<code>node</code>接受到一个请求时，根据请求路径找到匹配的路由，调用路由中的函数来处理请求，返回响应数据</p></li></ul> <p>前端路由：</p> <ul><li>浏览器端路由，<code>value</code>是<code>component</code>，用于战术页面内容</li> <li>注册路由：<code>&lt;Route path=&quot;/test&quot; component={Test}&gt;</code></li> <li>工作过程：当浏览器的<code>path</code>变为<code>/test</code>，当前路由组件就会变为<code>Test</code>组件</li></ul></li></ol> <h4 id="_5-1-3-react-router"><a href="#_5-1-3-react-router" class="header-anchor">#</a> 5.1.3 react-router</h4> <ol><li><code>react</code>的一个插件库</li> <li>专业用来实现一个<code>SPA</code>应用</li> <li>基于<code>react</code>的项目基本都会用到此库</li></ol> <h3 id="_5-2-react-router-dom相关api"><a href="#_5-2-react-router-dom相关api" class="header-anchor">#</a> 5.2 react-router-dom相关API</h3> <p>安装</p> <div class="language- extra-class"><pre class="language-text"><code>npm install react-router-dom
</code></pre></div><h4 id="_5-2-1-内置组件"><a href="#_5-2-1-内置组件" class="header-anchor">#</a> 5.2.1 内置组件</h4> <ol><li><code>BrowserRouter</code>：<code>h5</code>特有</li> <li><code>HashRouter</code></li> <li><code>Route</code></li> <li><code>Redirect</code></li> <li><code>Link</code></li> <li><code>NavLink</code>：相比<code>Link</code>有一个<code>activeClassName</code>属性，即当<code>NavLink</code>被点击时会追加一个类名，比如说让标签高亮的样式类名</li> <li><code>Switch</code></li></ol> <h4 id="_5-2-2-其他"><a href="#_5-2-2-其他" class="header-anchor">#</a> 5.2.2 其他</h4> <ol><li><code>history</code>对象</li> <li><code>match</code>对象</li> <li><code>withRouter</code>函数</li></ol> <h3 id="_5-3-快速入门"><a href="#_5-3-快速入门" class="header-anchor">#</a> 5.3 快速入门</h3> <ol><li>明确好界面中的导航区、展示区</li> <li>导航区的a标签Link标签</li> <li><code>&lt;Link to='/xxx&gt; Demo &lt;/Link&gt;'</code></li> <li>展示区写<code>Route</code>标签路径的匹配<code>&lt;Route path='/xxx' component={Demo} /&gt;</code></li> <li><code>&lt;App /&gt;</code>的最外层包裹一个<code>&lt;BrowserRouter&gt;</code>或<code>&lt;HashRouter&gt;</code></li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Link<span class="token punctuation">,</span> BrowserRouter<span class="token punctuation">,</span> Route<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>


<span class="token operator">&lt;</span>BrowserRouter<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* react路由链接切换组件 ---编写路由链接 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>Link className<span class="token operator">=</span><span class="token string">&quot;list-group-item&quot;</span> to<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span><span class="token operator">&gt;</span>About<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Link className<span class="token operator">=</span><span class="token string">&quot;list-group-item&quot;</span> to<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span><span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;panel-body&quot;</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token comment">/* 注册路由 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">&gt;</span>
</code></pre></div><h4 id="_5-3-1-路由组件和一般组件"><a href="#_5-3-1-路由组件和一般组件" class="header-anchor">#</a> 5.3.1 路由组件和一般组件</h4> <p>路由组件：注册路由中引用的组件，一般放在<code>pages</code>文件夹下</p> <p>路由组件在渲染时会接受到的<code>props</code></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;history&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;push&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ƒ push() {}&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;replace&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ƒ replace() {}&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;go&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ƒ go() {}&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;goBack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ƒ goBack() {}&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;goForward&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ƒ goForward() {}&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;location&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;pathname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/home&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;search&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/home&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/home&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;params&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{}&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_5-3-2-标签体"><a href="#_5-3-2-标签体" class="header-anchor">#</a> 5.3.2 标签体</h4> <p>对于组件的标签体被收集在<code>children</code>属性中</p> <h4 id="_5-3-3-解决样式丢失"><a href="#_5-3-3-解决样式丢失" class="header-anchor">#</a> 5.3.3 解决样式丢失</h4> <p>当路由的层级为多级时，此时去刷新页面样式就会丢失，解决办法如下</p> <ol><li><p>修改样式引入的链接</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./css/bootstrap.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 删除点 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/css/bootstrap.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>修改样式引入链接</p> <div class="language-HTML extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./css/bootstrap.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 将点修改为%PUBLIC_URL% --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>%PUBLIC_URL%/css/bootstrap.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>修改<code>BrowserRouter</code>为<code>HashRouter</code></p></li></ol> <h4 id="_5-3-4-路由匹配"><a href="#_5-3-4-路由匹配" class="header-anchor">#</a> 5.3.4 路由匹配</h4> <p><strong>模糊匹配</strong></p> <p>可以匹配成功</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NavLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home/test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NavLink</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Route</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{Home}/</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>不能匹配成功</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NavLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home/test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NavLink</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Route</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home/test<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{Home}/</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>精准匹配</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home/test&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p><strong>总结</strong></p> <ol><li>模式使用的是模糊匹配</li> <li>开启严格匹配使用<code>exact={true}</code></li> <li>严格匹配不要随便开启，需要时开启。有时开启会导致无法继续匹配二级路由</li></ol> <h3 id="_5-4-路由组件的使用"><a href="#_5-4-路由组件的使用" class="header-anchor">#</a> 5.4 路由组件的使用</h3> <p>路由组件包括两种，<code>react-dom-router</code>提供的组件和<code>Route</code>属性中<code>component</code>指定的组件</p> <h4 id="_5-4-1-navlink"><a href="#_5-4-1-navlink" class="header-anchor">#</a> 5.4.1 NavLink</h4> <ol><li><code>NavLink</code>可以实现路由链接的高亮，通过<code>activeClassName</code>指定样式名</li> <li>标签体的内容是一个特殊的标签属性</li> <li>通过<code>this.props.children</code>可以获取标签体内容</li></ol> <h4 id="_5-4-2-switch"><a href="#_5-4-2-switch" class="header-anchor">#</a> 5.4.2  Switch</h4> <p>被<code>Switch</code>包裹的<code>Route</code>可以实现只匹配第一个成功的路由</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token comment">/* 注册路由 */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Test<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
</code></pre></div><h4 id="_5-4-3-redirect"><a href="#_5-4-3-redirect" class="header-anchor">#</a> 5.4.3 Redirect</h4> <p>指定路由不匹配时，所要使用的路由</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Route</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{About}/</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Route</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{Home}/</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Redirect</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="_5-5-二级路由和向路由组件传递参数"><a href="#_5-5-二级路由和向路由组件传递参数" class="header-anchor">#</a> 5.5 二级路由和向路由组件传递参数</h3> <h4 id="_5-5-1-二级路由"><a href="#_5-5-1-二级路由" class="header-anchor">#</a> 5.5.1 二级路由</h4> <p>路由的匹配都是从第一个注册的路由开始，因为路由的匹配都是模糊匹配，所以二级路由一定要带上父路由的前缀</p> <h4 id="_5-5-2-路由组件传递参数"><a href="#_5-5-2-路由组件传递参数" class="header-anchor">#</a> 5.5.2 路由组件传递参数</h4> <ol><li><p><code>params</code>传递参数</p> <p>路由路径使用<code>:xxx</code>来传递参数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>messageArr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>msg<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                	<span class="token punctuation">{</span><span class="token comment">/* 向路由组件传递params参数 */</span><span class="token punctuation">}</span>
                	<span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/home/message/detail/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>msg<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>msg<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span> href<span class="token operator">=</span><span class="token string">&quot;xxx&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>msg<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>hr<span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token comment">/* 声明接受params参数 */</span><span class="token punctuation">}</span>
            	<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home/message/detail/:id/:title&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Detail<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在路由组件的<code>this.props.match.params</code>中会接到传递的参数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> title<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params
</code></pre></div></li> <li><p><code>search</code>参数</p> <p><code>search</code>参数就相当于<code>query</code>参数，以<code>?</code>开始，<code>&amp;</code>符分割</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/home/message/detail/?id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>msg<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;title=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>msg<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>msg<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>

<span class="token punctuation">{</span><span class="token comment">/* search参数无需声明接受 */</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home/message/detail&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Detail<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>传递的参数被保存为<code>this.props.location.search</code>字符串，使用<code>querystring</code>库的<code>parse</code>解析为对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> qs <span class="token keyword">from</span> <span class="token string">'querystring'</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> title<span class="token punctuation">}</span> <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p><code>state</code>参数</p> <p><code>state</code>参数不会展示在地址栏中</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>pathname<span class="token operator">:</span> <span class="token string">'/home/message/detail'</span><span class="token punctuation">,</span> state<span class="token operator">:</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> msg<span class="token punctuation">.</span>id<span class="token punctuation">,</span> title<span class="token operator">:</span> msg<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>msg<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>

<span class="token punctuation">{</span><span class="token comment">/* state参数无需声明接受 */</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home/message/detail&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Detail<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>传递的参数会被保存到<code>this.props.location.state</code>中</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> title<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>state
</code></pre></div></li></ol> <h3 id="_5-6-push与replace"><a href="#_5-6-push与replace" class="header-anchor">#</a> 5.6 push与replace</h3> <p><code>react-router-dom</code>利用的是浏览器的<code>history</code>的<code>push</code>与<code>replace</code>默认为<code>push</code>，<code>Link</code>中提供属性<code>replace={true}</code>来进行切换到<code>replace</code>模式</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Link replace<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> to<span class="token operator">=</span><span class="token string">'xxx'</span><span class="token operator">&gt;</span>xxx<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
</code></pre></div><h3 id="_5-7-编程式路由导航"><a href="#_5-7-编程式路由导航" class="header-anchor">#</a> 5.7 编程式路由导航</h3> <h4 id="_5-7-1-push与replace导航"><a href="#_5-7-1-push与replace导航" class="header-anchor">#</a> 5.7.1 push与replace导航</h4> <ol><li><p><code>replace</code>手动导航</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">replaceShow</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>id<span class="token punctuation">,</span> msg<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>replace查看<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token function-variable function">replaceShow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> title</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 实现跳转到Detail组件，且为replace跳转</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/home/message/detail/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><code>push</code>手动导航</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushShow</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>id<span class="token punctuation">,</span> msg<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>push查看<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token function-variable function">pushShow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> title</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 实现跳转到Detail组件，且为push跳转</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    	<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/home/message/detail/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <p>对于<code>params</code>和<code>search</code>不同的参数传递，使用不同的路径即可，<code>state</code>参数需要在<code>replace</code>或<code>push</code>的第二个参数中传递</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushShow</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>id<span class="token punctuation">,</span> msg<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>push查看<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token function-variable function">pushShow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> title</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// push跳转，携带params参数</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    	<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/home/message/detail</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> id<span class="token punctuation">,</span> title<span class="token operator">:</span> title<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_5-7-2-goback和goforward"><a href="#_5-7-2-goback和goforward" class="header-anchor">#</a> 5.7.2 goBack和goForward</h4> <ol><li><p><code>goBack</code>回退</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>back<span class="token punctuation">}</span><span class="token operator">&gt;</span>回退<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token function-variable function">back</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><code>goForward</code>前进</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>forward<span class="token punctuation">}</span><span class="token operator">&gt;</span>前进<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token function-variable function">forward</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">goForward</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><code>go</code>根据传递的参数的值来进行回退或前进</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>go<span class="token punctuation">}</span><span class="token operator">&gt;</span>go<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token function-variable function">go</span> <span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 回退两步</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h4 id="_5-7-3-withrouter"><a href="#_5-7-3-withrouter" class="header-anchor">#</a> 5.7.3 withRouter</h4> <p>对于路由组件<code>this.props</code>上的属性<code>history</code>、<code>location</code>、<code>match</code>属性只能在路由组件上使用，因为一般组件没有这些属性</p> <p><code>withRouter</code>是<code>react-dom-router</code>提供的一个函数，通过<code>withRouter</code>包裹的一般组件称为路由组件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>withRouter<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>

<span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>

    <span class="token function-variable function">back</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;page-header&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>back<span class="token punctuation">}</span><span class="token operator">&gt;</span>回退<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>Header<span class="token punctuation">)</span>
</code></pre></div><h3 id="_5-8-history与hash"><a href="#_5-8-history与hash" class="header-anchor">#</a> 5.8 history与hash</h3> <p><code>hsitory</code>与<code>hash</code>的区别即是<code>BrowserRouter</code>与<code>HashRouter</code>的区别</p> <ol><li><p>底层原理不一样</p> <p><code>BrowserRouter</code>使用的是<code>H5</code>的<code>hsiroty API</code>，不兼容<code>IE9</code>及以下的版本，<code>HashRouter</code>使用的是<code>URL</code>的哈希值</p></li> <li><p><code>path</code>表现形式不一致</p> <p><code>BrowserRouter</code>的路径中没有<code>#</code>，例如：<code>localhost:3000/demo/test</code></p> <p><code>HashRouter</code>的路径包含<code>#</code>，例如：<code>localhost:3000/#/demo/test</code></p></li> <li><p>刷新后对路由<code>state</code>参数的影响</p> <p><code>BrowserRouter</code>没有任何影响，因为<code>state</code>保存在<code>history</code>对象中</p> <p><code>HashRouter</code>刷新后会导致路由<code>state</code>参数的丢失</p></li> <li><p><code>HashRouter</code>可以用于解决一些路径错误的问题，例如：样式丢失</p></li></ol> <h2 id="_6-ant-design组件"><a href="#_6-ant-design组件" class="header-anchor">#</a> 6. ant-design组件</h2> <p>国内蚂蚁金服的开源<code>react</code>组件库</p> <h3 id="_6-1-基本使用"><a href="#_6-1-基本使用" class="header-anchor">#</a> 6.1 基本使用</h3> <ol><li><p>安装</p> <div class="language- extra-class"><pre class="language-text"><code>npm install antd
</code></pre></div></li> <li><p>使用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token comment">// 导入需要的组件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> WechatOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span>

<span class="token comment">// 导入组件的样式</span>
<span class="token keyword">import</span> <span class="token string">'antd/dist/antd.css'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span><span class="token operator">&gt;</span>Primary Button<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>

                <span class="token operator">&lt;</span>WechatOutlined <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="_6-2-按需引入样式"><a href="#_6-2-按需引入样式" class="header-anchor">#</a> 6.2 按需引入样式</h3> <ol><li><p>安装<code>react-app-rewired</code>和<code>customize-cra</code></p> <div class="language- extra-class"><pre class="language-text"><code>npm install react-app-rewired customize-cra
</code></pre></div></li> <li><p>安装<code>babel-plugin-import</code></p> <div class="language- extra-class"><pre class="language-text"><code>npm install babel-plugin-import
</code></pre></div></li> <li><p>修改<code>package.json</code></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
-   <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts start&quot;</span><span class="token punctuation">,</span>
-   <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts build&quot;</span><span class="token punctuation">,</span>
-   <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts test&quot;</span><span class="token punctuation">,</span>
+   <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-app-rewired start&quot;</span><span class="token punctuation">,</span>
+   <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-app-rewired build&quot;</span><span class="token punctuation">,</span>
+   <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-app-rewired test&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>根目录新建<code>config-overrides.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> override<span class="token punctuation">,</span> fixBabelImports <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'customize-cra'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">override</span><span class="token punctuation">(</span>
	<span class="token function">fixBabelImports</span><span class="token punctuation">(</span><span class="token string">'import'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
		libraryName<span class="token operator">:</span> <span class="token string">'antd'</span><span class="token punctuation">,</span>
		libraryDirectory<span class="token operator">:</span> <span class="token string">'es'</span><span class="token punctuation">,</span>
		style<span class="token operator">:</span> <span class="token string">'css'</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>配置完成之后，组件不需要再引入样式</p></li></ol> <h3 id="_6-3-自定义样式"><a href="#_6-3-自定义样式" class="header-anchor">#</a> 6.3 自定义样式</h3> <ol><li><p>由于<code>antd</code>官方使用<code>less</code>编写样式，要想修改样式需要安装<code>less</code>和<code>less-loader</code></p> <div class="language- extra-class"><pre class="language-text"><code>npm install less less-loader
</code></pre></div></li> <li><p>修改<code>config-overrides.js</code>配置文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> override<span class="token punctuation">,</span> fixBabelImports<span class="token punctuation">,</span> addLessLoader  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'customize-cra'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">override</span><span class="token punctuation">(</span>
	<span class="token function">fixBabelImports</span><span class="token punctuation">(</span><span class="token string">'import'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
		libraryName<span class="token operator">:</span> <span class="token string">'antd'</span><span class="token punctuation">,</span>
		libraryDirectory<span class="token operator">:</span> <span class="token string">'es'</span><span class="token punctuation">,</span>
		style<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token function">addLessLoader</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		lessOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
			javascriptEnabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 允许使用js修改主题颜色</span>
			modifyVars<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">'@primary-color'</span><span class="token operator">:</span> <span class="token string">'orange'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 修改主题的颜色</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用less的配置</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>
    override<span class="token punctuation">,</span>
    fixBabelImports<span class="token punctuation">,</span>
    addLessLoader<span class="token punctuation">,</span>
    adjustStyleLoaders<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'customize-cra'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">override</span><span class="token punctuation">(</span>
    <span class="token comment">// 针对antd 实现按需打包：根据import来打包 (使用babel-plugin-import)</span>
    <span class="token function">fixBabelImports</span><span class="token punctuation">(</span><span class="token string">'import'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        libraryName<span class="token operator">:</span> <span class="token string">'antd'</span><span class="token punctuation">,</span>
        libraryDirectory<span class="token operator">:</span> <span class="token string">'es'</span><span class="token punctuation">,</span>
        style<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//自动打包相关的样式 默认为 style:'css'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 使用less-loader对源码重的less的变量进行重新制定，设置antd自定义主题</span>
    <span class="token function">addLessLoader</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  
        lessOptions<span class="token operator">:</span> <span class="token punctuation">{</span> 
            javascriptEnabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            modifyVars<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">'@primary-color'</span><span class="token operator">:</span> <span class="token string">'#1DA57A'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        sourceMap<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">adjustStyleLoaders</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> use<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">,</span> css<span class="token punctuation">]</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        css<span class="token punctuation">.</span>options<span class="token punctuation">.</span>sourceMap <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        css<span class="token punctuation">.</span>options<span class="token punctuation">.</span>modules <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token comment">// 配置默认的样式名称规则</span>
            localIdentName<span class="token operator">:</span><span class="token string">'[name]__[local]--[hash:base64:5]'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">getLocalIdent</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">loaderContext<span class="token punctuation">,</span> localIdentName<span class="token punctuation">,</span> localName<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// 处理antd 的样式</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>loaderContext<span class="token punctuation">.</span>resourcePath<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> localName<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>       
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
</code></pre></div></li></ol> <h2 id="_7-redux"><a href="#_7-redux" class="header-anchor">#</a> 7. redux</h2> <h3 id="_7-1-redux理解"><a href="#_7-1-redux理解" class="header-anchor">#</a> 7.1 redux理解</h3> <ol><li><code>redux</code>是一个专门用于做状态管理的<code>JS</code>库(不是<code>react</code>插件库)</li> <li>它可以用在<code>react</code>，<code>angular</code>，<code>vue</code>等项目中，但基本与<code>react</code>配合使用</li> <li>作用：集中式管理<code>react</code>应用中多个组件共享的状态</li></ol> <h4 id="_7-1-1-使用redux的情况"><a href="#_7-1-1-使用redux的情况" class="header-anchor">#</a> 7.1.1 使用redux的情况</h4> <ol><li>某个组件的状态，需要让其他组件可以随时拿到</li> <li>一个组件需要改变另一个组件的状态</li> <li>总体原则：能不用就不用，如果不用比较吃力才考虑使用</li></ol> <h4 id="_7-1-2-redux工作流程"><a href="#_7-1-2-redux工作流程" class="header-anchor">#</a> 7.1.2 redux工作流程</h4> <img src="https://gitee.com/dingwanli/picture/raw/master/20210403201144.png" alt="image-20210107212920419" style="zoom:50%;"> <h3 id="_7-2-redux的三个核心概念"><a href="#_7-2-redux的三个核心概念" class="header-anchor">#</a> 7.2 redux的三个核心概念</h3> <h4 id="_7-2-1-action"><a href="#_7-2-1-action" class="header-anchor">#</a> 7.2.1 action</h4> <ol><li><p>动作的对象</p></li> <li><p>包含2个属性</p> <ul><li><code>type</code>：标识属性，值为字符串，唯一，必要属性</li> <li><code>data</code>：数据属性，值类型任意，可选属性</li></ul></li> <li><p>例子</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'ADD_STUDENT'</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'tom'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div></li></ol> <h4 id="_7-2-2-reducer"><a href="#_7-2-2-reducer" class="header-anchor">#</a> 7.2.2 reducer</h4> <ol><li>用于初始化状态、加工状态</li> <li>加工时，根据旧的<code>state</code>和<code>action</code>，产生新的<code>state</code>的纯函数</li></ol> <h4 id="_7-2-3-store"><a href="#_7-2-3-store" class="header-anchor">#</a> 7.2.3 store</h4> <ol><li><p>将<code>state</code>、<code>action</code>、<code>reducer</code>联系在一起的对象</p></li> <li><p>如何得到此对象</p> <p>安装</p> <div class="language- extra-class"><pre class="language-text"><code>npm install redux
</code></pre></div><p>使用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'./reducers'</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>此对象的功能?</p> <ul><li><p><code>getState()</code>: 得到<code>state</code></p></li> <li><p><code>dispatch(action)</code>: 分发<code>action</code>, 触发<code>reducer</code>调用, 产生新的<code>state</code></p></li> <li><p><code>subscribe(listener)</code>: 注册监听, 当产生了新的<code>state</code>时, 自动调用</p></li></ul></li></ol> <h3 id="_7-3-基本使用"><a href="#_7-3-基本使用" class="header-anchor">#</a> 7.3 基本使用</h3> <h4 id="_7-3-1-redux精简版"><a href="#_7-3-1-redux精简版" class="header-anchor">#</a> 7.3.1 redux精简版</h4> <ol><li><p>去除<code>Count</code>组件的自身状态</p></li> <li><p><code>src</code>下建立</p> <div class="language- extra-class"><pre class="language-text"><code>- src
	- redux
		- store.js
		- count_reducer.js
</code></pre></div></li> <li><p><code>store.js</code></p> <ol><li><p>引入<code>redux</code>中的<code>createStore</code>函数，创建一个<code>store</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> countReducer <span class="token keyword">from</span> <span class="token string">'./count_reducer'</span>
</code></pre></div></li> <li><p><code>createStore</code>调用时要传入一个为其服务的<code>reducer</code>，并将返回的结果暴露出去</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span>countReducer<span class="token punctuation">)</span>
</code></pre></div></li></ol></li> <li><p><code>count_reducer.js</code></p> <ol><li><p><code>reducer</code>的本质是一个函数，接受<code>preState</code>、<code>action</code>返回加工后的状态</p></li> <li><p><code>reducer</code>有两个作用：初始化状态，加工状态</p></li> <li><p><code>reducer</code>被第一次调用时，是<code>store</code>自动触发的，传递的<code>preState</code>是<code>undefinded</code></p></li> <li><p>完整代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 程序初始化时preState为undefined，赋初值为0</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">countReducer</span><span class="token punctuation">(</span><span class="token parameter">preState <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 从action对象中获取：type, data</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>type<span class="token punctuation">,</span> data<span class="token punctuation">}</span> <span class="token operator">=</span> action

    <span class="token comment">// 根据type决定如何加工数据</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 加</span>
        <span class="token keyword">case</span> <span class="token string">'increment'</span><span class="token operator">:</span>
            <span class="token keyword">return</span> preState <span class="token operator">+</span> data

        <span class="token comment">// 减</span>
        <span class="token keyword">case</span> <span class="token string">'decrement'</span><span class="token operator">:</span>
            <span class="token keyword">return</span> preState <span class="token operator">-</span> data

        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">return</span> preState
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol></li> <li><p>在<code>index.js</code>中检测<code>store</code>中状态的改变，一旦发生改变重新渲染<code>&lt;App /&gt;</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span>

<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./redux/store'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 由于虚拟DOM的性质，状态发生改变的组件，才会重新调用render渲染</span>
    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>redux</code>只负责管理状态，至于状态的改变驱动着页面的展示，要自己通知<code>react</code>调用<code>render</code></p></li> <li><p><code>Count</code>组件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Count</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>

    <span class="token comment">// 加操作</span>
    <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 减操作</span>
    <span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createDecrementAction</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 奇数加</span>
    <span class="token function-variable function">incrementIfOdd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> count <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
            store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 异步加</span>
    <span class="token function-variable function">incrementAsync</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>当前求和为：<span class="token punctuation">{</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>select ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber <span class="token operator">=</span> c<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;3&quot;</span><span class="token operator">&gt;</span><span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>increment<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>decrement<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>incrementIfOdd<span class="token punctuation">}</span><span class="token operator">&gt;</span>当前和为奇数再<span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>incrementAsync<span class="token punctuation">}</span><span class="token operator">&gt;</span>异步<span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h4 id="_7-3-2-redux完整版"><a href="#_7-3-2-redux完整版" class="header-anchor">#</a> 7.3.2 redux完整版</h4> <p>相对于精简版增加两个文件</p> <ol><li><p><code>constant.js</code>放置由于编码疏忽写错<code>action</code>中的<code>type</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">INCREMENT</span> <span class="token operator">=</span> <span class="token string">'increment'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">DECREMENT</span> <span class="token operator">=</span> <span class="token string">'decrement'</span>
</code></pre></div></li> <li><p><code>count_action.js</code>专门用于创建<code>action</code>对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token constant">INCREMENT</span><span class="token punctuation">,</span> <span class="token constant">DECREMENT</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./constant'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">createIncrementAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token constant">INCREMENT</span><span class="token punctuation">,</span> data<span class="token operator">:</span> data<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">createDecrementAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token constant">DECREMENT</span><span class="token punctuation">,</span> data<span class="token operator">:</span> data<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h4 id="_7-3-3-同步和异步action"><a href="#_7-3-3-同步和异步action" class="header-anchor">#</a> 7.3.3 同步和异步action</h4> <p>如果一个<code>action</code>返回的是一个普通对象，则为同步<code>action</code>；如果返回一个函数，则为异步<code>action</code></p> <p>对于异步<code>action</code>需要中间件<code>redux-thunk</code>的支持</p> <ol><li><p>明确：延迟的动作不想交给组件自身，想交给<code>action</code></p></li> <li><p>何时需要异步<code>action</code>：想要对状态进行操作，但是具体的数据靠异步任务返回</p></li> <li><p>具体编码：</p> <p>安装<code>redux-thunk</code></p> <div class="language- extra-class"><pre class="language-text"><code>npm install redux-thunk
</code></pre></div><p><code>store.js</code>中使用<code>redux-thunk</code>处理异步任务</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 引入createStore，用于创建redux中最为核心的store对象</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>

<span class="token comment">// 引入redux-thunk，用于支持异步action</span>
<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span>

<span class="token keyword">import</span> countReducer <span class="token keyword">from</span> <span class="token string">'./count_reducer'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span>countReducer<span class="token punctuation">,</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>创建<code>action</code>的函数不再返回一个一般对象，而是返回一个函数，该函数中写异步任务<code>count_action.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">createIncrementAsyncAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 通知redux修改状态</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>组件调用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">incrementAsync</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAsyncAction</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>等到异步任务有结果时，分发一个同步的<code>action</code>去真正操作数据</p></li> <li><p>异步<code>action</code>不是必须的，完全可以自己等待异步任务的结果，再去分发同步<code>action</code></p></li></ol> <h3 id="_7-4-react-redux"><a href="#_7-4-react-redux" class="header-anchor">#</a> 7.4 react-redux</h3> <p><code>react-redux</code>是<code>react</code>官方出的一个类似于<code>redux</code>的状态管理插件</p> <img src="https://gitee.com/dingwanli/picture/raw/master/20210403201214.png" alt="image-20210108215036857" style="zoom:80%;"> <h4 id="_7-4-1-基本理解"><a href="#_7-4-1-基本理解" class="header-anchor">#</a> 7.4.1 基本理解</h4> <ol><li>所有的<code>UI</code>组件都应该包裹在一个容器组件，它们是父子关系</li> <li>容器组件是真正和<code>redux</code>打交道的，里面可以随意的使用<code>redux</code>的<code>api</code></li> <li><code>UI</code>组件中不能使用任何<code>redux</code>的<code>api</code></li> <li>容器组件会传递给<code>UI</code>组件：
<ul><li><code>redux</code>中所保存的状态</li> <li>用于操作状态的方法</li></ul></li> <li>容器给<code>UI</code>传递：状态、操作状态的方法，均通过<code>props</code>传递</li></ol> <h4 id="_7-4-2-基本使用"><a href="#_7-4-2-基本使用" class="header-anchor">#</a> 7.4.2 基本使用</h4> <ol><li><p>安装</p> <div class="language- extra-class"><pre class="language-text"><code>npm install react-redux
</code></pre></div></li> <li><p>在<code>src</code>下创建容器组件</p> <div class="language- extra-class"><pre class="language-text"><code>- src
  - containers
    - Count
      index.jsx
</code></pre></div></li> <li><p>引入相关依赖</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 引入Count的UI组件</span>
<span class="token keyword">import</span> CountUI <span class="token keyword">from</span> <span class="token string">'../../components/Count'</span>

<span class="token comment">// 引入action</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> 
    createIncrementAction<span class="token punctuation">,</span> 
    createIncrementAsyncAction<span class="token punctuation">,</span> 
    createDecrementAction 
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../../redux/count_action&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 引入connect用于连接UI组件与redux</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>connect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
</code></pre></div></li> <li><p>编写<code>mapStateToProps</code>函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>count<span class="token operator">:</span> state<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>mapStateToProps</code>函数的返回的是一个对象</p> <p>对象中的<code>key</code>就作为传递给<code>UI</code>组件<code>props</code>的<code>key</code>，<code>value</code>就作为传递给<code>UI</code>组件<code>props</code>的<code>value</code>——状态</p> <p><code>mapStateToProps</code>用于传递状态</p></li> <li><p>编写<code>mapDispatchToProps</code>函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">mapDispatchToProps</span><span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">increment</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 通知redux执行加法</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">decrement</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createDecrementAction</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">incrementAsync</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAsyncAction</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>mapDispatchToProps</code>函数的返回的是一个对象</p> <p>对象中的<code>key</code>就作为传递给<code>UI</code>组件<code>props</code>的<code>key</code>，<code>value</code>就作为传递给<code>UI</code>组件<code>props</code>的<code>value</code>——操作状态的方法</p> <p><code>mapDispatchToProps</code>用于传递操作状态的方法</p></li> <li><p>创建并暴露一个<code>Count</code>组件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span> mapDispatchToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>CountUI<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>在引入<code>Count</code>组件中改为，引入<code>container</code>中的<code>Count</code>并传入<code>store</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token comment">// 引入容器组件</span>
<span class="token keyword">import</span> Count <span class="token keyword">from</span> <span class="token string">'./containers/Count'</span>

<span class="token comment">// react-redux需要在组件中使用props传递store</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./redux/store'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token comment">/* 给容器组件传递store */</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>Count store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>容器组件优化</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 引入Count的UI组件</span>
<span class="token keyword">import</span> CountUI <span class="token keyword">from</span> <span class="token string">'../../components/Count'</span>

<span class="token comment">// 引入action</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> 
    createIncrementAction<span class="token punctuation">,</span> 
    createIncrementAsyncAction<span class="token punctuation">,</span> 
    createDecrementAction 
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../../redux/count_action&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 引入connect用于连接UI组件与redux</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>connect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>

<span class="token comment">// 创建并暴露一个Count组件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>
    <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token operator">:</span> state<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    
    <span class="token comment">// mspDispatchToProps的一般写法</span>
    <span class="token comment">// dispatch =&gt; ({</span>
    <span class="token comment">//     increment: (data)=&gt; {</span>
    <span class="token comment">//         // 通知redux执行加法</span>
    <span class="token comment">//         dispatch(createIncrementAction(data))</span>
    <span class="token comment">//     },</span>
    <span class="token comment">//     decrement: (data) =&gt; {</span>
    <span class="token comment">//         dispatch(createDecrementAction(data))</span>
    <span class="token comment">//     },</span>
    <span class="token comment">//     incrementAsync: (data, time) =&gt; {</span>
    <span class="token comment">//         dispatch(createIncrementAsyncAction(data, time))</span>
    <span class="token comment">//     }</span>
    <span class="token comment">// })</span>

    <span class="token comment">// mapDispatchToProps的简写，传送action，react-redux自动dispatch</span>
    <span class="token punctuation">{</span>
        increment<span class="token operator">:</span> createIncrementAction<span class="token punctuation">,</span>
        decrement<span class="token operator">:</span> createDecrementAction<span class="token punctuation">,</span>
        incrementAsync<span class="token operator">:</span> createIncrementAsyncAction
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span>CountUI<span class="token punctuation">)</span>
</code></pre></div></li></ol> <h4 id="_7-4-3-优化"><a href="#_7-4-3-优化" class="header-anchor">#</a> 7.4.3 优化</h4> <ol><li><p>如果使用了<code>react-redux</code>，那么在<code>index.js</code>中就不需要使用<code>store.subscribe</code>监控<code>App</code>组件的变化，因为容器组件会自动监控状态的变化</p></li> <li><p><code>Provider</code>组件的使用</p> <p>使用<code>Provider</code>可以自动传递<code>store</code>而不需要在使用容器组件的地方自己传递<code>store</code></p> <p>修改<code>index.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>

<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./redux/store'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span><span class="token punctuation">,</span> 
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>一般将<code>UI</code>组件与容器组件整合为一个文件，<code>UI</code>组件不必暴露，暴露容器组件</p></li></ol> <h4 id="_7-4-4-多组件数据共享"><a href="#_7-4-4-多组件数据共享" class="header-anchor">#</a> 7.4.4 多组件数据共享</h4> <ol><li><p>每一个组件都需要定义一个<code>action</code>和<code>reducer</code></p></li> <li><p>多个<code>reducer</code>中需要在<code>store.js</code>中使用<code>redux</code>中的<code>combineReducers</code>合并成一个<code>reducer</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 引入createStore，用于创建redux中最为核心的store对象, combineReducers用于合并reducers</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware<span class="token punctuation">,</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>

<span class="token comment">// 引入redux-thunk，用于支持异步action</span>
<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span>

<span class="token comment">// 引入reducers</span>
<span class="token keyword">import</span> countReducer <span class="token keyword">from</span> <span class="token string">'./reducers/count'</span>
<span class="token keyword">import</span> personReducer <span class="token keyword">from</span> <span class="token string">'./reducers/person'</span>

<span class="token comment">// 汇总reducers</span>
<span class="token keyword">const</span> allReducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    count<span class="token operator">:</span> countReducer<span class="token punctuation">,</span>
    persons<span class="token operator">:</span> personReducer
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span>allReducer<span class="token punctuation">,</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li></ol> <h4 id="_7-4-5-redux调试工具"><a href="#_7-4-5-redux调试工具" class="header-anchor">#</a> 7.4.5 redux调试工具</h4> <ol><li><p>扩展商店安装<code>Redux DevTools</code></p></li> <li><p>项目安装支持库</p> <div class="language- extra-class"><pre class="language-text"><code>npm install redux-devtools-extension
</code></pre></div></li> <li><p><code>store.js</code>中引入并使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> composeWithDevTools <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-devtools-extension'</span>

<span class="token comment">//无异步的情况</span>
<span class="token comment">// export default createStore(allReducer, composeWithDevTools())</span>

<span class="token comment">// 有异步的情况</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span>allReducer<span class="token punctuation">,</span> <span class="token function">composeWithDevTools</span><span class="token punctuation">(</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li></ol> <h2 id="_8-项目打包"><a href="#_8-项目打包" class="header-anchor">#</a> 8. 项目打包</h2> <ol><li><p>执行<code>npm build</code></p> <div class="language- extra-class"><pre class="language-text"><code>npm run build
</code></pre></div></li> <li><p>安装临时查看服务器</p> <div class="language- extra-class"><pre class="language-text"><code>npm install -g serve
</code></pre></div></li> <li><p>进入打包文件夹<code>build</code></p> <div class="language- extra-class"><pre class="language-text"><code>serve
</code></pre></div></li></ol> <h2 id="_9-react扩展"><a href="#_9-react扩展" class="header-anchor">#</a> 9. react扩展</h2> <h3 id="_9-1-setstate"><a href="#_9-1-setstate" class="header-anchor">#</a> 9.1 setState</h3> <p><code>setState</code>更新状态有2种写法</p> <ol><li><p><code>setState(stateChange, [callback])</code>------对象式的<code>setState</code></p> <p><code>stateChange</code>为状态改变对象(该对象可以体现出状态的更改)</p> <p><code>callback</code>是可选的回调函数, 它在状态更新完毕、界面也更新后(render调用后)才被调用</p></li> <li><p><code>setState(updater, [callback])</code>------函数式的<code>setState</code></p> <p><code>updater</code>为返回<code>stateChange</code>对象的函数。</p> <p><code>updater</code>可以接收到<code>state</code>和<code>props</code>。</p> <p><code>callback</code>是可选的回调函数, 它在状态更新、界面也更新后(<code>render</code>调用后)才被调用。</p></li> <li><p>总结:</p> <p>对象式的<code>setState</code>是函数式的<code>setState</code>的简写方式(语法糖)</p> <p>使用原则：</p> <ul><li>如果新状态不依赖于原状态 ===&gt; 使用对象方式</li> <li>如果新状态依赖于原状态 ===&gt; 使用函数方式</li> <li>如果需要在<code>setState()</code>执行后获取最新的状态数据, 要在第二个<code>callback</code>函数中读取</li></ul></li></ol> <h3 id="_9-2-lazyload"><a href="#_9-2-lazyload" class="header-anchor">#</a> 9.2 lazyLoad</h3> <p>路由组件的<code>lazyLoad</code></p> <ol><li><p>通过<code>React</code>的<code>lazy</code>函数配合<code>import()</code>函数动态加载路由组件 ===&gt; 路由组件代码会被分开打包</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> Login <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/pages/Login'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>通过<code>&lt;Suspense&gt;</code>指定在加载得到路由打包文件前显示一个自定义<code>loading</code>界面</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>loading<span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/xxx&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Xxxx<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
</code></pre></div></li></ol> <h3 id="_9-3-hooks"><a href="#_9-3-hooks" class="header-anchor">#</a> 9.3 Hooks</h3> <ol><li><p><code>React Hook/Hooks</code>是什么?</p> <ul><li><code>Hook</code>是<code>React 16.8.0</code>版本增加的新特性/新语法</li></ul></li></ol> <ul><li>可以让你在函数组件中使用 <code>state</code>以及其他的 <code>React</code>特性</li></ul> <ol start="2"><li><p>三个常用的<code>Hook</code></p> <p><code>State Hook</code></p> <div class="language-js extra-class"><pre class="language-js"><code>React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><code>Effect Hook</code></p> <div class="language- extra-class"><pre class="language-text"><code>React.useEffect()
</code></pre></div><p><code>Ref Hook</code></p> <div class="language- extra-class"><pre class="language-text"><code>React.useRef()
</code></pre></div></li> <li><p><code>State Hook</code></p> <p><code>State Hook</code>让函数组件也可以有state状态, 并进行状态数据的读写操作</p> <p>语法:<code>const [xxx, setXxx] = React.useState(initValue)</code></p> <p><code>useState()</code>说明:
参数: 第一次初始化指定的值在内部作缓存
返回值: 包含2个元素的数组, 第1个为内部当前状态值, 第2个为更新状态值的函数</p> <p><code>setXxx()</code>2种写法:
<code>setXxx(newValue)</code>: 参数为非函数值, 直接指定新的状态值, 内部用其覆盖原来的状态值
<code>setXxx(value =&gt; newValue)</code>: 参数为函数, 接收原本的状态值, 返回新的状态值, 内部用其覆盖原来的状态值</p></li> <li><p><code>Effect Hook</code></p> <p><code>Effect Hook</code> 可以让你在函数组件中执行副作用操作(用于模拟类组件中的生命周期钩子)</p> <p><code>React</code>中的副作用操作:
发<code>ajax</code>请求数据获取
设置订阅 / 启动定时器
手动更改真实<code>DOM</code></p> <p>语法和说明:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 在此可以执行任何带副作用操作</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 在组件卸载前执行</span>
    	<span class="token comment">// 在此做一些收尾工作, 比如清除定时器/取消订阅等</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>stateValue<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 如果指定的是[], 回调函数只会在第一次render()后执行</span>
</code></pre></div><p>可以把 <code>useEffect Hook</code> 看做如下三个函数的组合</p> <div class="language- extra-class"><pre class="language-text"><code>componentDidMount()
componentDidUpdate()
componentWillUnmount() 
</code></pre></div></li> <li><p><code>Ref Hook</code></p> <p><code>Ref Hook</code>可以在函数组件中存储/查找组件内的标签或任意其它数据</p> <p>语法: <code>const refContainer = useRef()</code></p> <p>作用:保存标签对象,功能与<code>React.createRef()</code>一样</p></li></ol> <h3 id="_9-4-fragment"><a href="#_9-4-fragment" class="header-anchor">#</a> 9.4 Fragment</h3> <p>使用</p> <div class="language- extra-class"><pre><code>&lt;Fragment&gt;&lt;Fragment&gt;

&lt;&gt;&lt;/&gt;
</code></pre></div><p>作用</p> <blockquote><p>可以不用必须有一个真实的DOM根标签了</p></blockquote> <hr> <h3 id="_9-5-context"><a href="#_9-5-context" class="header-anchor">#</a> 9.5 Context</h3> <p>理解</p> <blockquote><p>一种组件间通信方式, 常用于【祖组件】与【后代组件】间通信</p></blockquote> <p>使用</p> <ol><li><p>创建<code>Context</code>容器对象：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> XxxContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
</code></pre></div></li> <li><p>渲染子组时，外面包裹<code>xxxContext.Provider</code>, 通过<code>value</code>属性给后代组件传递数据</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>xxxContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>数据<span class="token punctuation">}</span><span class="token operator">&gt;</span>
	子组件
<span class="token operator">&lt;</span><span class="token operator">/</span>xxxContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
</code></pre></div></li> <li><p>后代组件读取数据</p> <p>第一种方式:仅适用于类组件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">static</span> contextType <span class="token operator">=</span> xxxContext  <span class="token comment">// 声明接收context</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token comment">// 读取context中的value数据</span>
</code></pre></div><p>第二种方式: 函数组件与类组件都可以</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>xxxContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>
        <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span> <span class="token comment">// value就是context中的value数据</span>
        	要显示的内容
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>xxxContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
</code></pre></div></li></ol> <p>注意</p> <div class="language- extra-class"><pre><code>在应用开发中一般不用context, 一般都用它的封装react插件
</code></pre></div><h3 id="_9-6-组件优化"><a href="#_9-6-组件优化" class="header-anchor">#</a> 9.6 组件优化</h3> <p><strong>Component的2个问题</strong></p> <blockquote><ol><li><p>只要执行setState(),即使不改变状态数据, 组件也会重新render() ==&gt; 效率低</p></li> <li><p>只当前组件重新render(), 就会自动重新render子组件，纵使子组件没有用到父组件的任何数据 ==&gt; 效率低</p></li></ol></blockquote> <p><strong>效率高的做法</strong></p> <blockquote><p>只有当组件的state或props数据发生改变时才重新render()</p></blockquote> <p><strong>原因</strong></p> <blockquote><p>Component中的shouldComponentUpdate()总是返回true</p></blockquote> <p><strong>解决</strong></p> <div class="language- extra-class"><pre><code>办法1: 
	重写shouldComponentUpdate()方法
	比较新旧state或props数据, 如果有变化才返回true, 如果没有返回false
办法2:  
	使用PureComponent
	PureComponent重写了shouldComponentUpdate(), 只有state或props数据有变化才返回true
	注意: 
		只是进行state和props数据的浅比较, 如果只是数据对象内部数据变了, 返回false  
		不要直接修改state数据, 而是要产生新数据
项目中一般使用PureComponent来优化
</code></pre></div><h3 id="_9-7-render-props"><a href="#_9-7-render-props" class="header-anchor">#</a> 9.7 render props</h3> <p>如何向组件内部动态传入带内容的结构(标签)?</p> <div class="language- extra-class"><pre><code>Vue中: 
	使用slot技术, 也就是通过组件标签体传入结构  &lt;A&gt;&lt;B/&gt;&lt;/A&gt;
React中:
	使用children props: 通过组件标签体传入结构
	使用render props: 通过组件标签属性传入结构,而且可以携带数据，一般用render函数属性
</code></pre></div><p><code>children props</code></p> <div class="language- extra-class"><pre><code>&lt;A&gt;
  &lt;B&gt;xxxx&lt;/B&gt;
&lt;/A&gt;
{this.props.children}
问题: 如果B组件需要A组件内的数据, ==&gt; 做不到 
</code></pre></div><p><code>render props</code></p> <div class="language- extra-class"><pre><code>&lt;A render={(data) =&gt; &lt;C data={data}&gt;&lt;/C&gt;}&gt;&lt;/A&gt;
A组件: {this.props.render(内部state数据)}
C组件: 读取A组件传入的数据显示 {this.props.data} 
</code></pre></div><h3 id="_9-8-错误边界"><a href="#_9-8-错误边界" class="header-anchor">#</a> 9.8 错误边界</h3> <h4 id="理解"><a href="#理解" class="header-anchor">#</a> 理解：</h4> <p>错误边界(<code>Error boundary</code>)：用来捕获后代组件错误，渲染出备用页面</p> <h4 id="特点"><a href="#特点" class="header-anchor">#</a> 特点：</h4> <p>只能捕获后代组件生命周期产生的错误，不能捕获自己组件产生的错误和其他组件在合成事件、定时器中产生的错误</p> <h5 id="使用方式"><a href="#使用方式" class="header-anchor">#</a> 使用方式：</h5> <p>getDerivedStateFromError配合componentDidCatch</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 生命周期函数，一旦后台组件报错，就会触发</span>
<span class="token keyword">static</span> <span class="token function">getDerivedStateFromError</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 在render之前触发</span>
    <span class="token comment">// 返回新的state</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        hasError<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">componentDidCatch</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 统计页面的错误。发送请求发送到后台去</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_9-9-组件通信方式总结"><a href="#_9-9-组件通信方式总结" class="header-anchor">#</a> 9.9 组件通信方式总结</h3> <h4 id="组件间的关系"><a href="#组件间的关系" class="header-anchor">#</a> 组件间的关系：</h4> <ul><li>父子组件</li> <li>兄弟组件（非嵌套组件）</li> <li>祖孙组件（跨级组件）</li></ul> <h4 id="几种通信方式"><a href="#几种通信方式" class="header-anchor">#</a> 几种通信方式：</h4> <div class="language- extra-class"><pre><code>	1.props：
		(1).children props
		(2).render props
	2.消息订阅-发布：
		pubs-sub、event等等
	3.集中式管理：
		redux、dva等等
	4.conText:
		生产者-消费者模式
</code></pre></div><h4 id="比较好的搭配方式"><a href="#比较好的搭配方式" class="header-anchor">#</a> 比较好的搭配方式：</h4> <div class="language- extra-class"><pre><code>	父子组件：props
	兄弟组件：消息订阅-发布、集中式管理
	祖孙组件(跨级组件)：消息订阅-发布、集中式管理、conText(开发用的少，封装插件用的多)
</code></pre></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后修改时间: </span> <span class="time">3 天前</span></div></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/frontend/React.html#_1-react入门" class="sidebar-link reco-side-_1-react入门" data-v-70334359>1. React入门</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_1-1-react的基本使用" class="sidebar-link reco-side-_1-1-react的基本使用" data-v-70334359>1.1 React的基本使用</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_1-2-react-jsx" class="sidebar-link reco-side-_1-2-react-jsx" data-v-70334359>1.2 React Jsx</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_1-3-模块与组件、模块化与组件化" class="sidebar-link reco-side-_1-3-模块与组件、模块化与组件化" data-v-70334359>1.3 模块与组件、模块化与组件化</a></li><li class="level-2" data-v-70334359><a href="/frontend/React.html#_2-react面向组件开发" class="sidebar-link reco-side-_2-react面向组件开发" data-v-70334359>2. React面向组件开发</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_2-1-基本理解和使用" class="sidebar-link reco-side-_2-1-基本理解和使用" data-v-70334359>2.1 基本理解和使用</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_2-2-三大核心属性" class="sidebar-link reco-side-_2-2-三大核心属性" data-v-70334359>2.2 三大核心属性</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_2-3-收集表单数据" class="sidebar-link reco-side-_2-3-收集表单数据" data-v-70334359>2.3 收集表单数据</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_2-4-组件的生命周期" class="sidebar-link reco-side-_2-4-组件的生命周期" data-v-70334359>2.4 组件的生命周期</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_2-5-diffing算法" class="sidebar-link reco-side-_2-5-diffing算法" data-v-70334359>2.5 Diffing算法</a></li><li class="level-2" data-v-70334359><a href="/frontend/React.html#_3-react脚手架" class="sidebar-link reco-side-_3-react脚手架" data-v-70334359>3. React脚手架</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_3-1-react脚手架" class="sidebar-link reco-side-_3-1-react脚手架" data-v-70334359>3.1 react脚手架</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_3-2-创建项目并启动" class="sidebar-link reco-side-_3-2-创建项目并启动" data-v-70334359>3.2 创建项目并启动</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_3-3-react脚手架项目结构" class="sidebar-link reco-side-_3-3-react脚手架项目结构" data-v-70334359>3.3 react脚手架项目结构</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_3-4-功能界面的组件化编码流程" class="sidebar-link reco-side-_3-4-功能界面的组件化编码流程" data-v-70334359>3.4 功能界面的组件化编码流程</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_3-5-常用库" class="sidebar-link reco-side-_3-5-常用库" data-v-70334359>3.5 常用库</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_3-6-状态提升" class="sidebar-link reco-side-_3-6-状态提升" data-v-70334359>3.6 状态提升</a></li><li class="level-2" data-v-70334359><a href="/frontend/React.html#_4-react-ajax" class="sidebar-link reco-side-_4-react-ajax" data-v-70334359>4. React ajax</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_4-1-理解" class="sidebar-link reco-side-_4-1-理解" data-v-70334359>4.1 理解</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_4-2-axios" class="sidebar-link reco-side-_4-2-axios" data-v-70334359>4.2 axios</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_4-3-配置代理解决跨域" class="sidebar-link reco-side-_4-3-配置代理解决跨域" data-v-70334359>4.3 配置代理解决跨域</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_4-4-消息订阅-发布机制" class="sidebar-link reco-side-_4-4-消息订阅-发布机制" data-v-70334359>4.4 消息订阅-发布机制</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_4-5-fetch" class="sidebar-link reco-side-_4-5-fetch" data-v-70334359>4.5 fetch</a></li><li class="level-2" data-v-70334359><a href="/frontend/React.html#_5-react路由" class="sidebar-link reco-side-_5-react路由" data-v-70334359>5. React路由</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_5-1-相关理解" class="sidebar-link reco-side-_5-1-相关理解" data-v-70334359>5.1 相关理解</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_5-2-react-router-dom相关api" class="sidebar-link reco-side-_5-2-react-router-dom相关api" data-v-70334359>5.2 react-router-dom相关API</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_5-3-快速入门" class="sidebar-link reco-side-_5-3-快速入门" data-v-70334359>5.3 快速入门</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_5-4-路由组件的使用" class="sidebar-link reco-side-_5-4-路由组件的使用" data-v-70334359>5.4 路由组件的使用</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_5-5-二级路由和向路由组件传递参数" class="sidebar-link reco-side-_5-5-二级路由和向路由组件传递参数" data-v-70334359>5.5 二级路由和向路由组件传递参数</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_5-6-push与replace" class="sidebar-link reco-side-_5-6-push与replace" data-v-70334359>5.6 push与replace</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_5-7-编程式路由导航" class="sidebar-link reco-side-_5-7-编程式路由导航" data-v-70334359>5.7 编程式路由导航</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_5-8-history与hash" class="sidebar-link reco-side-_5-8-history与hash" data-v-70334359>5.8 history与hash</a></li><li class="level-2" data-v-70334359><a href="/frontend/React.html#_6-ant-design组件" class="sidebar-link reco-side-_6-ant-design组件" data-v-70334359>6. ant-design组件</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_6-1-基本使用" class="sidebar-link reco-side-_6-1-基本使用" data-v-70334359>6.1 基本使用</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_6-2-按需引入样式" class="sidebar-link reco-side-_6-2-按需引入样式" data-v-70334359>6.2 按需引入样式</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_6-3-自定义样式" class="sidebar-link reco-side-_6-3-自定义样式" data-v-70334359>6.3 自定义样式</a></li><li class="level-2" data-v-70334359><a href="/frontend/React.html#_7-redux" class="sidebar-link reco-side-_7-redux" data-v-70334359>7. redux</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_7-1-redux理解" class="sidebar-link reco-side-_7-1-redux理解" data-v-70334359>7.1 redux理解</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_7-2-redux的三个核心概念" class="sidebar-link reco-side-_7-2-redux的三个核心概念" data-v-70334359>7.2 redux的三个核心概念</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_7-3-基本使用" class="sidebar-link reco-side-_7-3-基本使用" data-v-70334359>7.3 基本使用</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_7-4-react-redux" class="sidebar-link reco-side-_7-4-react-redux" data-v-70334359>7.4 react-redux</a></li><li class="level-2" data-v-70334359><a href="/frontend/React.html#_8-项目打包" class="sidebar-link reco-side-_8-项目打包" data-v-70334359>8. 项目打包</a></li><li class="level-2" data-v-70334359><a href="/frontend/React.html#_9-react扩展" class="sidebar-link reco-side-_9-react扩展" data-v-70334359>9. react扩展</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_9-1-setstate" class="sidebar-link reco-side-_9-1-setstate" data-v-70334359>9.1 setState</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_9-2-lazyload" class="sidebar-link reco-side-_9-2-lazyload" data-v-70334359>9.2 lazyLoad</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_9-3-hooks" class="sidebar-link reco-side-_9-3-hooks" data-v-70334359>9.3 Hooks</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_9-4-fragment" class="sidebar-link reco-side-_9-4-fragment" data-v-70334359>9.4 Fragment</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_9-5-context" class="sidebar-link reco-side-_9-5-context" data-v-70334359>9.5 Context</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_9-6-组件优化" class="sidebar-link reco-side-_9-6-组件优化" data-v-70334359>9.6 组件优化</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_9-7-render-props" class="sidebar-link reco-side-_9-7-render-props" data-v-70334359>9.7 render props</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_9-8-错误边界" class="sidebar-link reco-side-_9-8-错误边界" data-v-70334359>9.8 错误边界</a></li><li class="level-3" data-v-70334359><a href="/frontend/React.html#_9-9-组件通信方式总结" class="sidebar-link reco-side-_9-9-组件通信方式总结" data-v-70334359>9.9 组件通信方式总结</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;left:50px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/assets/js/app.20b6ccbb.js" defer></script><script src="/assets/js/3.0bb47036.js" defer></script><script src="/assets/js/1.5a70b7c3.js" defer></script><script src="/assets/js/15.6a3aab66.js" defer></script>
  </body>
</html>
