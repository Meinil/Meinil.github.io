<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux | 薛定谔see猫</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <meta name="description" content="">
    <meta charset="UTF-8" version="1">
    <meta name="baidu-site-verification" content="code-E5pfjV93p5">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="Keywords" content="个人博客, 薛定谔see猫,程序员,java">
    
    <link rel="preload" href="/assets/css/0.styles.aea1a24b.css" as="style"><link rel="preload" href="/assets/js/app.3f084515.js" as="script"><link rel="preload" href="/assets/js/3.ef08ee50.js" as="script"><link rel="preload" href="/assets/js/1.86f97011.js" as="script"><link rel="preload" href="/assets/js/33.3cd91f11.js" as="script"><link rel="prefetch" href="/assets/js/10.1d1141b7.js"><link rel="prefetch" href="/assets/js/11.e2b18b14.js"><link rel="prefetch" href="/assets/js/12.800b5def.js"><link rel="prefetch" href="/assets/js/13.3996a241.js"><link rel="prefetch" href="/assets/js/14.3d03afaf.js"><link rel="prefetch" href="/assets/js/15.f5845652.js"><link rel="prefetch" href="/assets/js/16.85085f63.js"><link rel="prefetch" href="/assets/js/17.9d240430.js"><link rel="prefetch" href="/assets/js/18.78065420.js"><link rel="prefetch" href="/assets/js/19.f4a858db.js"><link rel="prefetch" href="/assets/js/20.1a2b089f.js"><link rel="prefetch" href="/assets/js/21.7b45b2cf.js"><link rel="prefetch" href="/assets/js/22.6ba947fb.js"><link rel="prefetch" href="/assets/js/23.03f49e49.js"><link rel="prefetch" href="/assets/js/24.5d798bea.js"><link rel="prefetch" href="/assets/js/25.d91eb5fc.js"><link rel="prefetch" href="/assets/js/26.a84f02a3.js"><link rel="prefetch" href="/assets/js/27.ced009f8.js"><link rel="prefetch" href="/assets/js/28.d3bc27ec.js"><link rel="prefetch" href="/assets/js/29.96c7bf22.js"><link rel="prefetch" href="/assets/js/30.8d9caeb3.js"><link rel="prefetch" href="/assets/js/31.6ec5fae8.js"><link rel="prefetch" href="/assets/js/32.0bae9088.js"><link rel="prefetch" href="/assets/js/34.7ce79048.js"><link rel="prefetch" href="/assets/js/35.20306965.js"><link rel="prefetch" href="/assets/js/36.fad02cd1.js"><link rel="prefetch" href="/assets/js/37.bb55dc97.js"><link rel="prefetch" href="/assets/js/4.e4abacbc.js"><link rel="prefetch" href="/assets/js/5.248a317b.js"><link rel="prefetch" href="/assets/js/6.ab70a287.js"><link rel="prefetch" href="/assets/js/7.5d305417.js"><link rel="prefetch" href="/assets/js/8.a6a82ee5.js"><link rel="prefetch" href="/assets/js/9.aa723625.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aea1a24b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>薛定谔see猫</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc></p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>薛定谔see猫</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.jpg" alt="薛定谔see猫" class="logo"> <span class="site-name">薛定谔see猫</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/assets/img/logo.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    薛定谔see猫
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>26</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>24</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6><li class="social-item" data-v-828910c6><i class="iconfont reco-github" style="color:#e15b64;" data-v-828910c6></i></li><li class="social-item" data-v-828910c6><i class="iconfont reco-bilibili" style="color:#3498db;" data-v-828910c6></i></li></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Linux</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>薛定谔see猫</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Linux</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>薛定谔see猫</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>2021/4/3</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>Linux</span></i></div></div> <div class="theme-reco-content content__default"><h3 id="linux-主要-目录结构"><a href="#linux-主要-目录结构" class="header-anchor">#</a> Linux(主要)目录结构</h3> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><ul><li><code>bin</code> （/usr/bin、/usr/local/bin）Binary的缩写，这个目录存放着最经常用的命令</li> <li><code>sbin</code> (/usr/sbin、/usr/local/sbin)  s是Super User的意思，这里存放的是系统管理员使用的系统管理程序。</li> <li><code>home</code> 存放普通用户的主目录，在linux中每个用户都有一个自己的目录，一般该目录的命名是以用户的账号命名的</li> <li><code>root</code>该目录为系统管理员，也称作超级权限者的用户主目录</li> <li><code>lib</code> 系统开机所需要最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库</li> <li><code>lost</code>、<code>found</code> 这个目录一般是空的，当系统非法关机时，这里就存放了一些文件</li> <li><code>etc</code>所有的系统管理所需要的配置文件和子目录</li> <li><code>usr</code>这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于windows下的program  files目录</li> <li><code>boot</code> 存放的是启动linux时使用的一些核心文件，包括一些连接文件以及镜像文件</li> <li><code>proc</code> 这是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息</li> <li><code>srv</code> service的缩写，该目录存放一些服务启动后需要提取的数据</li> <li><code>sys</code> 该目录安装了linux2.6内核出现的一个文件系统sysfs</li> <li><code>dev</code> 类似于windows的设备管理器，把所有的硬件用文件的形式存储</li> <li><code>media</code> linux系统会自动识别一些外部设备，识别过后，linux会把识别的设备挂载到这个目录下</li> <li><code>mnt</code> 系统提供改目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂载在/mnt/上，然后进入该目录就可以查看里面的内容了</li> <li><code>opt</code> 这是给主机额外安装软件所摆放的目录。如安装ORACLE就可放到该目录下</li> <li><code>/usr/local</code> 这是另一个给主机额外安装软件所安装的目录。一般通过编译源码的方式安装程序。</li> <li><code>var</code> 这个目录中存放着不断扩充着的东西，习惯将经常被修改的目录放在这个目录下。包括各种日志文件</li> <li><code>selinux</code> SELinux是一种安全系统，它能控制程序只能访问特定的文件</li></ul> <h3 id="vi和vim的基本使用"><a href="#vi和vim的基本使用" class="header-anchor">#</a> vi和vim的基本使用</h3> <p>所有的linux系统都会内置vi文本编辑器，而vim是vi的增强版，包含代码补全，高亮，编译等功能。</p> <h4 id="vi和vim的三种模式"><a href="#vi和vim的三种模式" class="header-anchor">#</a> vi和vim的三种模式</h4> <ol><li><p>正常模式：使用vi/vim打开一个文件就进入了正常模式，这个模式中可以使用各种快捷键</p> <p>常用命令</p> <div class="language- extra-class"><pre class="language-text"><code>yy 复制当前行 
p 粘贴当前剪切板的内容到当前行
5yy 复制当前行开始的以下5行
dd 删除当前行
5dd 删除当前行开始的以下5行
/hello 查找hello字符 需按回车
n 查找当前已经被查找的字符的下一个 
G 去文本末尾
gg 去文本开头
u 撤销
5 + shift + g 去第五行
</code></pre></div></li> <li><p>插入模式/编辑模式：在这个模式下可以编辑文本文件，使用i、o、a、r(不区分大小写)等任何一个按键均可进入编辑模式</p></li> <li><p>命令行模式：在正常模式下输入<code>:</code>即可进入命令行模式，此模式下可以使用各种内置的指令来完成读取，保存，退出、显示行号等。</p> <p>常用命令</p> <div class="language- extra-class"><pre class="language-text"><code>:w 写入
:q 退出
:q! 强制退出
:set nu 设置行号
:set nonu 取消行号
</code></pre></div></li> <li><p>在插入模式和命令行模式均可使用<code>ESC</code>进入到正常模式</p></li></ol> <h3 id="linux关机-重启"><a href="#linux关机-重启" class="header-anchor">#</a> linux关机，重启</h3> <ul><li><p><code>shutdown</code></p> <div class="language- extra-class"><pre class="language-text"><code>shutdown -h now 立即关机

shutdown -h 1 一分钟后关机

shutdown -r now 立即重启
</code></pre></div></li> <li><p><code>halt</code></p> <div class="language- extra-class"><pre class="language-text"><code>halt 立即关机
</code></pre></div></li> <li><p><code>reboot</code></p> <div class="language- extra-class"><pre class="language-text"><code>reboot 立即重启
</code></pre></div></li> <li><p><code>sync</code></p> <div class="language- extra-class"><pre class="language-text"><code>sync 把内存的数据同步到磁盘
</code></pre></div></li> <li><p><code>logout</code></p> <div class="language- extra-class"><pre class="language-text"><code>logout 注销

图形界面下无效
</code></pre></div></li></ul> <h3 id="用户管理"><a href="#用户管理" class="header-anchor">#</a> 用户管理</h3> <p>linux是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统</p> <p>linux的用户需要至少要属于一个组</p> <h4 id="添加用户"><a href="#添加用户" class="header-anchor">#</a> 添加用户</h4> <div class="language- extra-class"><pre class="language-text"><code>useradd [options] 用户名

当用户创建成功后，会自动的创建和用户名同名的home目录
也可以通过
useradd -d 指定目录 用户名 
指定home目录

useradd -g 用户组 用户名
</code></pre></div><h4 id="更改用户密码"><a href="#更改用户密码" class="header-anchor">#</a> 更改用户密码</h4> <div class="language- extra-class"><pre class="language-text"><code>passwd 用户名
</code></pre></div><h4 id="删除用户"><a href="#删除用户" class="header-anchor">#</a> 删除用户</h4> <div class="language- extra-class"><pre class="language-text"><code>userdel 用户名

保留/home目录

userdel -r 用户名
不保留/home目录
</code></pre></div><h4 id="查询用户信息"><a href="#查询用户信息" class="header-anchor">#</a> 查询用户信息</h4> <div class="language- extra-class"><pre class="language-text"><code>id 用户名
</code></pre></div><h4 id="切换用户"><a href="#切换用户" class="header-anchor">#</a> 切换用户</h4> <div class="language- extra-class"><pre class="language-text"><code>su - 用户名

权限低的用户切换到权限高的用户时需要密码
当需要返回原来的用户时可使用exit命令
</code></pre></div><h4 id="用户组"><a href="#用户组" class="header-anchor">#</a> 用户组</h4> <p>类似于角色，系统可以对有共性的多个用户进行统一的管理</p> <p>创建组</p> <div class="language- extra-class"><pre class="language-text"><code>groupadd 组名
</code></pre></div><p>删除组</p> <div class="language- extra-class"><pre class="language-text"><code>groupdel 组名
</code></pre></div><p>修改用户归属的组</p> <div class="language- extra-class"><pre class="language-text"><code>usermod -g 用户组 用户名
</code></pre></div><p>用户信息的配置文件放在<code>/etc/passwd</code>文件中</p> <ul><li><p>用户名:口令:用户标识号:组标识号:注释性描述:主目录:登陆Shell</p> <div class="language- extra-class"><pre class="language-text"><code>root:x:0:0:root:/root:/bin/bash
</code></pre></div></li></ul> <p>组的配置文件放在<code>/etc/group</code>文件中</p> <ul><li><p>组名:口令:组标识号:组内用户列表</p> <div class="language- extra-class"><pre class="language-text"><code>root:x:0:
</code></pre></div></li></ul> <p>口令配置文件(密码和登陆信息，加密)<code>/etc/shadow</code></p> <ul><li><p>登陆名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标签</p> <div class="language- extra-class"><pre class="language-text"><code>root:$6$MSxoKOkJeNBEq4WQ$yGQUQv.eSUDgJb4iPu0EOJUFY5VYIe2BDV9ZPIViWxVYjoTFjXl0L/ayhNOVVm2JWx05m7T/gfNBfGgy9Ic/W/::0:99999:7:::
</code></pre></div></li></ul> <h3 id="linux基础指令"><a href="#linux基础指令" class="header-anchor">#</a> linux基础指令</h3> <h4 id="指定运行级别"><a href="#指定运行级别" class="header-anchor">#</a> 指定运行级别</h4> <ul><li><code>0</code>关机</li> <li><code>1</code>单用户，找回丢失的用户密码</li> <li><code>2</code>多用户无网络服务</li> <li><code>3</code>多用户有网络服务</li> <li><code>4</code>保留</li> <li><code>5</code>图形界面</li> <li><code>6</code>重启</li></ul> <p>切换到指定运行级别的指令</p> <div class="language- extra-class"><pre class="language-text"><code>init 级别
</code></pre></div><p>查看当前运行级别</p> <div class="language- extra-class"><pre class="language-text"><code>who -r
</code></pre></div><p>系统的运行级别配置文件在<code>/etc/inittab</code></p> <p>找回密码</p> <p>进入到单用户模式，然后修改用户密码。进入单用户模式不需要密码</p> <h4 id="帮助指令"><a href="#帮助指令" class="header-anchor">#</a> 帮助指令</h4> <ul><li><p><code>man</code></p> <div class="language- extra-class"><pre class="language-text"><code>man [命令或配置文件] 
</code></pre></div></li> <li><p><code>help</code></p> <div class="language- extra-class"><pre class="language-text"><code>help [命令]
</code></pre></div></li></ul> <h4 id="文件目录类"><a href="#文件目录类" class="header-anchor">#</a> 文件目录类</h4> <ul><li><p>显示当前工作目录的绝对路径</p> <div class="language- extra-class"><pre class="language-text"><code>pwd
</code></pre></div></li> <li><p>查看当前目录的结构</p> <div class="language- extra-class"><pre class="language-text"><code>ls [options] [目录或是文件]

-a 显示当前目录所有的文件和目录，包括隐藏的
-l 以列表的形式显示信息
</code></pre></div></li> <li><p>切换目录</p> <div class="language- extra-class"><pre class="language-text"><code>cd [参数]

cd ~ 或 cd : 回到home目录
cd.. 回到当前目录的上一级目录 centos8不能使用
</code></pre></div></li> <li><p>创建目录</p> <div class="language- extra-class"><pre class="language-text"><code>mkdir [options] 要创建的目录

-p 创建多级目录
</code></pre></div></li> <li><p>删除目录</p> <div class="language- extra-class"><pre class="language-text"><code>rmdir [options] 要删除的空目录

只能删除空目录
-rf 删除非空目录
</code></pre></div></li> <li><p>创建文件</p> <div class="language- extra-class"><pre class="language-text"><code>touch 文件名称

可以一次创建多个文件
</code></pre></div></li> <li><p>拷贝</p> <div class="language- extra-class"><pre class="language-text"><code>cp [options] 源目录 目标目录

-r 递归复制整个目录

\cp [options] 源目录 目标目录
强制覆盖
</code></pre></div></li> <li><p>删除指令</p> <div class="language- extra-class"><pre class="language-text"><code>rm [options] 要删除的目录或文件

-r 递归删除整个文件夹
-f 强制删除不提示
</code></pre></div></li> <li><p>移动或重命名指令</p> <div class="language- extra-class"><pre class="language-text"><code>mv oldfilename newfilename

mv 源目录 目标目录 
</code></pre></div></li> <li><p>查看文件内容</p> <div class="language- extra-class"><pre class="language-text"><code>cat [options] 文件名

-n 显示行号
cat [options] 文件名 | more
文件分页显示
cat 只能浏览不能修改
</code></pre></div></li> <li><p>按页显示文章的内容</p> <div class="language- extra-class"><pre class="language-text"><code>more 文件名
</code></pre></div><table><thead><tr><th>操作</th> <th>功能说明</th></tr></thead> <tbody><tr><td>空格键</td> <td>下一页</td></tr> <tr><td>Enter</td> <td>下一行</td></tr> <tr><td>q</td> <td>离开more，不再显示文件内容</td></tr> <tr><td>Ctrl+F</td> <td>向下滚动一屏</td></tr> <tr><td>Ctrl+B</td> <td>返回上一屏</td></tr> <tr><td>=</td> <td>输出当前的行号</td></tr> <tr><td>:f</td> <td>输出文件名和当前行的行号</td></tr></tbody></table> <div class="language- extra-class"><pre class="language-text"><code>less 文件名
功能类似于more，less指令在显示文件时，并不是一次将整个文件加载之后才显示，而是根据显示需要按需加载
</code></pre></div></li> <li><p>输出重定向和追加</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; 重定向
&gt;&gt; 追加

ls -l &gt; 文件名 列表内容写入到文件中
ls -al &gt;&gt; 文件名 列表的内容追加到文件的末尾
cat 文件1 &gt; 文件2 文件1的内容覆盖文件2的内容
echo &quot;内容&quot; &gt;&gt; 文件名 
</code></pre></div></li> <li><p>输出内容到控制台</p> <div class="language- extra-class"><pre class="language-text"><code>echo [options] [输出内容]

echo $PATH 输出当前环境变量
</code></pre></div></li> <li><p>显示文件开头的部分，默认前十行</p> <div class="language- extra-class"><pre class="language-text"><code>head 文件      查看文件的前十行
head -n 5 文件 查看文件的前5行
</code></pre></div></li> <li><p>显示文件结尾的部分，默认末尾十行</p> <div class="language- extra-class"><pre class="language-text"><code>tail 文件         查看文件后十行的内容
tail -n 5 文件名  查看文件后5行的内容
tail -f 文件 		实时追踪该文档的所有更新
</code></pre></div></li> <li><p>软链接或者符号链接，类似于windows里的快捷方式，主要存放了链接其他文件的路径</p> <div class="language- extra-class"><pre class="language-text"><code>ln -s [源文件目录] [软链接名]
</code></pre></div></li> <li><p>删除软链接</p> <div class="language- extra-class"><pre class="language-text"><code>rm -rf 软链接的名称
</code></pre></div></li> <li><p>查看执行历史指令</p> <div class="language- extra-class"><pre class="language-text"><code>history    显示所有执行过的指令
history 10 显示后十条
!10  		执行历史记录中第十条指令
</code></pre></div></li></ul> <h4 id="时间日期类"><a href="#时间日期类" class="header-anchor">#</a> 时间日期类</h4> <ul><li><p>显示当前日期</p> <div class="language- extra-class"><pre class="language-text"><code>date 		显示当前时间
date +%Y    显示当前年份
date +%m  	显示当前月份
date +%d    显示当前月份的哪一天
date +&quot;%Y-%m-%d %H:%M:%S&quot;  日期格式化
</code></pre></div></li> <li><p>设置日期</p> <div class="language- extra-class"><pre class="language-text"><code>date -s 字符串时间
</code></pre></div></li> <li><p>查看日历</p> <div class="language- extra-class"><pre class="language-text"><code>cal [options]

cal 	 显示当前月份的日历
cal 2020 显示2020一整年的日历
</code></pre></div></li></ul> <h4 id="搜索查找类"><a href="#搜索查找类" class="header-anchor">#</a> 搜索查找类</h4> <ul><li><p><code>find</code></p> <div class="language- extra-class"><pre class="language-text"><code>find [搜索范围] [options]

-name&lt;查询方式&gt;  按照指定的文件名查找模式查找文件
find / -name *.txt 查找根目录下所有以.txt结尾的文件

-user&lt;用户名&gt;	  查找属于指定用户名所有文件


-size&lt;大小&gt;	   按照指定文件大小查找文件
-size +20M 大于20M
-size -20M 小于20M
-size 20M  等于20M
</code></pre></div></li> <li><p><code>locate</code> 基于locate文件数据库查找文件，使用之前如果没有locate文件数据库则需要先创建</p> <div class="language- extra-class"><pre class="language-text"><code>updatedb	创建或者更新locate文件数据库

lcoate test.txt  查找test.txt文件
</code></pre></div></li> <li><p>过滤查找，通过<code>grep</code>和<code>|</code>搭配使用</p> <div class="language- extra-class"><pre class="language-text"><code>|	表示将前一个命令的处理结果输出传递给后面的命令处理
grep [options] 查找内容 源文件

-n 显示匹配行及行号
-i 忽略字母大小写

cat test.txt  | grep yes 	查找yes
cat test.txt  | grep -n yes 显示行号
cat test.txt  | grep -ni yes 显示行号且不区分大小写
</code></pre></div></li></ul> <h4 id="压缩和解压缩"><a href="#压缩和解压缩" class="header-anchor">#</a> 压缩和解压缩</h4> <ul><li><p><code>gzip/gunzip</code></p> <div class="language- extra-class"><pre class="language-text"><code>gzip 文件  将文件压缩为*.gz文件且删除源文件
gunzip *.gz 将文件解压
</code></pre></div></li> <li><p><code>zip/unzip</code></p> <div class="language- extra-class"><pre class="language-text"><code>zip [options] xxx.zip 源文件	 将源文件压缩成xxx.zip
-r 对目录下所有文件压缩

unzip [options] xxx.zip        解压
-d 指定解压目录
</code></pre></div></li> <li><p><code>tar</code></p> <div class="language- extra-class"><pre class="language-text"><code>tar [options] xxx.tar.gz

ar -zcvf mytest.tar.gz /test/ 	打包压缩test文件下的所有文件
tar -zxvf mytest.tar.gz -C /test/hello/  解压到指定目录
</code></pre></div><table><thead><tr><th>options</th> <th>功能</th></tr></thead> <tbody><tr><td>-c</td> <td>产生.tar打包文件</td></tr> <tr><td>-v</td> <td>显示详细信息</td></tr> <tr><td>-f</td> <td>指定压缩后的文件名</td></tr> <tr><td>-z</td> <td>打包同时压缩</td></tr> <tr><td>-x</td> <td>解包.tar文件</td></tr></tbody></table></li></ul> <h3 id="组管理和权限管理"><a href="#组管理和权限管理" class="header-anchor">#</a> 组管理和权限管理</h3> <h4 id="linux组的基本介绍"><a href="#linux组的基本介绍" class="header-anchor">#</a> Linux组的基本介绍</h4> <p>在linux中的每个用户必须属于一个组，不能独立于组外。linux中每个文件有所有者、所在组、其他组的概念</p> <ul><li>所有者</li> <li>所在组</li> <li>其他组</li></ul> <h4 id="文件-目录"><a href="#文件-目录" class="header-anchor">#</a> 文件/目录</h4> <ul><li><p>所有者：一般为文件的创建者，谁创建了该文件，就自然的成为该文件的所有者。</p></li> <li><p>查看文件的所有者</p> <div class="language- extra-class"><pre class="language-text"><code>ls -ahl
</code></pre></div></li> <li><p>修改文件/目录的所有者</p> <div class="language- extra-class"><pre class="language-text"><code>chown 用户名 文件名

chown -R 用户名 目录
改变目录下的所有文件/目录的拥有者
</code></pre></div></li> <li><p>修改文件所在组</p> <div class="language- extra-class"><pre class="language-text"><code>chgrp 组名 文件名

chgrp -R 用户名 目录
改变目录下的所有文件/目录的所在组
</code></pre></div></li></ul> <h4 id="文件权限管理"><a href="#文件权限管理" class="header-anchor">#</a> 文件权限管理</h4> <ul><li><p>文件详情</p> <div class="language- extra-class"><pre class="language-text"><code>-rw-r--r--. 1 root root 0 5月   2 07:37 test.txt

-
文件类型

- 普通文件
d 文件目录
l 软链接文件
c 字符设备[键盘，鼠标]
b 块文件[硬盘]

rw-
文件所有者的权限
r 读
w 写

r--
文件所在组的用户的权限
r 读

r--
文件的其他组的用户的权限
r 读

1
文件表示硬链接，目录则表示该目录的子目录的个数

root 文件的所有者

root 文件的所在组

0 文件的大小/目录则是4096

5月   2 07:37
文件最后的修改时间
</code></pre></div></li> <li><p><code>rwx</code> 权限</p> <p>作用到文件</p> <div class="language- extra-class"><pre class="language-text"><code>r 可读
w 可写，不一定可删除，删除一个文件的前提条件是对该文件所在目录有写的权限
x 可执行
</code></pre></div><p>作用到目录</p> <div class="language- extra-class"><pre class="language-text"><code>r 可以查看目录内容
w 可修改，目录内创建、删除、重名名
x 可以进入该目录
</code></pre></div><p>可用数字来表示</p> <div class="language- extra-class"><pre class="language-text"><code>r=4，w=2，x=1
</code></pre></div></li> <li><p>修改文件/目录权限</p> <p><code>+</code>、<code>-</code>、<code>=</code>变更权限 <code>u</code>所有者、<code>g</code>所在组、<code>o</code>其他人、<code>a</code>所有人</p> <div class="language- extra-class"><pre class="language-text"><code>chmod u=rwx,g=rx,o=x 文件目录名 
chmod o+w 文件目录名              其他人添加写的权限
chmod a-x 文件目录名				 所有人去除可执行/进入的权限
</code></pre></div><p>通过数字变更权限</p> <div class="language- extra-class"><pre class="language-text"><code>chmod 751 文件目录名
</code></pre></div></li></ul> <h3 id="任务调度"><a href="#任务调度" class="header-anchor">#</a> 任务调度</h3> <p>指系统在某个时间⏰执行特定的命令或程序</p> <p>简单的任务可直接在crontab中直接加入即可，复杂的任务需要写<code>shell</code>脚本处理</p> <ul><li><p><code>crond</code></p> <div class="language- extra-class"><pre class="language-text"><code>crontab [options]  
</code></pre></div><table><thead><tr><th>options</th> <th>功能</th></tr></thead> <tbody><tr><td>-e</td> <td>编辑crontab定时任务</td></tr> <tr><td>-l</td> <td>查询crontab定时任务</td></tr> <tr><td>-r</td> <td>删除当前用户所有的crontab任务</td></tr></tbody></table> <p>案例：</p> <p>每小时的每一分钟执行 <code>ls -l /etc/ &gt;&gt; /tmp/ok.txt</code></p> <p>调度文件</p> <div class="language- extra-class"><pre class="language-text"><code>*/1 * * * * ls -l /etc &gt;&gt; /tmp/to.txt
</code></pre></div><p>占位符</p> <table><thead><tr><th>项目</th> <th>含义</th> <th>范围</th></tr></thead> <tbody><tr><td>第一个 *</td> <td>一小时当中的第几分钟</td> <td>0-59</td></tr> <tr><td>第二个 *</td> <td>一天中的第几个小时</td> <td>0-23</td></tr> <tr><td>第三个 *</td> <td>一个月中的第几天</td> <td>1-31</td></tr> <tr><td>第四个 *</td> <td>一年当中的第几个月</td> <td>1-12</td></tr> <tr><td>第五个 *</td> <td>一周当中的星期几</td> <td>0-7(0/7都代表星期日)</td></tr></tbody></table> <p>特殊符号</p> <table><thead><tr><th>特殊符号</th> <th>含义</th></tr></thead> <tbody><tr><td>*</td> <td>代表任何时间。比如第一个*就代表一小时每分钟都执行一次</td></tr> <tr><td>,</td> <td>代表不连续的时间。比如“0 8,12,16 * * * 命令” 就代表在每天的8点0分，12点0分，16点0分都执行一次</td></tr> <tr><td>-</td> <td>代表连续的时间范围。比如&quot;0 5 * * 1-6 命令&quot;，代表在周一到周六的凌晨5点零分执行命令</td></tr> <tr><td>*/n</td> <td>代表每隔多久执行一次。比如&quot;*/10 * * * * 命令&quot;，代表每隔十分钟就执行一次命令</td></tr></tbody></table></li> <li><p>简单<code>shell</code>脚本的编写</p> <p>新建一个<code>*.sh</code>文件</p> <p>编写指令<code>date &gt;&gt; /tmp/mydate</code></p> <p><code>*.sh</code>赋予可执行的权限</p> <p><code>crontab -e</code></p> <div class="language- extra-class"><pre class="language-text"><code>*/1 * * * * *.sh
</code></pre></div></li></ul> <h3 id="磁盘分区、挂载"><a href="#磁盘分区、挂载" class="header-anchor">#</a> 磁盘分区、挂载</h3> <h4 id="分区的基础知识"><a href="#分区的基础知识" class="header-anchor">#</a> 分区的基础知识</h4> <ul><li><p><code>mbr</code>分区</p> <p>最多支持四个主分区</p> <p>系统只能安装在主分区</p> <p>扩展分区要占一个主分区</p> <p><code>mbr</code>最大支持2TB，但拥有好的兼容性</p></li> <li><p><code>gtp</code>分区</p> <p>支持无限多个主分区</p> <p>最大支持18EB的容量，操作系统会限制分区数量，windows最多128个分区</p> <p>win7 64位以后支持gtp</p></li></ul> <h4 id="linux分区原理"><a href="#linux分区原理" class="header-anchor">#</a> Linux分区原理</h4> <p>Linux来说无论有几个分区，分给哪一目录使用，它归根结底就只有一个根目录，一个独立且唯一的文件结构，Linux中每个分区都是用来组成整个文件系统的一部分</p> <p>Linux采用了一种&quot;载入&quot;的处理方法，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录联系起来。这是要载入的一个分区使它的存储空间在一个目录下获得</p> <h4 id="linux硬盘"><a href="#linux硬盘" class="header-anchor">#</a> Linux硬盘</h4> <p>Linux硬盘分<code>IDE</code>硬盘和<code>SCSI</code>硬盘，目前基本上都是<code>SCSI</code>硬盘</p> <p>对于IDE硬盘，驱动器标识符位<code>hdx~</code>其中<code>hd</code>表明分区所在设备的类型，这里是指<code>IDE</code>硬盘。<code>x</code>为盘号(<code>a</code>为基本盘、<code>b</code>为基本从属盘、<code>c</code>为辅助主盘、<code>d</code>为辅助从属盘)，<code>~</code>代表分区，前四个分区用数字1到4标识，他们是主分区或扩展分区，从5开始就是逻辑分区。<code>hda3</code>标识为第一个<code>IDE</code>硬盘上的第三个主分区或扩展分区，<code>hdb2</code>表示为第二个<code>IDE</code>硬盘上的第二个主分区或扩展分区。</p> <p>对于<code>SCSI</code>硬盘则标识为<code>sdx~</code>，<code>SSCI</code>硬盘是用<code>sd</code>来表示分区所在设备的类型的，其余则和<code>IDE</code>硬盘的表示方法一样。</p> <div class="language- extra-class"><pre class="language-text"><code>lsblk -f 		查看磁盘分区和挂载情况
</code></pre></div><h4 id="增加一块硬盘"><a href="#增加一块硬盘" class="header-anchor">#</a> 增加一块硬盘</h4> <ol><li><p>虚拟机添加硬盘</p></li> <li><p>分区 <code>fdisk /dev/sdb</code></p></li> <li><p>格式化 <code>mkfs -t ext4 /dev/sdb1</code></p></li> <li><p>挂载 <code>mount /dev/sdb1 /home/newdisk</code> 设备重启后挂载关系会丢失</p></li> <li><p>设置自动挂载</p> <p>编辑 <code>etc/fstab</code>添加</p> <div class="language- extra-class"><pre class="language-text"><code>/dev/sdb1               /home/newdisk           ext4    defaults        0 0
</code></pre></div><p>退回终端执行</p> <div class="language- extra-class"><pre class="language-text"><code>mount -a
</code></pre></div></li> <li><p>卸载磁盘</p> <div class="language- extra-class"><pre class="language-text"><code>umount /home/newdisk
</code></pre></div></li></ol> <h4 id="磁盘情况查询"><a href="#磁盘情况查询" class="header-anchor">#</a> 磁盘情况查询</h4> <ul><li><p>查询系统磁盘整体使用情况</p> <div class="language- extra-class"><pre class="language-text"><code>df -lh
</code></pre></div></li> <li><p>查询指定目录的磁盘占用情况</p> <div class="language- extra-class"><pre class="language-text"><code>du -h /目录

-s 指定目录占用大小汇总
-h 带计量单位
-a 含文件
--max-depth=1 目录深度
-c 列出明细的同时，增加汇总值
</code></pre></div></li></ul> <h4 id="实用指令"><a href="#实用指令" class="header-anchor">#</a> 实用指令</h4> <ul><li><p>统计 /home文件夹下文件的个数</p> <div class="language- extra-class"><pre class="language-text"><code>ls -l /home | grep &quot;^-&quot; | wc -l
</code></pre></div></li> <li><p>统计 /home文件夹下目录的个数</p> <div class="language- extra-class"><pre class="language-text"><code>ls -l /home | grep &quot;^d&quot; | wc -l
</code></pre></div></li> <li><p>统计 /home文件夹下文件的个数，包括子文件夹里的</p> <div class="language- extra-class"><pre class="language-text"><code>ls -lR /home | grep &quot;^-&quot; | wc -l
</code></pre></div></li> <li><p>统计 /home文件夹下目录的个数，包括子文件夹里的</p> <div class="language- extra-class"><pre class="language-text"><code>ls -lR /home | grep &quot;^d&quot; | wc -l
</code></pre></div></li> <li><p>树状显示目录结构</p> <div class="language- extra-class"><pre class="language-text"><code>tree

如果没有此指令使用
yum install tree 安装即可
</code></pre></div></li></ul> <h3 id="linux网络配置"><a href="#linux网络配置" class="header-anchor">#</a> Linux网络配置</h3> <ol><li><p>通过界面自动获取ip，缺点是每次获取的ip可能会不一样</p></li> <li><p>指定固定的ip，直接修改配置文件指定固定ip</p> <div class="language- extra-class"><pre class="language-text"><code>/etc/sysconfig/network-scripts/ifcfg-eth0
</code></pre></div><p><code>centos8</code>文件名为<code>ifcfg-配置_1</code></p> <div class="language- extra-class"><pre class="language-text"><code>TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=dhcp   //改为static
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=$'\751\605\615\747\675\656 1'
UUID=1555224a-2a47-4de0-a0fe-4194449092de
ONBOOT=yes    //yes

// 新增
IPADDR=192.168.44.33   //ip
GATEWAY=192.168.44.2   //网关
DNS1=192.168.44.2		//保持和网关一致
</code></pre></div><p>修改后重启机器</p></li></ol> <h3 id="linux进程管理"><a href="#linux进程管理" class="header-anchor">#</a> Linux进程管理</h3> <h4 id="基本介绍"><a href="#基本介绍" class="header-anchor">#</a> 基本介绍</h4> <ol><li>在Linux中，每个执行的程序(代码)都称为一个进程。每一个进程都分配一个ID号</li> <li>每一个进程，都会对应一个父进程，而这个父进程可以复制多个子进程。例如www服务器</li> <li>每个进程都可能以两种方式存在。<strong>前台</strong>与<strong>后台</strong>，所谓前台进程就是用户目前的屏幕上可以进行操作的。后台进程则是实际在操作，但由于屏幕上无法看到的进程，通常使用后台的方式执行，后台进程又叫做<strong>守护进程</strong></li> <li>一般系统的服务都是以后台进程的方式存在，而且都会常驻在系统中。直到关机才结束</li></ol> <h4 id="查看系统进程"><a href="#查看系统进程" class="header-anchor">#</a> 查看系统进程</h4> <div class="language- extra-class"><pre class="language-text"><code>ps [options]

-a 显示当前终端的所有进程信息
-u 以用户的格式显示进程信息
-x 显示后台进程运行的参数
-ef 显示父进程

pstree 以树状的方式查看进程
</code></pre></div><p>ps命令显示的信息</p> <table><thead><tr><th>字段</th> <th>说明</th></tr></thead> <tbody><tr><td>USER</td> <td>执行进程的用户</td></tr> <tr><td>PID</td> <td>进程识别号</td></tr> <tr><td>PPID</td> <td>当前进程的父进程的进程号</td></tr> <tr><td>%CPU</td> <td>当前进程占用CPU的情况</td></tr> <tr><td>%MEM</td> <td>当前进程占用内存的情况</td></tr> <tr><td>VSZ</td> <td>当前进程占用的虚拟内存情况</td></tr> <tr><td>RSS</td> <td>当前进程占用物理内存的情况</td></tr> <tr><td>TTY</td> <td>当前进程使用的终端</td></tr> <tr><td>STAT</td> <td>当前进程的状态  S 休眠 R运行 D短期等待 Z僵尸进程</td></tr> <tr><td>START</td> <td>当前进程的启动时间</td></tr> <tr><td>TIME</td> <td>此进程所消CPU总时间</td></tr> <tr><td>COMMAND</td> <td>调用此进程时的命令和参数</td></tr></tbody></table> <h4 id="终止进程"><a href="#终止进程" class="header-anchor">#</a> 终止进程</h4> <ul><li><p>通过进程号杀死进程</p> <div class="language- extra-class"><pre class="language-text"><code>kill [options] 进程号

-9 强迫进程立即停止
</code></pre></div></li> <li><p>通过进程名称杀死进程，支持通配符</p> <div class="language- extra-class"><pre class="language-text"><code>killall 进程名称
</code></pre></div></li></ul> <h4 id="服务管理"><a href="#服务管理" class="header-anchor">#</a> 服务管理</h4> <ul><li><p>systemctl [start|stop|restart|reload|status] 服务名</p> <p>开启防火墙</p> <div class="language- extra-class"><pre class="language-text"><code>systemctl start firewalld
</code></pre></div><p>查看防火墙状态</p> <div class="language- extra-class"><pre class="language-text"><code>systemctl status firewalld
</code></pre></div><p>关闭防火墙</p> <div class="language- extra-class"><pre class="language-text"><code>systemctl stop firewalld
</code></pre></div><p>windows下查看哪个端口是否开放</p> <div class="language- extra-class"><pre class="language-text"><code>telnet ip 端口号
</code></pre></div><p>列出所有服务</p> <div class="language- extra-class"><pre class="language-text"><code>systemctl list-unit-files
</code></pre></div></li> <li><p>服务的运行级别和开机的运行级别相同 <code>centos6</code></p> <p><code>chkconfig</code>可以给每个服务的各个运行级别设置自启动/关闭</p> <p>查看服务</p> <div class="language- extra-class"><pre class="language-text"><code>chkconfig --list
</code></pre></div><p>查看某个服务</p> <div class="language- extra-class"><pre class="language-text"><code>chkconfig 服务名 --list
</code></pre></div><p>设置运行级别</p> <div class="language- extra-class"><pre class="language-text"><code>chkconfig --level 5 服务名 on/off
</code></pre></div></li></ul> <h4 id="监控指令"><a href="#监控指令" class="header-anchor">#</a> 监控指令</h4> <ul><li><p>动态监控进程</p> <p><code>top</code>与<code>ps</code>相似，它们都用来显示正在执行的进程。top与ps最大的不同之处，在于top在执行一段时间后可以更新正在运行的进程</p> <div class="language- extra-class"><pre class="language-text"><code>top [options]
</code></pre></div><table><thead><tr><th>options</th> <th>功能</th></tr></thead> <tbody><tr><td>-d 秒数</td> <td>指定top指令每个几秒更新，默认是3秒在top命令的交互模式当中可以执行的命令</td></tr> <tr><td>-i</td> <td>使top命令不显示任何闲置或僵死的进程</td></tr> <tr><td>-p</td> <td>通过指定监控进程ID来仅仅监控某个进程的状态</td></tr></tbody></table> <p>交互操作</p> <table><thead><tr><th>操作</th> <th>功能</th></tr></thead> <tbody><tr><td>P</td> <td>以CPU使用率排序</td></tr> <tr><td>M</td> <td>以内存的使用率排序</td></tr> <tr><td>N</td> <td>以PID排序</td></tr> <tr><td>q</td> <td>退出top</td></tr> <tr><td>U</td> <td>指定用户名的进程</td></tr> <tr><td>K</td> <td>kill指定进程ID的进程</td></tr></tbody></table></li> <li><p>查看网络情况</p> <div class="language- extra-class"><pre class="language-text"><code>netstat [options]

-an 按一定顺序排序列出
-p 显示哪个进程在调用
</code></pre></div></li></ul> <h3 id="rpm和yum包管理"><a href="#rpm和yum包管理" class="header-anchor">#</a> RPM和YUM包管理</h3> <ul><li><p><code>rpm</code>一种用于互联网下载包的打包及安装工具，它包含在某些Linux发行版中。它生成具有<code>.RPM</code>扩展名的文件。<code>RPM</code>是RedHat Package Manager的缩写。</p> <p><code>rpm</code> 查询指令</p> <div class="language- extra-class"><pre class="language-text"><code>rpm -qa | gerp XX
</code></pre></div><p>查询结果</p> <div class="language- extra-class"><pre class="language-text"><code>firefox-60.5.1-1.el8.x86_64

firefox 软件名称
60.5.1-1  软件版本
el8.x86_64 适用操作系统，表示centos8.X的64位系统
如果是i686、i386表示32位系统、noarch表示通用
</code></pre></div><p>查询软件包的具体信息</p> <div class="language- extra-class"><pre class="language-text"><code>rpm -qi XX
</code></pre></div><p>查询软件包的安装位置</p> <div class="language- extra-class"><pre class="language-text"><code>rpm -ql XX
</code></pre></div><p>查询某一个目录/文件是属于哪个软件包的</p> <div class="language- extra-class"><pre class="language-text"><code>rpm -qf 文件/目录路径
</code></pre></div><p>卸载rpm包</p> <div class="language- extra-class"><pre class="language-text"><code>rpm -e rpm包的名称

如果其他软件包依赖于要删除的软件包则会产生错误信息
</code></pre></div><p>强制卸载软件包(不推荐)，</p> <div class="language- extra-class"><pre class="language-text"><code>rpm -e --nodeps 包的名称
</code></pre></div><p>安装rpm包</p> <div class="language- extra-class"><pre class="language-text"><code>rpm -ivh RPM包全路径名称

-i 安装
-v 提示
-h 进度条
</code></pre></div><p>安装步骤</p> <ol><li>挂载centos的iso镜像，</li> <li>然后到<code>/media/</code>下去找rpm</li> <li>安装</li></ol></li> <li><p><code>yum</code>包管理</p> <p><code>yum</code>是一个Shell前端软件包管理器。基于RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包。</p> <p>查询<code>yum</code>服务器是否有需要安装的软件</p> <div class="language- extra-class"><pre class="language-text"><code>yum list | grep 软件包名
</code></pre></div><p>安装指定的<code>yum</code>包</p> <div class="language- extra-class"><pre class="language-text"><code>yum install 软件包名
</code></pre></div></li></ul> <h3 id="shell编程"><a href="#shell编程" class="header-anchor">#</a> Shell编程</h3> <h4 id="shell是什么"><a href="#shell是什么" class="header-anchor">#</a> shell是什么</h4> <p><code>Shell</code>是一个命令行解释器，它为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序，用户可以用Shell来启动、挂起、停止甚至编写一些程序。</p> <h4 id="shell脚本的执行方式"><a href="#shell脚本的执行方式" class="header-anchor">#</a> Shell脚本的执行方式</h4> <ul><li><p>脚本格式要求</p> <p>脚本以<code>#/bin/bash</code>开头</p> <p>脚本需要有可执行权限</p></li> <li><p>执行方式</p> <p>方式1(输入脚本的绝对路径或相对路径)</p> <ol><li>首先要赋予<code>XX.sh</code>脚本的<code>+x</code>权限</li> <li>执行脚本</li></ol> <p>方式2(sh+脚本)</p> <p>​	不用赋予脚本<code>+x</code>权限，直接执行即可</p></li> <li><p>快速入门(输出Hello World!)</p> <div class="language- extra-class"><pre class="language-text"><code>#!/bin/bash
echo &quot;Hello World!&quot;
</code></pre></div></li> <li><p>基本语法</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 单行注释</span>

:<span class="token operator">&lt;&lt;</span><span class="token operator">!</span>
	多行注释
	多行注释
<span class="token operator">!</span>
</code></pre></div></li></ul> <h4 id="shell变量"><a href="#shell变量" class="header-anchor">#</a> shell变量</h4> <ol><li><p>Linux Shell变量分为，系统变量和用户自定义的变量</p></li> <li><p>系统变量：<code>$HOME</code>、<code>$PWD</code> 、<code>$SHELL</code>、<code>$USER</code>等等</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 输出系统变量</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;PATH=<span class="token environment constant">$PATH</span>&quot;</span>

<span class="token comment"># PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin</span>
</code></pre></div></li> <li><p>显示当前<code>shell</code>中所有的变量：<code>set</code></p></li></ol> <h4 id="shell变量的定义"><a href="#shell变量的定义" class="header-anchor">#</a> shell变量的定义</h4> <ol><li><p>定义变量：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>变量<span class="token operator">=</span>值
</code></pre></div></li> <li><p>撤销变量</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">unset</span> 变量
</code></pre></div></li> <li><p>声明静态变量</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">readonly</span> 变量
<span class="token comment"># 不能unset</span>
</code></pre></div></li> <li><p>案例</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">A</span><span class="token operator">=</span><span class="token number">100</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;A=<span class="token variable">$A</span>&quot;</span>
<span class="token comment"># A=100</span>

<span class="token builtin class-name">unset</span> A
<span class="token builtin class-name">echo</span> <span class="token string">&quot;A=<span class="token variable">$A</span>&quot;</span>
<span class="token comment"># A=</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">readonly</span> <span class="token assign-left variable">A</span><span class="token operator">=</span><span class="token number">99</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;A=<span class="token variable">$A</span>&quot;</span>
<span class="token comment"># A=99</span>

<span class="token builtin class-name">unset</span> A
<span class="token comment"># A: 无法取消设定: 只读 variable</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;A=<span class="token variable">$A</span>&quot;</span>
<span class="token comment"># A=99</span>
</code></pre></div></li></ol> <h4 id="定义变量的规则"><a href="#定义变量的规则" class="header-anchor">#</a> 定义变量的规则</h4> <ol><li>变量名称可以由字母、数字、下划线组成，但不能以数字开头</li> <li>等号两边不能有空格</li> <li>变量名称习惯大写</li></ol> <h4 id="命令的返回值赋给变量"><a href="#命令的返回值赋给变量" class="header-anchor">#</a> 命令的返回值赋给变量</h4> <ol><li><p>反引号，运行里面的命令，并把结果返回给变量A</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">A</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ls</span> -la<span class="token variable">`</span></span>
</code></pre></div></li> <li><p>等价于反引号</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">A</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> -la<span class="token variable">)</span></span>
</code></pre></div></li></ol> <h4 id="设置环境变量"><a href="#设置环境变量" class="header-anchor">#</a> 设置环境变量</h4> <ul><li><p>基本语法</p> <p>将Shell变量输出为环境变量</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">export</span> 变量名<span class="token operator">=</span>变量值
</code></pre></div><p>让修改后的配置信息立即生效</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">source</span> 配置文件
</code></pre></div><p>查询环境变量的值</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> $变量名
</code></pre></div></li> <li><p>案例</p> <p>在<code>/etc/profile</code>文件中</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#定义一个自己的环境变量</span>
<span class="token assign-left variable">TOMCAT_HOME</span><span class="token operator">=</span>/opt/tomcat
<span class="token builtin class-name">export</span> TOMCAT_HOME
</code></pre></div><p>让其生效需使用以下指令</p> <div class="language- extra-class"><pre class="language-text"><code>source /etc/profile
</code></pre></div><p>之后就可以在其他<code>shell</code>脚本中使用了</p></li></ul> <h4 id="位置参数变量"><a href="#位置参数变量" class="header-anchor">#</a> 位置参数变量</h4> <ul><li><p>当我们执行一个shell脚本时，如果希望获取到命令行的参数信息，就可以用到位置参数变量,比如 <code>./xxx.sh 200 300</code>，这就是一个执行shell的命令行，可以在<code>xxx.sh</code>脚本中获取到参数信息</p></li> <li><p>基本语法</p> <table><thead><tr><th>参数</th> <th>功能</th></tr></thead> <tbody><tr><td>$n</td> <td>n为数字，$0代表命令本身，$1-$9代表1-9参数，十以上的参数用{}包含 ${10}</td></tr> <tr><td>$*</td> <td>这个变量代表命令行中所有的参数，$*把所有参数看成一个整体</td></tr> <tr><td>$@</td> <td>这个变量也代表命令行中所有的参数，不过$@把每个参数区别对待</td></tr> <tr><td>$#</td> <td>代表命令行中所有的参数的个数</td></tr></tbody></table></li> <li><p>案例</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$0</span> <span class="token variable">$1</span> <span class="token variable">$2</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$*</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$#</span>&quot;</span>

:<span class="token operator">&lt;&lt;</span><span class="token operator">!</span> 
./myshell.sh <span class="token number">1</span> <span class="token number">2</span>
<span class="token number">1</span> <span class="token number">2</span>
<span class="token number">1</span> <span class="token number">2</span>
<span class="token number">2</span>
<span class="token operator">!</span>
</code></pre></div></li></ul> <h4 id="预定义变量"><a href="#预定义变量" class="header-anchor">#</a> 预定义变量</h4> <ul><li><p>就是shell设计者事先定义好的变量，可以在shell脚本中直接使用</p></li> <li><p>基本语法</p> <table><thead><tr><th>语法</th> <th>功能</th></tr></thead> <tbody><tr><td>$$</td> <td>当前进程的进程号(PID)</td></tr> <tr><td>$!</td> <td>后台运行的最后一个进程的进程号(PID)</td></tr> <tr><td>$?</td> <td>最后一次执行的命令的返回状态。如果这个变量的值为0，则证明上一个命令正确执行，如果这个数非0(由命令指定数字),则证明上一个指令执行不正确</td></tr></tbody></table></li> <li><p>案例</p> <p><code>myshell.sh</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#!bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;当前的进程号=<span class="token variable">$$</span>&quot;</span>

<span class="token comment">#后台的方式运行myshell.h</span>

./myshell2.sh <span class="token operator">&amp;</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;最后的进程号=<span class="token variable">$!</span>&quot;</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;返回的状态=<span class="token variable">$?</span>&quot;</span>
</code></pre></div><p><code>myshell2.sh</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#!bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Hello World!&quot;</span>
</code></pre></div><p>结果</p> <div class="language- extra-class"><pre class="language-text"><code>当前的进程号=14233
最后的进程号=14235
返回的状态=0
</code></pre></div></li></ul> <h4 id="shell运算符"><a href="#shell运算符" class="header-anchor">#</a> Shell运算符</h4> <ul><li><p><code>$((运算式))</code>或<code>$[运算式]</code></p></li> <li><p><code>expr m+n</code></p> <div class="language- extra-class"><pre class="language-text"><code>+ - \* / % 
加减乘除取余
</code></pre></div></li> <li><p>案例</p> <p>计算<code>(2+3)*4</code>的值</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">4</span><span class="token variable">))</span></span>

<span class="token builtin class-name">echo</span> $<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">2</span>+3<span class="token punctuation">)</span>*4<span class="token punctuation">]</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">TEMP</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token number">2</span> + <span class="token number">3</span><span class="token variable">`</span></span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $TEMP <span class="token punctuation">\</span>* <span class="token number">4</span><span class="token variable">`</span></span>
</code></pre></div><p>求出两个位置参数的和</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#!bin/bash</span>
<span class="token builtin class-name">echo</span> $<span class="token punctuation">[</span><span class="token variable">$1</span>+<span class="token variable">$2</span><span class="token punctuation">]</span>
</code></pre></div></li></ul> <h4 id="条件判断"><a href="#条件判断" class="header-anchor">#</a> 条件判断</h4> <ul><li><p>基本语法</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># condition是条件前后有空格，非空为true</span>
<span class="token punctuation">[</span> condition <span class="token punctuation">]</span>   
</code></pre></div></li> <li><p>判断语句</p> <p>两个整数的比较</p> <table><thead><tr><th>符号</th> <th>功能</th></tr></thead> <tbody><tr><td>=</td> <td>字符串比较</td></tr> <tr><td>-lt</td> <td>小于</td></tr> <tr><td>-le</td> <td>小于等于</td></tr> <tr><td>-eq</td> <td>等于</td></tr> <tr><td>-gt</td> <td>大于</td></tr> <tr><td>-ge</td> <td>大于等于</td></tr> <tr><td>-ne</td> <td>不等于</td></tr></tbody></table> <p>按照文件权限进行判断</p> <table><thead><tr><th>符号</th> <th>功能</th></tr></thead> <tbody><tr><td>-r</td> <td>有读的权限</td></tr> <tr><td>-w</td> <td>有写的权限</td></tr> <tr><td>-x</td> <td>有执行的权限</td></tr></tbody></table> <p>按照文件类型进行判断</p> <table><thead><tr><th>符号</th> <th>功能</th></tr></thead> <tbody><tr><td>-f</td> <td>文件存在并且是一个常规的文件</td></tr> <tr><td>-e</td> <td>文件存在</td></tr> <tr><td>-d</td> <td>文件存在并且是一个目录</td></tr></tbody></table> <p>案例</p> <p>判断<code>ok是否等于ok</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;ok&quot;</span><span class="token operator">=</span><span class="token string">&quot;ok&quot;</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;相等&quot;</span>
<span class="token keyword">fi</span>

<span class="token comment"># 结果</span>
<span class="token comment"># 相等</span>
</code></pre></div><p>判断<code>/shell/test.txt</code>是否存在</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">if</span> <span class="token punctuation">[</span> -e /shell/test.txt <span class="token punctuation">]</span>
<span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;存在&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div></li></ul> <h4 id="流程控制"><a href="#流程控制" class="header-anchor">#</a> 流程控制</h4> <ul><li><p><code>if</code>判断</p> <p>基本语法</p> <div class="language- extra-class"><pre class="language-text"><code>if [ 条件判断式 ]
then 
	程序
    elif [ 条件判断式 ]
    then
    	程序
fi 
</code></pre></div><p>案例，如果参数大于等于60输出及格否则输出不及格</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#!bin/bash</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$1</span> -ge <span class="token number">60</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;及格&quot;</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$1</span> -lt <span class="token number">60</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;不及格&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div></li> <li><p><code>case</code>语句</p> <p>语法</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">case</span> $变量名 <span class="token keyword">in</span>
 <span class="token string">&quot;值1&quot;</span><span class="token punctuation">)</span>
 	程序
 <span class="token punctuation">;</span><span class="token punctuation">;</span>
 <span class="token string">&quot;值2&quot;</span><span class="token punctuation">)</span>
 	程序
 <span class="token punctuation">;</span><span class="token punctuation">;</span>
 <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
 *<span class="token punctuation">)</span>
 	如果变量的值都不是以上的值执行此程序
 <span class="token punctuation">;</span><span class="token punctuation">;</span>
 <span class="token keyword">esac</span>
</code></pre></div><p>案例,参数为<code>1</code>输出<code>周一</code>，参数为<code>2</code>输出<code>周二</code>，其他输出<code>other</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#!bin/bash</span>
<span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span>
    <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;周一&quot;</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;周二&quot;</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    *<span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;other&quot;</span>
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre></div></li> <li><p><code>for</code>循环</p> <p>基本语法1</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">for</span> 变量 <span class="token keyword">in</span> 值1 值2 值3<span class="token punctuation">..</span>.
<span class="token keyword">do</span> 
	程序
<span class="token keyword">done</span>
</code></pre></div><p>案例1，打印命令行输入的参数</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#!bin/bash</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;the num is <span class="token variable">$i</span>&quot;</span>
<span class="token keyword">done</span>
</code></pre></div><p>基本语法2</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>初始值<span class="token punctuation">;</span>循环控制条件<span class="token punctuation">;</span>变量变化<span class="token punctuation">))</span></span>
<span class="token keyword">do</span>
	程序
<span class="token keyword">done</span>
</code></pre></div><p>案例2，1+...+100 输出显示</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#!bin/bash</span>
<span class="token assign-left variable">SUM</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">))</span></span>
<span class="token keyword">do</span>
    <span class="token assign-left variable">SUM</span><span class="token operator">=</span>$<span class="token punctuation">[</span><span class="token variable">$SUM</span>+<span class="token variable">$i</span><span class="token punctuation">]</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$SUM</span>&quot;</span>
</code></pre></div></li> <li><p><code>while</code>循环</p> <p>语法</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">while</span> <span class="token punctuation">[</span> 条件判断式 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
	程序
<span class="token keyword">done</span>
</code></pre></div><p>案例：从命令行输入一个数n，统计从1+...+n的值是多少</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#!bin/bash</span>
<span class="token assign-left variable">SUM</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> -lt <span class="token variable">$1</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
        <span class="token assign-left variable">i</span><span class="token operator">=</span>$<span class="token punctuation">[</span><span class="token variable">$i</span>+1<span class="token punctuation">]</span>
        <span class="token assign-left variable">SUM</span><span class="token operator">=</span>$<span class="token punctuation">[</span><span class="token variable">$SUM</span>+<span class="token variable">$i</span><span class="token punctuation">]</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$SUM</span>&quot;</span>
</code></pre></div></li></ul> <h4 id="read从控制台读取输入"><a href="#read从控制台读取输入" class="header-anchor">#</a> <code>read</code>从控制台读取输入</h4> <p>语法</p> <div class="language- extra-class"><pre class="language-text"><code>read [options] 参数

-p 指定读取值时的提示符
-t 指定读取值时等待的时间(秒)，如果没有在指定的时间内输入，就不等待了
 
 参数
 指定读取值的变量名
</code></pre></div><p>案例：读取控制台输入的一个num值，10秒内输入</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#!bin/bash</span>
<span class="token builtin class-name">read</span> -t <span class="token number">10</span> -p <span class="token string">&quot;请输入一个数&quot;</span> NUM
<span class="token builtin class-name">echo</span> <span class="token string">&quot;输入的值为 <span class="token variable">$NUM</span>&quot;</span>
</code></pre></div><h4 id="shell函数"><a href="#shell函数" class="header-anchor">#</a> shell函数</h4> <p>shell编程里面有系统函数和自定义函数之分</p> <ul><li><p>系统函数</p> <p><code>basename</code>返回完整路径中的最后<code>/</code>的部分，常用于获取文件名</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">basename</span> 文件路径 <span class="token punctuation">[</span>suffix<span class="token punctuation">]</span>  

<span class="token comment"># suffix为后缀，如果指定后缀，则获取的文件名没有后缀</span>
</code></pre></div><p>案例</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#!bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">basename</span> /shell/test.txt<span class="token variable">)</span></span>
<span class="token comment"># test.txt</span>

<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">basename</span> /shell/test.txt .txt<span class="token variable">)</span></span>
<span class="token comment"># test</span>
</code></pre></div><p><code>dirname</code>返回路径最后<code>/</code>之前的部分，常用于返回路径部分</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">dirname</span> 文件绝对路径
</code></pre></div><p>案例</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#!bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> /shell/test.txt<span class="token variable">)</span></span>

<span class="token comment"># /shell</span>
</code></pre></div></li> <li><p>自定义函数</p> <p>语法</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span> <span class="token keyword">function</span> <span class="token punctuation">]</span> funname <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    action<span class="token punctuation">;</span>
    <span class="token punctuation">[</span>return int<span class="token punctuation">;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>案例：计算输入两个参数的和</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#!bin/bash</span>
<span class="token keyword">function</span> <span class="token function-name function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token assign-left variable">SUM</span><span class="token operator">=</span>$<span class="token punctuation">[</span><span class="token variable">$n1</span>+<span class="token variable">$n2</span><span class="token punctuation">]</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;和是 <span class="token variable">$SUM</span>&quot;</span>
<span class="token punctuation">}</span>
<span class="token builtin class-name">read</span> -p <span class="token string">&quot;请输入第一个数n1 &quot;</span> n1
<span class="token builtin class-name">read</span> -p <span class="token string">&quot;请输入第二个数n2 &quot;</span> n2
<span class="token function">sum</span> <span class="token variable">$n1</span> <span class="token variable">$n2</span>
</code></pre></div></li></ul> <h4 id="shell编程综合案例"><a href="#shell编程综合案例" class="header-anchor">#</a> shell编程综合案例</h4> <ol><li><p>每天凌晨两点十分备份数据库<code>exampleDB</code>到<code>/data/backup/db</code></p></li> <li><p>备份开始和备份结束能够给出响应的提示信息</p></li> <li><p>备份后的文件要求以备份时间为文件名，并打包成<code>.tar.gz</code>的形式，比如<code>2020-05-03_230201.tar.gz</code></p></li> <li><p>在备份的同时，检查是否有十天前备份的数据库文件，如果有就将其删除</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">#数据库的定时备份</span>

<span class="token comment">#备份的路径</span>
<span class="token assign-left variable">BACKUP</span><span class="token operator">=</span>/data/backup/db
<span class="token comment">#当前的使劲按作为文件名</span>
<span class="token assign-left variable">DATETIME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y_%m_%d_%H%M%S<span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;========开始备份========&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;备份的路径是  <span class="token variable">$BACKUP</span>/<span class="token variable">$DATETIME</span>.tar.gz&quot;</span>

<span class="token comment">#主机</span>
<span class="token assign-left variable">HOST</span><span class="token operator">=</span>localhost
<span class="token comment">#用户名</span>
<span class="token assign-left variable">DB_USER</span><span class="token operator">=</span>root
<span class="token comment">#密码</span>
<span class="token assign-left variable">DB_PWD</span><span class="token operator">=</span>root
<span class="token comment">#数据库的名称</span>
<span class="token assign-left variable">DATABASE</span><span class="token operator">=</span>exampleDB

<span class="token comment">#判断备份的路径是否存在</span>
<span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">&quot;<span class="token variable">$BACKUP</span>/<span class="token variable">$DATETIME</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">mkdir</span> -p <span class="token string">&quot;<span class="token variable">$BACKUP</span>/<span class="token variable">$DATETIME</span>&quot;</span>

<span class="token comment">#进入docker里的mysql容器，本地mysql忽略此步骤docker exec -it 4d6dc427be27</span>
docker <span class="token builtin class-name">exec</span> -i 4d6dc427be27 mysqldump -u<span class="token variable">${DB_USER}</span> -p<span class="token variable">${DB_PWD}</span> --host<span class="token operator">=</span><span class="token variable">${HOST}</span> <span class="token variable">${DATABASE}</span> <span class="token operator">|</span> <span class="token function">gzip</span> <span class="token operator">&gt;</span> <span class="token variable">$BACKUP</span>/<span class="token variable">$DATETIME</span>/<span class="token variable">$DATETIME</span>.sql.gz

<span class="token comment">#打包</span>
<span class="token builtin class-name">cd</span> <span class="token variable">$BACKUP</span>
<span class="token function">tar</span> -zcvf <span class="token variable">$DATETIME</span>.tar.gz <span class="token variable">$DATETIME</span>

<span class="token comment">#删除临时目录</span>
<span class="token function">rm</span> -rf <span class="token variable">$BACKUP</span>/<span class="token variable">$DATETIME</span>

<span class="token comment">#删除10天前的备份文件</span>
<span class="token function">find</span> <span class="token variable">$BACKUP</span> -mtime +10 -name <span class="token string">&quot;*.tar.gz&quot;</span> -exec <span class="token function">rm</span> -rf <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">\</span><span class="token punctuation">;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;========备份成功========&quot;</span>
</code></pre></div><p><code>crontab -e</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">10</span> <span class="token number">2</span> * * * /shell/mysql_db_backup.sh
</code></pre></div></li></ol></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后修改时间: </span> <span class="time">16 分钟前</span></div></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-3" data-v-70334359><a href="/linux/Linux.html#linux-主要-目录结构" class="sidebar-link reco-side-linux-主要-目录结构" data-v-70334359>Linux(主要)目录结构</a></li><li class="level-3" data-v-70334359><a href="/linux/Linux.html#vi和vim的基本使用" class="sidebar-link reco-side-vi和vim的基本使用" data-v-70334359>vi和vim的基本使用</a></li><li class="level-3" data-v-70334359><a href="/linux/Linux.html#linux关机-重启" class="sidebar-link reco-side-linux关机-重启" data-v-70334359>linux关机，重启</a></li><li class="level-3" data-v-70334359><a href="/linux/Linux.html#用户管理" class="sidebar-link reco-side-用户管理" data-v-70334359>用户管理</a></li><li class="level-3" data-v-70334359><a href="/linux/Linux.html#linux基础指令" class="sidebar-link reco-side-linux基础指令" data-v-70334359>linux基础指令</a></li><li class="level-3" data-v-70334359><a href="/linux/Linux.html#组管理和权限管理" class="sidebar-link reco-side-组管理和权限管理" data-v-70334359>组管理和权限管理</a></li><li class="level-3" data-v-70334359><a href="/linux/Linux.html#任务调度" class="sidebar-link reco-side-任务调度" data-v-70334359>任务调度</a></li><li class="level-3" data-v-70334359><a href="/linux/Linux.html#磁盘分区、挂载" class="sidebar-link reco-side-磁盘分区、挂载" data-v-70334359>磁盘分区、挂载</a></li><li class="level-3" data-v-70334359><a href="/linux/Linux.html#linux网络配置" class="sidebar-link reco-side-linux网络配置" data-v-70334359>Linux网络配置</a></li><li class="level-3" data-v-70334359><a href="/linux/Linux.html#linux进程管理" class="sidebar-link reco-side-linux进程管理" data-v-70334359>Linux进程管理</a></li><li class="level-3" data-v-70334359><a href="/linux/Linux.html#rpm和yum包管理" class="sidebar-link reco-side-rpm和yum包管理" data-v-70334359>RPM和YUM包管理</a></li><li class="level-3" data-v-70334359><a href="/linux/Linux.html#shell编程" class="sidebar-link reco-side-shell编程" data-v-70334359>Shell编程</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;left:50px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/assets/js/app.3f084515.js" defer></script><script src="/assets/js/3.ef08ee50.js" defer></script><script src="/assets/js/1.86f97011.js" defer></script><script src="/assets/js/33.3cd91f11.js" defer></script>
  </body>
</html>
