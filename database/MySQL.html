<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL | 薛定谔see猫</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta charset="UTF-8" version="1">
    <meta name="baidu-site-verification" content="code-E5pfjV93p5">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="Keywords" content="个人博客, 薛定谔see猫,程序员,java">
    
    <link rel="preload" href="/assets/css/0.styles.aea1a24b.css" as="style"><link rel="preload" href="/assets/js/app.ab5f16c5.js" as="script"><link rel="preload" href="/assets/js/3.0bb47036.js" as="script"><link rel="preload" href="/assets/js/1.5a70b7c3.js" as="script"><link rel="preload" href="/assets/js/14.d250c454.js" as="script"><link rel="prefetch" href="/assets/js/10.e081399c.js"><link rel="prefetch" href="/assets/js/11.b2291628.js"><link rel="prefetch" href="/assets/js/12.9aeae9a1.js"><link rel="prefetch" href="/assets/js/13.03725775.js"><link rel="prefetch" href="/assets/js/15.4091dd45.js"><link rel="prefetch" href="/assets/js/16.858a530b.js"><link rel="prefetch" href="/assets/js/17.4985e766.js"><link rel="prefetch" href="/assets/js/18.dafc1835.js"><link rel="prefetch" href="/assets/js/19.1361dd29.js"><link rel="prefetch" href="/assets/js/20.2e5abafc.js"><link rel="prefetch" href="/assets/js/21.4b7739fe.js"><link rel="prefetch" href="/assets/js/22.3f12b58d.js"><link rel="prefetch" href="/assets/js/23.0de669fe.js"><link rel="prefetch" href="/assets/js/24.430bd966.js"><link rel="prefetch" href="/assets/js/25.ebe62ec6.js"><link rel="prefetch" href="/assets/js/4.d6e8508b.js"><link rel="prefetch" href="/assets/js/5.dbaaa577.js"><link rel="prefetch" href="/assets/js/6.4fe70386.js"><link rel="prefetch" href="/assets/js/7.3c24189a.js"><link rel="prefetch" href="/assets/js/8.238afdc8.js"><link rel="prefetch" href="/assets/js/9.a5a3cc1f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aea1a24b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>薛定谔see猫</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc></p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>薛定谔see猫</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.jpg" alt="薛定谔see猫" class="logo"> <span class="site-name">薛定谔see猫</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/assets/img/logo.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    薛定谔see猫
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>14</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>19</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6><li class="social-item" data-v-828910c6><i class="iconfont reco-github" style="color:#849b87;" data-v-828910c6></i></li><li class="social-item" data-v-828910c6><i class="iconfont reco-bilibili" style="color:#3498db;" data-v-828910c6></i></li></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>MySQL</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>薛定谔see猫</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">MySQL</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>薛定谔see猫</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>2021/4/3</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>数据库</span><span class="tag-item" data-v-1ff7123e>MySQL</span></i></div></div> <div class="theme-reco-content content__default"><p>MySQL因为开源，免费等优点成为世界上最受欢迎的数据库管理系统，值得每一位coding爱好者去学习和掌握</p> <h2 id="一-mysql启动"><a href="#一-mysql启动" class="header-anchor">#</a> 一.MySQL启动</h2> <ul><li><p>查看MySQL版本(未登录MySQL)</p> <div class="language-shell extra-class"><pre class="language-shell"><code>mysql --version
</code></pre></div></li> <li><p>启动</p> <div class="language-shell extra-class"><pre class="language-shell"><code>net start mysql
</code></pre></div></li> <li><p>停止</p> <div class="language-shell extra-class"><pre class="language-shell"><code>net stop mysql
</code></pre></div></li> <li><p>登陆</p> <div class="language-shell extra-class"><pre class="language-shell"><code>mysql -h localhost -P <span class="token number">3306</span> -u root -p 
</code></pre></div><p>h 主机名</p> <p>P 端口号</p> <p>u 用户名</p> <p>p 密码</p> <p>如果是连接本地的MySQL 参数h P可省略</p> <p>回车之后提示输入密码</p></li> <li><p>退出</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">exit</span> 或者 quit 或者 CTRL+C
</code></pre></div></li> <li><p>查看当前MySQL版本(已登陆MySQL)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="二-mysql常用命令"><a href="#二-mysql常用命令" class="header-anchor">#</a> 二.MySQL常用命令</h2> <p><strong>快速入门</strong></p> <ul><li><p>显示所有的数据库</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
</code></pre></div><p>每条语句的结尾可以用英文分号也可用\g</p></li> <li><p>打开指定的数据库名</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">use</span> db<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>显示数据库db中所有的表(此时已进入db中)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>可以直接查看指定数据库的表</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">tables</span> <span class="token keyword">from</span> db
</code></pre></div></li> <li><p>查看当前所在的数据库</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>创建一张表</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> student_info<span class="token punctuation">(</span>
	id <span class="token keyword">int</span><span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查看表的结构</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">desc</span> student_info<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查看表的所有数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> student_info
</code></pre></div></li> <li><p>向表中插入一条记录</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> student_info <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>修改表中id为1的数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">update</span> student_info <span class="token keyword">set</span> name<span class="token operator">=</span><span class="token string">&quot;john&quot;</span> <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>删除id为1的记录</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> student_info <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="三-mysql的语法规范"><a href="#三-mysql的语法规范" class="header-anchor">#</a> 三.MySQL的语法规范</h2> <ol><li><p>MySQL不区分大小写但建议关键字大写，表明、列名小写</p></li> <li><p>每条命令最好用分号结尾</p></li> <li><p>每条命令根据需要，可以缩进或者换行。建议关键字单独一行</p></li> <li><p>注释</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#单行注释</span>
<span class="token comment">-- 单行注释有空格</span>
<span class="token comment">/*多行注释*/</span>
</code></pre></div></li></ol> <h2 id="四-sql结构化查询语言"><a href="#四-sql结构化查询语言" class="header-anchor">#</a> 四.SQL结构化查询语言</h2> <h3 id="dql语言"><a href="#dql语言" class="header-anchor">#</a> DQL语言</h3> <p>现在有一个数据库一<code>myemployees</code>数据库中有一下几张表及其结构
$$
departments
$$</p> <table><thead><tr><th>字段</th> <th>department_id</th> <th>department_name</th> <th>manager_id</th> <th>location_id</th></tr></thead> <tbody><tr><td>类型</td> <td>int</td> <td>varchar(3)</td> <td>int</td> <td>int</td></tr></tbody></table> <p>$$
employees
$$</p> <table><thead><tr><th>字段</th> <th>employee_id</th> <th>first_name</th> <th>last_name</th> <th>email</th> <th>phone_number</th> <th>job_id</th> <th>salary</th> <th>commission_pct</th> <th>manager_id</th> <th>department_id</th> <th>hiredate</th></tr></thead> <tbody><tr><td>类型</td> <td>int</td> <td>varchar(20)</td> <td>varchar(25)</td> <td>varchar(25)</td> <td>varchar(20)</td> <td>varchar(10)</td> <td>double(10,2)</td> <td>double(4,2)</td> <td>int</td> <td>int</td> <td>datetime</td></tr></tbody></table> <p>$$
jobs
$$</p> <table><thead><tr><th>字段</th> <th>job_id</th> <th>job_title</th> <th>min_salary</th> <th>max_salary</th></tr></thead> <tbody><tr><td>类型</td> <td>varchar(10)</td> <td>varchar(35)</td> <td>int</td> <td>int</td></tr></tbody></table> <p>$$
locations
$$</p> <table><thead><tr><th>字段</th> <th>location_id</th> <th>street_address</th> <th>postal_code</th> <th>city</th> <th>state_province</th> <th>country_id</th></tr></thead> <tbody><tr><td>类型</td> <td>int</td> <td>varchar(40)</td> <td>varchar(12)</td> <td>varchar(30)</td> <td>varchar(25)</td> <td>varchar(2)</td></tr></tbody></table> <p>$$
job_grades
$$</p> <table><thead><tr><th>字段</th> <th>grade_level</th> <th>lowest_sal</th> <th>highest_sal</th></tr></thead> <tbody><tr><td>类型</td> <td>varchar(3)</td> <td>int</td> <td>int</td></tr></tbody></table> <p>数据库二<code>girls</code>数据库中有以下几张表
$$
admin
$$</p> <table><thead><tr><th>字段</th> <th>id</th> <th>username</th> <th>password</th></tr></thead> <tbody><tr><td>类型</td> <td>int</td> <td>varchar(10)</td> <td>varchar(10)</td></tr></tbody></table> <p>$$
beauty
$$</p> <table><thead><tr><th>字段</th> <th>id</th> <th>name</th> <th>sex</th> <th>borndate</th> <th>phone</th> <th>photo</th> <th>boyfriend_id</th></tr></thead> <tbody><tr><td>类型</td> <td>int</td> <td>varchar(50)</td> <td>char(1)</td> <td>datetime</td> <td>varchar(11)</td> <td>blob</td> <td>int</td></tr></tbody></table> <p>$$
boys
$$</p> <table><thead><tr><th>字段</th> <th>id</th> <th>boyName</th> <th>userCP</th></tr></thead> <tbody><tr><td>类型</td> <td>int</td> <td>varchar(20)</td> <td>int</td></tr></tbody></table> <p>以下的学习均会在数据库<code>myemployees</code>和<code>grils</code>进行</p> <h4 id="基础查询"><a href="#基础查询" class="header-anchor">#</a> 基础查询</h4> <ul><li>语法：<code>select 查询列表 from 表名</code></li> <li>查询列表可以是：表中的字段，常量表达式，函数</li> <li>查询的结果是一个虚拟的表格</li> <li><strong>案例演示</strong></li></ul> <ol><li><p><code>use 数据库名称</code> 打开指定的数据库</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">USE</span> myemployees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查询表中的某个字段</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> last_name <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查询表中的多个字段,中间以逗号隔开</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>salary<span class="token punctuation">,</span>email <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查询表中的所有字段</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查询常量值</p> <p>字符型和日期型的常量必须用单引号引起</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">'john'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查询表达式</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token number">100</span><span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查询函数 version() 返回MySQL版本号</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div></li> <li><p>起别名 AS可以省略</p> <ul><li>便于理解</li> <li>如果要查询的字段有重名的情况，使用别名可以区分开来</li> <li>如果别名当中有关键字需用双引号或者单引号括起，建议双引号</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token number">100</span><span class="token operator">%</span><span class="token number">98</span> <span class="token keyword">AS</span> 结果<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> last_name <span class="token keyword">AS</span> 姓<span class="token punctuation">,</span>first_name <span class="token keyword">AS</span> 名 <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>去重</p> <p>案例：查询员工表中涉及到的所有的部门的编号</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> department_id <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>+</code>号的作用 在MySQL中&quot;+&quot;仅仅为运算符，没有字符串拼接的功能</p> <p>两个操作数都为整数做加法</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token number">100</span><span class="token operator">+</span><span class="token number">90</span><span class="token punctuation">;</span>
</code></pre></div><p>其中一方为字符型，试图将字符型数值转换为数值型，转换成功，继续做加法运算</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;123&quot;</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><p>一方或者双方为字符则转换失败，则将字符转换为0继续做加法</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token number">123</span><span class="token operator">+</span><span class="token string">&quot;john&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>其中一方为NULL则结果为NULL</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token boolean">NULL</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></div><p>案例：查询员工名和姓连接成一个字段并显示为姓名 使用<code>CONCAT(str1,str2...)</code>函数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	CONCAT<span class="token punctuation">(</span> last_name<span class="token punctuation">,</span> first_name <span class="token punctuation">)</span> <span class="token keyword">AS</span> 姓名 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>IFNULL(exp1,exp2)函数 判断exp1是否为NULL，若为NULL用exp2替换</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	IFNULl<span class="token punctuation">(</span> commission_pct<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token keyword">AS</span> 奖金率 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
</code></pre></div></li></ol> <h4 id="条件查询"><a href="#条件查询" class="header-anchor">#</a> 条件查询</h4> <ul><li><p>语法：<code>SELECT 查询列表 from 表名 where 筛选条件;</code></p></li> <li><p>分类：</p> <ol><li>按条件表达式筛选 条件运算符：<code>&gt;</code>,<code>&lt;</code>,<code>=</code>,<code>!=</code>,<code>&lt;&gt; 不等于的另外一种写法</code>,<code>&gt;=</code>,<code>&lt;=</code></li> <li>按逻辑表达式筛选 逻辑运算符：<code>&amp;&amp;</code>,<code>||</code>,<code>!</code> 或者<code>and</code>,<code>or</code>,<code>not</code></li> <li>模糊查询 <code>like</code>,<code>between and</code>,<code>in</code>,<code>is null</code></li></ol></li> <li><p>案例演示</p></li></ul> <ol><li><p>条件表达式筛选</p> <p>查询<code>工资&gt;12000</code>的员工信息</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> salary<span class="token operator">&gt;</span><span class="token number">12000</span><span class="token punctuation">;</span>
</code></pre></div><p>查询部门编号<code>不等于90号</code>的员工名和部门编号</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 
	last_name<span class="token punctuation">,</span>department_id 
<span class="token keyword">FROM</span> 
	employees 
<span class="token keyword">WHERE</span> 
	department_id<span class="token operator">&lt;&gt;</span><span class="token number">90</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>按逻辑表达式筛选</p> <p>查询<code>工资在10000到20000</code>之间的员工名、工资以及奖金</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 
	last_name<span class="token punctuation">,</span>
	salary<span class="token punctuation">,</span>
	commission_pct
<span class="token keyword">FROM</span> 
	employees
<span class="token keyword">WHERE</span>
	salary<span class="token operator">&gt;=</span><span class="token number">10000</span><span class="token operator">&amp;&amp;</span>salary<span class="token operator">&lt;=</span><span class="token number">20000</span><span class="token punctuation">;</span>
</code></pre></div><p>查询部门编号不是在90到110之间，或者工资高于15000的员工信息</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span> 
	<span class="token operator">NOT</span><span class="token punctuation">(</span>department_id<span class="token operator">&gt;=</span><span class="token number">90</span><span class="token operator">&amp;&amp;</span>department_id<span class="token operator">&lt;=</span><span class="token number">110</span><span class="token punctuation">)</span><span class="token operator">||</span>salary<span class="token operator">&gt;</span><span class="token number">15000</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>模糊查询</p> <p><code>like</code> 一般和通配符搭配使用</p> <ul><li><p><code>%</code>任意多个字符</p></li> <li><p><code>_</code>任意单个字符</p></li></ul></li></ol> <p>查询员工名中包含字符a的员工信息</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	last_name <span class="token operator">LIKE</span> <span class="token string">'%a%'</span>
</code></pre></div><p>查询员工名中第三个字符为<code>n</code>，第五个字符为<code>l</code>的员工名和工资</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	last_name <span class="token operator">LIKE</span> <span class="token string">'__n_l%'</span><span class="token punctuation">;</span>
</code></pre></div><p>查询员工名中第二个字符为<code>_</code>的员工名 使用<code>\</code>转义</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	last_name <span class="token operator">LIKE</span> <span class="token string">'_\_%'</span><span class="token punctuation">;</span>
    <span class="token comment">#last_name LIKE '_$_%' ESCAPE '$';</span>
    <span class="token comment">#ESCAPE 指定$为转义字符</span>
</code></pre></div><p><code>between and</code> 包含临界值 临界值不可颠倒</p> <p>查询员工编号<code>100到120</code>之间的员工信息</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employee_id <span class="token operator">BETWEEN</span> <span class="token number">100</span> 
	<span class="token operator">AND</span> <span class="token number">120</span><span class="token punctuation">;</span>
</code></pre></div><p><code>in</code>：用于判断某字段的值是否属于<code>in</code>列表中的某一项</p> <p>特点：</p> <ul><li><p>使用<code>in</code>提高语句简洁度</p> <ul><li><code>in</code>列表的值类型必须统一或者兼容(可以隐式转换)</li></ul></li></ul> <p>查询员工的工种编号是 <code>IT_PROG</code>、<code>AD_VP</code>、<code>AD_PRES</code>中的一个员工名和工种编号</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
  last_name<span class="token punctuation">,</span>
  job_id 
<span class="token keyword">FROM</span>
  employees 
  <span class="token keyword">WHERE</span>
  <span class="token comment">#job_id='IT_PROT' OR job_id='AD_VP' OR job_id='AD_PRES';</span>
  job_id <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token string">'IT_PROT'</span><span class="token punctuation">,</span> <span class="token string">'AD_VP'</span><span class="token punctuation">,</span> <span class="token string">'AD_PRES'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>is null</code></p> <ul><li><p><code>=</code>,<code>&lt;&gt;</code>不能判断<code>NULL</code>值</p></li> <li><p><code>is null</code> 为<code>NULL</code> ，<code>is not null</code> 不为<code>NULL</code></p></li></ul> <p>查询没有奖金的员工名和奖金率</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	commission_pct 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	commission_pct <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre></div><p>安全等于 <code>&lt;=&gt;</code> 可以判断<code>NULL</code>值也可判断普通值</p> <p>查询没有奖金的员工名和奖金率</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	commission_pct 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	commission_pct <span class="token operator">&lt;=&gt;</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="排序查询"><a href="#排序查询" class="header-anchor">#</a> 排序查询</h4> <ul><li><p>语法：<code>select 查询列表 from 表 where 筛选条件 order by 排序列表 asc|desc</code></p></li> <li><p>特点：</p> <ul><li><code>desc</code>降序</li> <li><code>asc</code>升序</li> <li>不写默认升序</li></ul></li> <li><p>案例演示</p></li></ul> <p>查询员工信息，要求工资<code>从高到底</code>排序</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	salary <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre></div><p>查询部门编号<code>&gt;= 90</code>的员工信息，按入职时间<code>(升序)</code>进行排序</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	department_id <span class="token operator">&gt;=</span> <span class="token number">90</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	hiredate <span class="token keyword">ASC</span><span class="token punctuation">;</span>
</code></pre></div><p>按表达式(别名)排序：按年薪的高低显示员工的信息和年薪</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token operator">*</span><span class="token punctuation">,</span>
	salary <span class="token operator">*</span> <span class="token number">12</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span>IFNULL <span class="token punctuation">(</span> commission_pct<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> 年薪 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	<span class="token comment">#salary * 12 * (1+IFNULL ( commission_pct, 0 ));</span>
	年薪 <span class="token keyword">ASC</span><span class="token punctuation">;</span>
</code></pre></div><p>按函数排序：按姓名的长度显示员工的姓名和工资·<code>length(str)</code>求指定字符串str的长度</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	CONCAT<span class="token punctuation">(</span> first_name<span class="token punctuation">,</span> last_name <span class="token punctuation">)</span><span class="token punctuation">,</span>
	salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	LENGTH<span class="token punctuation">(</span>CONCAT<span class="token punctuation">(</span> first_name<span class="token punctuation">,</span> last_name <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">ASC</span><span class="token punctuation">;</span>
</code></pre></div><p>按多个字段排序：查询员工信息，要求先按工资升序，再按员工编号降序</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	salary <span class="token keyword">ASC</span><span class="token punctuation">,</span>
	employee_id <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="常见函数"><a href="#常见函数" class="header-anchor">#</a> 常见函数</h4> <ul><li><p>概念：类似与编程语言中的方法，指将一组逻辑语句封装再方法体中，对外暴露方法名</p></li> <li><p>优点：1.隐藏了实现的细节 2.提高代码的复用性</p></li> <li><p>语法：<code>select 函数名(实参列表) from 表;</code></p></li> <li><p>分类：</p> <ul><li>单行函数 <code>concat()</code>、<code>length()</code>、<code>ifnull()</code>等</li> <li>分组函数：做统计使用，又称为统计函数、聚合函数、组函数</li></ul></li> <li><p>案例演示</p></li></ul> <h5 id="单行函数"><a href="#单行函数" class="header-anchor">#</a> 单行函数</h5> <h6 id="字符函数"><a href="#字符函数" class="header-anchor">#</a> 字符函数</h6> <ol><li><p><code>length(str)</code> 接受一个字符串返回改字符串的字节长度</p> <div class="language-sql extra-class"><pre class="language-sql"><code> <span class="token keyword">SELECT</span> LENGTH<span class="token punctuation">(</span><span class="token string">&quot;john&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>concat(str1,str2,...)</code> 拼接字符串最少接受两个参数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
  	CONCAT<span class="token punctuation">(</span> last_name<span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">,</span> first_name <span class="token punctuation">)</span> 
  <span class="token keyword">FROM</span>
  	employees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>upper(str)</code> 转换为大写、<code>lower(str)</code>转换为小写</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> UPPER<span class="token punctuation">(</span><span class="token string">&quot;john&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">SELECT</span> LOWER<span class="token punctuation">(</span><span class="token string">&quot;JoHN&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>substr()</code>该方法有重载 ,在SQL中字符串的索引是从1开始</p> <ul><li><p><code>substr(str,pos)</code> 在str中截取从pos位置开始的所有字符</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> SUBSTR<span class="token punctuation">(</span><span class="token string">&quot;我是一名学生&quot;</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">#结果：学生</span>
</code></pre></div></li> <li><p><code>substr(str,pos,length)</code>  在str中截取从pos位置开始的length个字符</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> SUBSTR<span class="token punctuation">(</span><span class="token string">&quot;我是一名学生&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">#结果：我</span>
</code></pre></div></li></ul></li> <li><p><code>instr(parentstr,sonstr)</code> 返回sonstr在parentstr中的第一次出现起始索引，如果找不到则返回<code>0</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> INSTR<span class="token punctuation">(</span><span class="token string">&quot;我是一名学生&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;学生&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">#结果：学生</span>
</code></pre></div></li> <li><p><code>trim()</code></p> <ul><li><p><code>trim(str)</code> 去除str中前后的空格</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> LENGTH<span class="token punctuation">(</span>TRIM<span class="token punctuation">(</span><span class="token string">&quot;    hahaha     &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> len<span class="token punctuation">;</span>
<span class="token comment">#结果：6</span>
</code></pre></div></li> <li><p><code>trim(s FROM str)</code> 去除str中前后的字符s</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> TRIM<span class="token punctuation">(</span><span class="token string">&quot;ab&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;abcdfghabab&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：cdfgh</span>
</code></pre></div></li></ul></li> <li><p><code>LPAD(str,len,padstr)</code>用padstr左填充指定长度len的字符串str,如果原本字符str以超过len则会<code>左</code>截取</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> LPAD<span class="token punctuation">(</span><span class="token string">&quot;我是一名学生&quot;</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：****我是一名学生</span>

<span class="token keyword">SELECT</span> LPAD<span class="token punctuation">(</span><span class="token string">&quot;我是一名学生&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：我是</span>
</code></pre></div></li> <li><p><code>RPAD(str,len,padstr)</code>用padstr右填充指定长度len的字符串str,如果原本字符str以超过len则会<code>左</code>截取</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> RPAD<span class="token punctuation">(</span><span class="token string">&quot;我是一名学生&quot;</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：我是一名学生****</span>

<span class="token keyword">SELECT</span> RPAD<span class="token punctuation">(</span><span class="token string">&quot;我是一名学生&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：我是</span>
</code></pre></div></li> <li><p><code>replace(str,from_str,to_str)</code> 在字符串str中将from_str替换to_str，若str中有多个from_str则全部替换</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">REPLACE</span><span class="token punctuation">(</span><span class="token string">&quot;我是一名学生&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;学生&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;教师&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：我是一名教师</span>
</code></pre></div></li></ol> <h6 id="数学函数"><a href="#数学函数" class="header-anchor">#</a> 数学函数</h6> <ol><li><p><code>round()</code></p> <ul><li><p><code>round(num)</code>四舍五入</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token number">1.65</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：2</span>
</code></pre></div></li> <li><p><code>round(num,digit)</code> 四舍五入并保留小数点后digit位</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token number">1.567</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：1.56</span>
</code></pre></div></li></ul></li> <li><p><code>ceil(num)</code> num向上取整即返回&gt;=该参数的最小整数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> CEIL<span class="token punctuation">(</span><span class="token number">1.003</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：2</span>
</code></pre></div></li> <li><p><code>floor(num)</code> num向下取整即返回&lt;=该参数的最大整数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> FLOOR<span class="token punctuation">(</span><span class="token number">9.99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：9</span>
</code></pre></div></li> <li><p><code>truncate(num,digit)</code> 保留小数点后digit位</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">TRUNCATE</span><span class="token punctuation">(</span><span class="token number">1.789999</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：1.7</span>
</code></pre></div></li> <li><p><code>mod(num1,num2)</code> 将num1对num2取余 <code>num1-num1/num2*num2</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">MOD</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：1</span>
</code></pre></div></li> <li><p><code>rand()</code>获取随机数，返回0-1之间的整数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h6 id="日期函数"><a href="#日期函数" class="header-anchor">#</a> 日期函数</h6> <ol><li><p><code>now()</code> 返回当前系统日期+时间</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：2020-03-29 16:49:36</span>
</code></pre></div></li> <li><p><code>curdate()</code> 返回当前系统日期，不包含时间</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：2020-03-29</span>
</code></pre></div></li> <li><p><code>curtime()</code> 返回当前时间，不包含日期</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> CURTIME<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：16:52:43</span>
</code></pre></div></li> <li><p><code>year(date)</code>、<code>month(date)</code>、<code>day(date)</code>、<code>hour(date)</code>、<code>minute(date)</code>、<code>second(date)</code> 获取相应的部分</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：2020</span>

<span class="token keyword">SELECT</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：3</span>

<span class="token keyword">SELECT</span> MONTHNAME<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：March</span>
</code></pre></div></li> <li><p><code>str_to_DATE(date,expression)</code>按照expression的形式格式化日期date</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> STR_TO_DATE<span class="token punctuation">(</span><span class="token string">&quot;2020-3-29&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;%Y-%c-%d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：2020-03-29</span>
</code></pre></div><p>查询入职日期为1992-4-3的员工信息</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	hiredate <span class="token operator">=</span> STR_TO_DATE<span class="token punctuation">(</span> <span class="token string">&quot;4-3 1992&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;%m-%d %Y&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>date_format(date,expression)</code>将日期转换为字符</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> DATE_FORMAT<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;%Y年%m月%d日&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：2020年03月29日</span>
</code></pre></div><p>查询有奖金的员工名和入职日期(xx月/xx日 xx年)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	DATE_FORMAT<span class="token punctuation">(</span> hiredate<span class="token punctuation">,</span> <span class="token string">&quot;%m/%d %y&quot;</span> <span class="token punctuation">)</span> 入职日期
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
</code></pre></div><table><thead><tr><th>格式</th> <th>功能</th></tr></thead> <tbody><tr><td>%Y</td> <td>四位的年份</td></tr> <tr><td>%y</td> <td>二位的年份</td></tr> <tr><td>%m</td> <td>月份(01,02,...,11,12)</td></tr> <tr><td>%c</td> <td>月份(1,2,...,11,12)</td></tr> <tr><td>%d</td> <td>日(01,02...)</td></tr> <tr><td>%H</td> <td>小时(24小时制)</td></tr> <tr><td>%h</td> <td>小时(12小时制)</td></tr> <tr><td>%i</td> <td>分钟(00,01,02,...,59)</td></tr> <tr><td>%s</td> <td>秒(00,01,...59)</td></tr></tbody></table></li></ol> <h6 id="其他函数"><a href="#其他函数" class="header-anchor">#</a> 其他函数</h6> <ol><li><p><code>version()</code> 查看数据库版本号</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> VERSION<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：8.0.19</span>
</code></pre></div></li> <li><p><code>DATABASE()</code> 查看当前数据库</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">DATABASE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：myemployees</span>
</code></pre></div></li> <li><p><code>user()</code> 查看当前用户</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果：root@localhost</span>
</code></pre></div></li> <li><p><code>password(str)</code> 返回字符串str的<code>MysqlSHA1</code>加密形式</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#8.0版本不支持此函数</span>
</code></pre></div></li> <li><p><code>md5(str)</code> 返回字符串str的<code>md5</code>加密形式</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> MD5<span class="token punctuation">(</span><span class="token string">&quot;hahah&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#结果 44bea1375d673dacfa7038a2a6896ae6</span>
</code></pre></div></li></ol> <h6 id="流程控制函数"><a href="#流程控制函数" class="header-anchor">#</a> 流程控制函数</h6> <ol><li><p><code>if(expr1,expr2,expr3)</code> if else 的效果 expr1为条件表达式如果为真返回expr2否则返回expr3</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	commission_pct<span class="token punctuation">,</span>
<span class="token keyword">IF</span>
	<span class="token punctuation">(</span> commission_pct <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">&quot;没奖金&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;有奖金&quot;</span> <span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>case1<code>case 要判断的字段或表达式 when 常量1 then 要显示的值1或语句1;</code> 可以有多条最后<code>else 要显示的值n或语句n end</code></p> <p>查询员工的工资</p> <p>部门号=30，显示的工资为1.1倍</p> <p>部门号=40，显示的工资为1.2倍</p> <p>部门号=50，显示的工资为1.3倍</p> <p>否则工资不变</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	salary 原工资<span class="token punctuation">,</span>
	department_id<span class="token punctuation">,</span>
<span class="token keyword">CASE</span>
		department_id 
		<span class="token keyword">WHEN</span> <span class="token number">30</span> <span class="token keyword">THEN</span>
		salary <span class="token operator">*</span> <span class="token number">1.1</span> 
		<span class="token keyword">WHEN</span> <span class="token number">40</span> <span class="token keyword">THEN</span>
		salary <span class="token operator">*</span> <span class="token number">1.2</span> 
		<span class="token keyword">WHEN</span> <span class="token number">50</span> <span class="token keyword">THEN</span>
		salary <span class="token operator">*</span> <span class="token number">1.3</span> <span class="token keyword">ELSE</span> salary 
	<span class="token keyword">END</span> <span class="token keyword">AS</span> 新工资 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>case2 <code>case when 条件1 then 要显示的值1或语句1</code>可以有多个 <code>else 要显示的值n或语句n end</code></p> <p>查询员工的工资的情况</p> <p>工资&gt;20000 显示A级别</p> <p>工资&gt;15000 显示B级别</p> <p>工资&gt;10000 显示C级别</p> <p>否则显示D级别</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	salary<span class="token punctuation">,</span>
<span class="token keyword">CASE</span>
		
		<span class="token keyword">WHEN</span> salary <span class="token operator">&gt;</span> <span class="token number">20000</span> <span class="token keyword">THEN</span>
		<span class="token string">&quot;A&quot;</span> 
		<span class="token keyword">WHEN</span> salary <span class="token operator">&gt;</span> <span class="token number">15000</span> <span class="token keyword">THEN</span>
		<span class="token string">&quot;B&quot;</span> 
		<span class="token keyword">WHEN</span> salary <span class="token operator">&gt;</span> <span class="token number">10000</span> <span class="token keyword">THEN</span>
		<span class="token string">&quot;C&quot;</span> <span class="token keyword">ELSE</span> <span class="token string">&quot;D&quot;</span> 
	<span class="token keyword">END</span> <span class="token keyword">AS</span> ”级别“ 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
</code></pre></div></li></ol> <h5 id="分组函数"><a href="#分组函数" class="header-anchor">#</a> 分组函数</h5> <ol><li><p><code>sum(field)</code>  求出字段field的和 <code>不支持</code>字符型，日期型字段 忽略<code>NULL</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">SUM</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>avg(field)</code>  求出字段field的平局值 <code>不支持</code>字符型，日期型字段 忽略<code>NULL</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>min(field)</code>  求出字段field的最小值 可以处理任何类型 忽略<code>NULL</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>max(field)</code>  求出字段field的最大值 可以处理任何类型 忽略<code>NULL</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">MAX</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>count(field)</code></p> <ul><li><p><code>count(field)</code> 计算该字段不为<code>NULL</code>的个数 可以处理任何类型</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>commission_pct<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>count(*)</code> 计算所有行</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span> 
</code></pre></div></li></ul></li> <li><p>以上几个函数都可以和distinct搭配实现去重的功能</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">SUM</span><span class="token punctuation">(</span> <span class="token keyword">DISTINCT</span> salary <span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>和分组函数一同查询的字段有限制要求是<code>group by</code>后的字段</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span><span class="token punctuation">,</span>
	employee_id 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
<span class="token comment">#这种写法在MySQL5.0版本下employee_id查询所得到值没有实际含义</span>
<span class="token comment">#在MYSQL8.0版本下则会出现语法错误</span>
</code></pre></div></li></ol> <h4 id="分组查询"><a href="#分组查询" class="header-anchor">#</a> 分组查询</h4> <ul><li>语法：<code>select 分组函数,列(要求出现在group by的后面) from 表 where 筛选条件group by 分组的列表 order by 字句</code></li> <li>注意：查询列表比较特殊，要求是分组函数和group by后出现的字段</li></ul> <ol><li><p>查询每个工种的最高工资</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">MAX</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span><span class="token punctuation">,</span>
	job_id 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	job_id<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查询每个位置上的部门个数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	location_id 
<span class="token keyword">FROM</span>
	departments 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	location_id<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>增加分组前的筛选条件查询邮箱中包含a字符的，每个部门的平均工资</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span><span class="token punctuation">,</span>
	department_id
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	email <span class="token operator">LIKE</span> <span class="token string">&quot;%a%&quot;</span> 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	department_id<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>增加分组后的筛选条件，</p> <p>查询哪个部门的员工个数&gt;2 使用<code>having</code>关键字在语句末尾获取分组后的结果</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 总数<span class="token punctuation">,</span>
	department_id 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	department_id
<span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">#HAVING 总数 &gt; 2;</span>
</code></pre></div><p>查询每个工种有奖金的员工的最高工资&gt;120000的工种编号和最高工资</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">MAX</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span><span class="token punctuation">,</span>
	job_id 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	job_id 
<span class="token keyword">HAVING</span>
	<span class="token function">MAX</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">12000</span><span class="token punctuation">;</span>
</code></pre></div><p>查询领导编号&gt;102的每个领导手下的最低工资&gt;5000的领导编号是哪个，以及其最低工资</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span><span class="token punctuation">,</span>
	manager_id 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	manager_id <span class="token operator">&gt;</span> <span class="token number">102</span> 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	manager_id 
<span class="token keyword">HAVING</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">5000</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>按表达式或函数分组</p> <p>按员工姓名的长度分组，查询每一组的员工个数筛选员工个数&gt;5的有哪些</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	length<span class="token punctuation">(</span> last_name <span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	LENGTH<span class="token punctuation">(</span> last_name <span class="token punctuation">)</span> 
<span class="token keyword">HAVING</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>按多个字段分组</p> <p>查询每个部门每个工种的员工的平均工资</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span><span class="token punctuation">,</span>
	department_id<span class="token punctuation">,</span>
	job_id 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	department_id<span class="token punctuation">,</span>
	job_id<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>添加排序</p> <p>查询每个部门每个工种的员工的平均工资，并且按平居工资的高低显示</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span><span class="token punctuation">,</span>
	department_id<span class="token punctuation">,</span>
	job_id 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	department_id<span class="token punctuation">,</span>
	job_id<span class="token punctuation">;</span>

<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h4 id="连接查询"><a href="#连接查询" class="header-anchor">#</a> 连接查询</h4> <ul><li>含义：又称多表查询，当查询的字段来自于多个表时就需要用到连接查询</li> <li>笛卡尔乘积现象：表一 有m行，表二 有n行，结果m*n行</li> <li>添加有效的连接条件</li> <li>分类
<ul><li>按年代分类
<ul><li>sql92标准：仅仅支持内连接</li> <li>sql99标准：支持所有连接</li></ul></li> <li>按功能分类
<ul><li>内连接
<ol><li>等值连接</li> <li>非等值连接</li> <li>自连接</li></ol></li> <li>外连接
<ol><li>左外连接</li> <li>右外连接</li> <li>全外连接</li></ol></li> <li>交叉连接</li></ul></li></ul></li> <li>案例演示</li></ul> <h5 id="sql92标准"><a href="#sql92标准" class="header-anchor">#</a> sql92标准</h5> <p><strong>等值连接</strong></p> <p>查询<code>beauty</code>表中的女神对应<code>boys</code>表中男朋友，即<code>beauty</code>表中的<code>boyfriend_id</code>对应<code>boys</code>表中的<code>id</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> NAME
	<span class="token string">'name'</span><span class="token punctuation">,</span>
	boyName 
<span class="token keyword">FROM</span>
	beauty<span class="token punctuation">,</span>
	boys 
<span class="token keyword">WHERE</span>
	beauty<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> boys<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre></div><p>查询员工名对应的部门名</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	job_title<span class="token punctuation">,</span>
	<span class="token comment"># 如果不同的表中有相同的字段必须指定表名，如果有别名，必须使用别名</span>
	e<span class="token punctuation">.</span>job_id  
	<span class="token keyword">FROM</span>
	<span class="token comment"># 可以为表取别名</span>
	employees <span class="token keyword">AS</span> e<span class="token punctuation">,</span> 
	jobs <span class="token keyword">AS</span> j 
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span><span class="token punctuation">`</span>job_id<span class="token punctuation">`</span> <span class="token operator">=</span> j<span class="token punctuation">.</span><span class="token punctuation">`</span>job_id<span class="token punctuation">`</span><span class="token punctuation">;</span>
</code></pre></div><p>筛选 查询有奖金的员工名，部门名</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	department_name<span class="token punctuation">,</span>
	commission_pct
<span class="token keyword">FROM</span>
	employees e<span class="token punctuation">,</span>
	departments d 
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id 
	<span class="token operator">AND</span> e<span class="token punctuation">.</span>commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>非等值连接</strong></p> <p>查询员工的工资和工资级别</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	salary<span class="token punctuation">,</span>
	grade_level 
<span class="token keyword">FROM</span>
	employees e<span class="token punctuation">,</span>
	job_grades g 
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>salary <span class="token operator">BETWEEN</span> g<span class="token punctuation">.</span>lowest_sal 
	<span class="token operator">AND</span> g<span class="token punctuation">.</span>highest_sal<span class="token punctuation">;</span>
</code></pre></div><p><strong>自连接</strong></p> <p>查询 员工名和上级的名称</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	m<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
	m<span class="token punctuation">.</span>last_name 
<span class="token keyword">FROM</span>
	employees e<span class="token punctuation">,</span>
	employees m 
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>manager_id <span class="token operator">=</span> m<span class="token punctuation">.</span>manager_id<span class="token punctuation">;</span>
</code></pre></div><h5 id="sql99标准"><a href="#sql99标准" class="header-anchor">#</a> sql99标准</h5> <ul><li><p>内连接<code>inner</code></p></li> <li><p>外连接</p> <ul><li>左外<code>left (outer)</code></li> <li>右外<code>right (outer)</code></li> <li>全外<code>full (outer)</code></li></ul></li> <li><p>交叉连接 <code>cross</code></p></li> <li><p>语法</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	查询列表 
<span class="token keyword">FROM</span>
	表 <span class="token number">1</span> 别名 【连接类型】
	<span class="token keyword">JOIN</span> 表 <span class="token number">2</span> 别名 <span class="token keyword">ON</span> 连接条件 
<span class="token keyword">WHERE</span>
	筛选条件 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	分组 
<span class="token keyword">HAVING</span>
	筛选条件 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	排序列表
</code></pre></div></li></ul> <p><strong>内连接</strong></p> <p>语法：<code>select 查询列表 from 表1 别名 inner join 表2 别名 on 连接条件</code></p> <p>特点：<code>inner join</code>连接和<code>sql92</code>语法中的等值连接效果是一样的，都是查询交集</p> <p><strong>等值连接</strong></p> <p>查询员工名、部门名(调换位置)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	department_name 
<span class="token keyword">FROM</span>
	employees e
	<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> departments d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
<span class="token comment">#表的顺序可调换</span>
</code></pre></div><p>查询名字中包含e的员工名和工种名(添加筛选)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	job_title 
<span class="token keyword">FROM</span>
	employees e
	<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> jobs d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>job_id <span class="token operator">=</span> d<span class="token punctuation">.</span>job_id 
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>last_name <span class="token operator">LIKE</span> <span class="token string">&quot;%e%&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>查询部门个数&gt;3的城市名和部门个数(添加分组+筛选)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	city<span class="token punctuation">,</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 部门个数 
<span class="token keyword">FROM</span>
	locations l
	<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> departments d <span class="token keyword">ON</span> l<span class="token punctuation">.</span>location_id <span class="token operator">=</span> d<span class="token punctuation">.</span>location_id 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	city 
<span class="token keyword">HAVING</span>
	部门个数 <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre></div><p>查询哪个部门的部门员工个数&gt;3的部门名和员工数，并按个数降序(排序)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	department_name 个数<span class="token punctuation">,</span> 
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	departments d
	<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> employees e <span class="token keyword">ON</span> d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	department_name 
<span class="token keyword">HAVING</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">3</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre></div><p>查询员工名、部门名、工种名、并按部门名降序(多表连接)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	department_name<span class="token punctuation">,</span>
	job_title 
<span class="token keyword">FROM</span>
	employees e
	<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> departments d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
	<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> jobs j <span class="token keyword">ON</span> e<span class="token punctuation">.</span>job_id <span class="token operator">=</span> j<span class="token punctuation">.</span>job_id 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	department_name <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>非等值连接</strong></p> <p>查询员工的工资级别</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	salary<span class="token punctuation">,</span>
	grade_level 
<span class="token keyword">FROM</span>
	employees e
	<span class="token comment"># 非等值连接INNER可省略</span>
	<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> job_grades j <span class="token keyword">ON</span> e<span class="token punctuation">.</span>salary <span class="token operator">BETWEEN</span> j<span class="token punctuation">.</span>lowest_sal 
	<span class="token operator">AND</span> j<span class="token punctuation">.</span>highest_sal 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	salary<span class="token punctuation">;</span>
</code></pre></div><p>查询工资级别的个数&gt;20的个数，并且按工资级别降序</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	grade_level 
<span class="token keyword">FROM</span>
	employees e
	<span class="token keyword">JOIN</span> job_grades g <span class="token keyword">ON</span> e<span class="token punctuation">.</span><span class="token punctuation">`</span>salary<span class="token punctuation">`</span> <span class="token operator">BETWEEN</span> g<span class="token punctuation">.</span><span class="token punctuation">`</span>lowest_sal<span class="token punctuation">`</span> 
	<span class="token operator">AND</span> g<span class="token punctuation">.</span><span class="token punctuation">`</span>highest_sal<span class="token punctuation">`</span> 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	grade_level 
<span class="token keyword">HAVING</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">20</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	grade_level <span class="token keyword">DESC</span><span class="token punctuation">;</span>
<span class="token comment">#有些MySQL会报1055错误只需打开my.ini在[mysqld]加入以下一句话不包含#</span>
<span class="token comment">#sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION</span>
</code></pre></div><p><strong>自连接</strong></p> <p>查询员工名字、上级的名字</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	em<span class="token punctuation">.</span>last_name
<span class="token keyword">FROM</span>
	employees e
	<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> employees em <span class="token keyword">ON</span> e<span class="token punctuation">.</span>manager_id <span class="token operator">=</span> em<span class="token punctuation">.</span>employee_id<span class="token punctuation">;</span>
</code></pre></div><p>查询姓名中包含字符k的员工的姓名、上级的名字</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	em<span class="token punctuation">.</span>last_name 
<span class="token keyword">FROM</span>
	employees e
	<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> employees em <span class="token keyword">ON</span> e<span class="token punctuation">.</span>manager_id <span class="token operator">=</span> em<span class="token punctuation">.</span>employee_id 
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>last_name <span class="token operator">LIKE</span> <span class="token string">&quot;%k%&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>外连接</strong></p> <ul><li>用于查一个表中有，另一个表中没有的记录</li> <li>外连接的查询结果为主表中的所有记录，如果从表中有和它匹配的，则显示匹配的值，如果从表中没有和它匹配的则显示为<code>NULL</code></li> <li>外连接查询结果=内连接结果+主表中有而从表中没有的记录</li> <li>左外连接，<code>left join</code>左边的是主表。右外连接，<code>right join</code>右边的是主表</li> <li>左外和右外交换两个表的顺序，可以实现同样的结果</li> <li>全外连接=内连接的结果+表1中有但表2中没有的+表2中有但表1中没有的</li></ul> <p>查询男朋友不在男神表的女神名</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	b<span class="token punctuation">.</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span>
<span class="token keyword">FROM</span>
	beauty b
	<span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> boys bo <span class="token keyword">ON</span> b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> bo<span class="token punctuation">.</span>id 
<span class="token keyword">WHERE</span>
	bo<span class="token punctuation">.</span>id <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre></div><p>查询哪个部门没有员工</p> <ol><li><p>左外</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	d<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>employee_id 
<span class="token keyword">FROM</span>
	departments d
	<span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> employees e <span class="token keyword">ON</span> d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id 
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>employee_id <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>右外</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	d<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>employee_id 
<span class="token keyword">FROM</span>
	employees e
	<span class="token keyword">RIGHT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> departments d <span class="token keyword">ON</span> d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id 
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>employee_id <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>全外，<code>MySQL</code>不支持</p></li></ol> <p><strong>交叉连接</strong></p> <p>sql99语法实现笛卡尔乘积</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	b<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	bo<span class="token punctuation">.</span><span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	beauty b
	<span class="token keyword">CROSS</span> <span class="token keyword">JOIN</span> boys bo<span class="token punctuation">;</span>
</code></pre></div><h5 id="sql92和sql99对比"><a href="#sql92和sql99对比" class="header-anchor">#</a> <code>sql92</code>和<code>sql99</code>对比</h5> <ol><li>功能：<code>sql99</code>支持的校对</li> <li>可读性：<code>sql99</code>实现连接条件和筛选条件的分离，可读性较高</li></ol> <h4 id="子查询"><a href="#子查询" class="header-anchor">#</a> 子查询</h4> <ul><li>含义：出现在其他语句中的select语句，称为子查询或内查询，外部的查询语句，称为主查询或外查询</li> <li>分类
<ul><li>按子查询出现的位置：
<ul><li>select后面：仅仅支持标量子查询</li> <li>from后面：支持表子查询</li> <li>⭐where或having后面：支持标量子查询与列子查询和行子查询</li> <li>exists后面(相关子查询)：表子查询</li></ul></li> <li>按结果集的行列数不同
<ul><li>标量子查询(结果集只有一行一列)</li> <li>列子查询(结果集只有一列多行)</li> <li>行子查询(结果集有一行多列)</li> <li>表子查询(结果集一般为多行多列)</li></ul></li></ul></li></ul> <h5 id="where或者having后"><a href="#where或者having后" class="header-anchor">#</a> where或者having后</h5> <p>特点</p> <ul><li>子查询放在小括号内</li> <li>子查询一般放在条件的右侧</li> <li>子查询的优先级大于主查询</li></ul> <p><strong>标量子查询(单行子查询)</strong></p> <p>标量子查询，一般搭配着单行操作符使用 <code>&gt;</code>,<code>&lt;</code>,<code>&gt;=</code>,<code>&lt;=</code>,<code>=</code>,<code>&lt;&gt;</code></p> <p>谁的工资比<code>Abel</code>高</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span> 
		<span class="token keyword">SELECT</span> 
			salary 
		<span class="token keyword">FROM</span> 
			employees 
		<span class="token keyword">WHERE</span> 
			last_name <span class="token operator">=</span> <span class="token string">&quot;Abel&quot;</span> 
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>查询job_id与141号员工相同，salary比143号员工多的员工姓名，job_id 和工资</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	job_id<span class="token punctuation">,</span>
	salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	job_id <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> job_id <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employee_id <span class="token operator">=</span> <span class="token number">141</span> <span class="token punctuation">)</span> 
<span class="token operator">AND</span> 
	salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employee_id <span class="token operator">=</span> <span class="token number">143</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>返回公司工资最少的员工的last_name,job_id和salary</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	job_id<span class="token punctuation">,</span>
	salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	salary <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>查询最低工资大于50号部门最低工资的部门id和其最低工资</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span><span class="token punctuation">,</span>
	department_id 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	department_id 
<span class="token keyword">HAVING</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span>
			<span class="token function">MIN</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span> 
		<span class="token keyword">FROM</span>
			employees 
		<span class="token keyword">WHERE</span>
		department_id <span class="token operator">=</span> <span class="token number">50</span> 
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>列子查询(多行子查询)</strong></p> <p>一般搭配着多行操作符使用<code>IN</code>,<code>ANY/SOME</code>,<code>ALL</code></p> <p>查询location_id是1400或者1700的部门中的所有员工姓名</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	last_name 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	department_id <span class="token operator">IN</span> <span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span>
			department_id 
		<span class="token keyword">FROM</span>
			departments 
		<span class="token keyword">WHERE</span>
			location_id <span class="token operator">=</span> <span class="token number">1400</span> 
		<span class="token operator">OR</span> location_id <span class="token operator">=</span> <span class="token number">1700</span> 
 <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>查询其他工种中比<code>job_id</code>为<code>IT_PROG</code>部门<code>任一</code>工资低的员工的员工号、姓名、job_id以及salary</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	employee_id<span class="token punctuation">,</span>
	last_name<span class="token punctuation">,</span>
	job_id<span class="token punctuation">,</span>
	salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	job_id <span class="token operator">&lt;&gt;</span> <span class="token string">&quot;IT_PROG&quot;</span> 
	<span class="token operator">AND</span> salary <span class="token operator">&lt;</span> <span class="token keyword">ANY</span><span class="token punctuation">(</span>
        <span class="token keyword">SELECT</span>
            salary
        <span class="token keyword">FROM</span>
            employees 
        <span class="token keyword">WHERE</span>
        job_id <span class="token operator">=</span> <span class="token string">&quot;IT_PROG&quot;</span> 
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>查询其他工种中比<code>job_id</code>为<code>IT_PROG</code>部门<code>所有</code>工资低的员工的员工号、姓名、job_id以及salary</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	employee_id<span class="token punctuation">,</span>
	last_name<span class="token punctuation">,</span>
	job_id<span class="token punctuation">,</span>
	salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	job_id <span class="token operator">&lt;&gt;</span> <span class="token string">&quot;IT_PROG&quot;</span> 
	<span class="token operator">AND</span> salary <span class="token operator">&lt;</span> <span class="token keyword">ALL</span><span class="token punctuation">(</span>
        <span class="token keyword">SELECT</span>
            salary
        <span class="token keyword">FROM</span>
            employees 
        <span class="token keyword">WHERE</span>
        job_id <span class="token operator">=</span> <span class="token string">&quot;IT_PROG&quot;</span> 
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>行子查询</strong></p> <p>结果集一行多列或多行多列</p> <p>查询员工编号最小并且工资最高的员工信息</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	<span class="token punctuation">(</span> employee_id<span class="token punctuation">,</span> salary <span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span>
			<span class="token function">MIN</span><span class="token punctuation">(</span> employee_id <span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token function">MAX</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span> 
		<span class="token keyword">FROM</span>
		employees 
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="select之后的子查询"><a href="#select之后的子查询" class="header-anchor">#</a> SELECT之后的子查询</h5> <p>结果集必须为一行一列</p> <p>查询每个部门的员工个数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 
	d<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span> 
		<span class="token keyword">SELECT</span> 
			<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 
		<span class="token keyword">FROM</span> 
			employees e 
		<span class="token keyword">WHERE</span> 
			e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id 
	<span class="token punctuation">)</span> 个数
<span class="token keyword">FROM</span>
	departments d<span class="token punctuation">;</span>
</code></pre></div><p>查询员工工号=102的部门名</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token punctuation">(</span> 
		<span class="token keyword">SELECT</span> 
			department_name 
		<span class="token keyword">FROM</span> 
			departments d 
		<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> 
			employees e 
		<span class="token keyword">ON</span> 
			d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id 
		<span class="token keyword">WHERE</span> 
			e<span class="token punctuation">.</span>employee_id <span class="token operator">=</span> <span class="token number">102</span> 
	<span class="token punctuation">)</span> 部门名<span class="token punctuation">;</span>
</code></pre></div><h5 id="from之后的子查询"><a href="#from之后的子查询" class="header-anchor">#</a> FROM之后的子查询</h5> <p>将子查询的结果充当一张表，要求必须起别名</p> <p>查询每个部门的平均工资等级</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	g<span class="token punctuation">.</span>grade_level 
<span class="token keyword">FROM</span>
	<span class="token punctuation">(</span> 
		<span class="token keyword">SELECT</span> 
			<span class="token function">AVG</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span> ag<span class="token punctuation">,</span> 
			department_id 
		<span class="token keyword">FROM</span> 
			employees 
		<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> 
			department_id 
	<span class="token punctuation">)</span> e
	<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> 
		job_grades g 
	<span class="token keyword">ON</span> 
		e<span class="token punctuation">.</span>ag 
	<span class="token operator">BETWEEN</span> g<span class="token punctuation">.</span>lowest_sal <span class="token operator">AND</span> g<span class="token punctuation">.</span>highest_sal<span class="token punctuation">;</span>
</code></pre></div><h5 id="exists之后-相关子查询"><a href="#exists之后-相关子查询" class="header-anchor">#</a> exists之后(相关子查询)</h5> <p>语法<code>exists(完整的查询语句)</code>结果为0或1，反应子查询的结果是否存在</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">EXISTS</span>
	<span class="token punctuation">(</span> <span class="token keyword">SELECT</span> employee_id <span class="token keyword">FROM</span> employees <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>查询有员工的部门名</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	department_name 
<span class="token keyword">FROM</span>
	departments d 
<span class="token keyword">WHERE</span>
	<span class="token keyword">EXISTS</span> <span class="token punctuation">(</span> 
                <span class="token keyword">SELECT</span> 
                    <span class="token operator">*</span> 
                <span class="token keyword">FROM</span> 
                    employees e 
                <span class="token keyword">WHERE</span> 
                    d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id 
    		<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>查询没有女朋友的男神信息</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	bo<span class="token punctuation">.</span><span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	boys bo 
<span class="token keyword">WHERE</span>
	<span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> 
		<span class="token punctuation">(</span> 
			<span class="token keyword">SELECT</span> 
				boyfriend_id 
			<span class="token keyword">FROM</span> 
				beauty b 
			<span class="token keyword">WHERE</span> 
				bo<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>boyfriend_id 
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="分页查询"><a href="#分页查询" class="header-anchor">#</a> 分页查询</h4> <ul><li><p>应用场景：当要显示的数据，一页显示不全，需要分页提交sql请求</p></li> <li><p>语法</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 
	查询列表
<span class="token keyword">FROM</span> 
	表
	连接类型 <span class="token keyword">JOIN</span> 
	表<span class="token number">2</span>
<span class="token keyword">ON</span> 
	连接条件
<span class="token keyword">WHERE</span> 
	筛选条件
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> 
	分组字段
<span class="token keyword">HAVING</span> 
	分组后的筛选
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	排序后的字段
<span class="token keyword">LIMIT</span> <span class="token keyword">offset</span><span class="token punctuation">,</span> size<span class="token punctuation">;</span>
<span class="token comment"># offset 要显示条目的其实索引(起始索引索引从0开始)</span>
<span class="token comment"># offset 可省略，默认从0开始</span>
<span class="token comment"># size 要显示的条目个数</span>
</code></pre></div></li> <li><p><code>limit</code>语句放在查询语句的最后</p> <p>查询前5条员工信息</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">;</span>
</code></pre></div><p>查询第十一条到第二十五条</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">LIMIT</span> <span class="token number">10</span><span class="token punctuation">,</span>
	<span class="token number">15</span><span class="token punctuation">;</span>
</code></pre></div><p>有奖金的员工信息，并且工资较高的前十名</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	salary <span class="token keyword">DESC</span> 
<span class="token keyword">LIMIT</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="union联合查询"><a href="#union联合查询" class="header-anchor">#</a> <code>union</code>联合查询</h4> <p>合并：将多条查询语句的结果合并成一个结果</p> <ul><li><p>快速入门:查询部门编号<code>&gt;90</code>或邮箱包含<code>a</code>的员工信息</p> <p>查询语句1</p> <p>union</p> <p>查询语句2</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	department_id <span class="token operator">&gt;</span> <span class="token number">90</span> <span class="token keyword">UNION</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	email <span class="token operator">LIKE</span> <span class="token string">'%a%'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>应用：当我们要查询的结果，且多个表之间没有直接的连接关系，但查询的信息一致时</p></li> <li><p>特点：</p> <ol><li>要求多条查询语句的查询列数是一致的</li> <li>最后查询的字段名为第一条查询语句的字段名</li> <li>要求每条查询语句的列顺序一致</li> <li>联合查询会自动去重<code>union all</code>不去重</li></ol></li></ul> <h3 id="dml语言"><a href="#dml语言" class="header-anchor">#</a> DML语言</h3> <p><code>DML</code>数据操作语言</p> <ul><li>插入：<code>insert</code></li> <li>修改：<code>update</code></li> <li>删除：<code>delete</code></li></ul> <h4 id="插入语句"><a href="#插入语句" class="header-anchor">#</a> 插入语句</h4> <ul><li><p>原则：</p> <ol><li>插入的值的类型要与列的类型一致或兼容</li> <li>列数和值的个数保持一致</li> <li>可以省略列名，默认所有列，顺序为表中列的顺序</li> <li>字符、日期加单引号或双引号</li></ol></li> <li><p>方式一语法</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> 表名<span class="token punctuation">(</span>列名<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在<code>beauty</code>表中插入一条新的记录</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty <span class="token punctuation">(</span> id<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> borndate<span class="token punctuation">,</span> phone<span class="token punctuation">,</span> photo<span class="token punctuation">,</span> boyfriend_id <span class="token punctuation">)</span>
<span class="token keyword">VALUES</span>
	<span class="token punctuation">(</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">'唐艺昕'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'1990-4-23'</span><span class="token punctuation">,</span> <span class="token string">'18999999999'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>支持插入多条</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty <span class="token punctuation">(</span> id<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> borndate<span class="token punctuation">,</span> phone<span class="token punctuation">,</span> photo<span class="token punctuation">,</span> boyfriend_id <span class="token punctuation">)</span>
<span class="token keyword">VALUES</span>
	<span class="token punctuation">(</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token string">'唐艺昕'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'1990-4-23'</span><span class="token punctuation">,</span> <span class="token string">'18999999999'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">'唐艺昕'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'1990-4-23'</span><span class="token punctuation">,</span> <span class="token string">'18999999999'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token string">'唐艺昕'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'1990-4-23'</span><span class="token punctuation">,</span> <span class="token string">'18999999999'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>支持子查询,把子查询的内容插入到指定表中</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>phone<span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token string">'松溪'</span><span class="token punctuation">,</span> <span class="token string">'12345678901'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>方式二语法</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> 表名 <span class="token keyword">set</span> 列名<span class="token operator">=</span>值<span class="token punctuation">,</span>列名<span class="token operator">-</span>值<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><p>在<code>beauty</code>表中插入一条新的记录</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty 
<span class="token keyword">SET</span> id <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'娜扎'</span><span class="token punctuation">,</span>
phone <span class="token operator">=</span> <span class="token string">'110'</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="修改语句"><a href="#修改语句" class="header-anchor">#</a> 修改语句</h4> <ul><li><p>修改单表的记录</p> <p>语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">update</span> 表名 
<span class="token keyword">set</span> 列<span class="token operator">=</span>新值<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">where</span> 筛选条件<span class="token punctuation">;</span>
</code></pre></div><p>案例：修改<code>beauty</code>表姓唐的<code>phone</code>为<code>1234</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> beauty 
<span class="token keyword">SET</span> phone <span class="token operator">=</span> <span class="token string">&quot;1234&quot;</span> 
<span class="token keyword">WHERE</span>
	NAME <span class="token operator">LIKE</span> <span class="token string">'唐%'</span>
</code></pre></div></li> <li><p>修改多表的记录</p> <p>语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">update</span> 表<span class="token number">1</span> 别名
<span class="token keyword">inner</span> <span class="token operator">|</span> <span class="token keyword">left</span> <span class="token operator">|</span> <span class="token keyword">right</span> <span class="token keyword">join</span> 表<span class="token number">2</span> 别名
<span class="token keyword">on</span> 连接条件
<span class="token keyword">set</span> 列<span class="token operator">=</span>值<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">where</span> 筛选条件
</code></pre></div><p>案例：</p> <p>修改张无忌的女朋友的手机号为114</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> boys b
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> beauty g <span class="token keyword">ON</span> b<span class="token punctuation">.</span>id <span class="token operator">=</span> g<span class="token punctuation">.</span>boyfriend_id 
<span class="token keyword">SET</span> g<span class="token punctuation">.</span>phone <span class="token operator">=</span> <span class="token string">&quot;123&quot;</span> 
<span class="token keyword">WHERE</span>
	b<span class="token punctuation">.</span>boyName <span class="token operator">=</span> <span class="token string">'张无忌'</span><span class="token punctuation">;</span>
</code></pre></div><p>修改没有男朋友的女神的男朋友编号都为<code>2</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> boys b
<span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> beauty g <span class="token keyword">ON</span> b<span class="token punctuation">.</span>id <span class="token operator">=</span> g<span class="token punctuation">.</span>boyfriend_id 
<span class="token keyword">SET</span> g<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">WHERE</span>
	g<span class="token punctuation">.</span>boyfriend_id <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="删除语句"><a href="#删除语句" class="header-anchor">#</a> 删除语句</h4> <ul><li><p>方式一</p> <p>单表删除语法</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 筛选条件
</code></pre></div><p>案例：删除<code>beauty</code>表中<code>phone</code>以<code>9</code>结尾的记录</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELETE</span> 
<span class="token keyword">FROM</span>
	beauty 
<span class="token keyword">WHERE</span>
	phone <span class="token operator">LIKE</span> <span class="token string">'%9'</span><span class="token punctuation">;</span>
</code></pre></div><p>多表删除语法</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">delete</span> 别名 <span class="token keyword">from</span> 表<span class="token number">1</span> 别名<span class="token punctuation">,</span> <span class="token keyword">inner</span><span class="token operator">|</span><span class="token keyword">left</span><span class="token operator">|</span><span class="token keyword">right</span> <span class="token keyword">join</span> 表<span class="token number">2</span> 别名 <span class="token keyword">on</span> 连接条件 <span class="token keyword">where</span> 筛选条件<span class="token punctuation">;</span>
</code></pre></div><p>案例：删除张无忌的女朋友的信息</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELETE</span> g 
<span class="token keyword">FROM</span>
	beauty g
	<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> boys b <span class="token keyword">ON</span> b<span class="token punctuation">.</span>id <span class="token operator">=</span> g<span class="token punctuation">.</span>boyfriend_id 
<span class="token keyword">WHERE</span>
	b<span class="token punctuation">.</span>boyName <span class="token operator">=</span> <span class="token string">'张无忌'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>方式二</p> <p><code>truncate</code>语法 不能加筛选条件</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">truncate</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span>
</code></pre></div><p>案例：清空<code>boys</code>表</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">truncate</span> <span class="token keyword">table</span> boys<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>两种方式的区别</p> <ol><li><code>delete</code>可以加<code>where</code>条件,<code>truncate</code>不能加筛选条件</li> <li><code>truncate</code>，效率比<code>delete</code>高</li> <li>如果要删除的表中有自增长列，如果用<code>delete</code>删除后，再插入数据，自增长列的值从断点开始，而<code>truncate</code>删除后，再插入数据自增列从<code>1</code>开始</li> <li><code>truncate</code>删除没有返回值，<code>delete</code>删除有返回值</li> <li><code>truncate</code>删除不能回滚,<code>delete</code>删除可以回滚</li></ol></li></ul> <h3 id="ddl语言"><a href="#ddl语言" class="header-anchor">#</a> DDL语言</h3> <p>数据定义语言用于库和表的管理</p> <ol><li>创建：<code>create</code></li> <li>修改：<code>alter</code></li> <li>删除：<code>drop</code></li></ol> <h4 id="库的管理"><a href="#库的管理" class="header-anchor">#</a> 库的管理</h4> <ul><li><p>库的创建</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> 数据库名<span class="token punctuation">;</span>
</code></pre></div><p>创建数据库<code>books</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span>
<span class="token keyword">IF</span>
	<span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> books<span class="token punctuation">;</span>
</code></pre></div><p>库的修改：更改库的字符集</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> books <span class="token keyword">CHARACTER</span> 
<span class="token keyword">SET</span> gbk<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>库的删除：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">is</span> <span class="token keyword">EXISTS</span> books<span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="表的管理"><a href="#表的管理" class="header-anchor">#</a> 表的管理</h4> <ul><li><p>表的创建</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> 表明<span class="token punctuation">(</span>
	<span class="token comment"># 约束以及长度可选</span>
	列名 列的类型<span class="token punctuation">(</span>长度<span class="token punctuation">)</span> 约束<span class="token punctuation">,</span>
	列名 列的类型<span class="token punctuation">(</span>长度<span class="token punctuation">)</span> 约束<span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	列名 列的类型<span class="token punctuation">(</span>长度<span class="token punctuation">)</span> 约束
<span class="token punctuation">)</span>
</code></pre></div><p>创建表<code>book</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> book <span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>						<span class="token comment">#编号</span>
	book_name <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span> <span class="token number">20</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>	<span class="token comment">#图书名</span>
	price <span class="token keyword">DOUBLE</span><span class="token punctuation">,</span>				<span class="token comment">#价格</span>
	author_id <span class="token keyword">INT</span><span class="token punctuation">,</span>				<span class="token comment">#作者编号</span>
	publish_date <span class="token keyword">TIMESTAMP</span> 		<span class="token comment">#出版日期</span>
<span class="token punctuation">)</span>
</code></pre></div><p>创建表<code>author</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> author<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	author_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	nation <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">#国籍</span>
<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>表的修改</p> <p>语法</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">add</span><span class="token operator">|</span><span class="token keyword">drop</span><span class="token operator">|</span><span class="token keyword">modify</span><span class="token operator">|</span>change <span class="token punctuation">[</span><span class="token keyword">column</span><span class="token punctuation">]</span> 列名 <span class="token punctuation">[</span>列的类型 约束<span class="token punctuation">]</span>
</code></pre></div><p>修改列名：修改<code>book</code>表中<code>publish_date</code> 为 <code>publishdate</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> book CHANGE <span class="token keyword">COLUMN</span> publish_date publishdate <span class="token keyword">TIMESTAMP</span><span class="token punctuation">;</span>
</code></pre></div><p>修改列的类型或约束：修改<code>publishdate</code>的类型为<code>DATETIME</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> book <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> publishdate <span class="token keyword">DATETIME</span><span class="token punctuation">;</span>
</code></pre></div><p>添加新列：为表<code>author</code>添加一个年薪<code>annual</code>列</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> author <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> annual <span class="token keyword">DOUBLE</span><span class="token punctuation">;</span>

<span class="token comment">#可以添加到指定列名之前/后</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> author <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> annual <span class="token keyword">DOUBLE</span> <span class="token keyword">FIRST</span><span class="token operator">/</span><span class="token keyword">AFTER</span> 列名<span class="token punctuation">;</span>
</code></pre></div><p>删除列：删除<code>author</code>表中的<code>annual</code>列</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> author <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> annual<span class="token punctuation">;</span>
</code></pre></div><p>修改表名：修改表<code>author</code>的名字为<code>book_author</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> author <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> book_author<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>表的删除：删除<code>book_author</code>表</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> book_author<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>表的复制</p> <p>仅仅复制表的结构：将<code>author</code>表复制到<code>copy</code>表</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> copy <span class="token operator">LIKE</span> author<span class="token punctuation">;</span>
</code></pre></div><p>复制表的结构和数据：将<code>author</code>表复制到<code>copy</code>表</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> copy <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> author<span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="sql数据类型"><a href="#sql数据类型" class="header-anchor">#</a> SQL数据类型</h3> <h4 id="数值型"><a href="#数值型" class="header-anchor">#</a> 数值型</h4> <ul><li><p>整型</p> <table><thead><tr><th>整数类型</th> <th>字节</th> <th>范围</th></tr></thead> <tbody><tr><td>tinyint</td> <td>1</td> <td>有符号：-2^7~2^7-1 无符号：0~2^8-1</td></tr> <tr><td>smallint</td> <td>2</td> <td>有符号：-2^15~2^15-1 无符号：0~2^16-1</td></tr> <tr><td>mediumint</td> <td>3</td> <td>有符号：-2^23~2^23-1 无符号：0~2^24-1</td></tr> <tr><td>int/integer</td> <td>4</td> <td>有符号：-2^31~2^31-1 无符号：0~2^32-1</td></tr> <tr><td>Bigint</td> <td>8</td> <td>有符号：-2^63~2^63-1 无符号：0~2^64-1</td></tr></tbody></table> <p>设置无符号和有符号(加关键字<code>unsigned</code>)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tab<span class="token punctuation">(</span>
	t1 <span class="token keyword">INT</span><span class="token punctuation">,</span>
	t2 <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>插入的值超出临界值会设置临界值<code>mysql 5.x</code>,<code>mysql 8.x</code>会报错误。</p> <p>不设置长度，会有默认的长度，长度仅代表显示的最大宽度。</p> <p><code>ZEROFILL</code>零填充，设置零填充之后，默认无符号</p></li> <li><p>小数</p> <p>定点数</p> <table><thead><tr><th>浮点数</th> <th>字节</th></tr></thead> <tbody><tr><td>float(M, D)</td> <td>4</td></tr> <tr><td>double(M, D)</td> <td>8</td></tr></tbody></table> <p>浮点数</p> <table><thead><tr><th>定点数</th> <th>字节</th> <th>范围</th></tr></thead> <tbody><tr><td>DEC(M, D)，DECIMAL(M, D)</td> <td>M+2</td> <td>最大取值范围与double相同，给定decimal的有效值范围由M和D决定，默认(10, 0)</td></tr></tbody></table> <p>在小数中<code>M</code>代表长度<code>D</code>小数点保留的位数</p> <p><code>M</code>、<code>D</code>都可以省略如果是<code>decimal</code>、则默认为<code>10</code>、<code>D</code>默认为<code>0</code>，如果是<code>float</code>和<code>double</code>，则会根据插入的数值的精度来决定</p> <p>定点型的精确度较高</p></li></ul> <h4 id="字符型"><a href="#字符型" class="header-anchor">#</a> 字符型</h4> <ul><li><p>较短的文本：<code>char</code>，<code>varchar</code></p> <table><thead><tr><th>字符串类型</th> <th>最多字符数</th> <th>描述及存储要求</th></tr></thead> <tbody><tr><td>char(M)</td> <td>M可以省略默认为1</td> <td>M为0~255</td></tr> <tr><td>varchar(M)</td> <td>M不可省略</td> <td>M为0~65535</td></tr> <tr><td>ENUM(list)</td> <td>list,为可插入的数据</td> <td>枚举</td></tr> <tr><td>SET(list)</td> <td>list为可插入的数据</td> <td>与ENUM不同的是SET可插入多个</td></tr></tbody></table> <p><code>char</code>固定长度的字符，空间耗费高但效率好，</p> <p><code>varchar</code>可变长度的字符，比较节省空间，效率低</p></li> <li><p>长的文本：<code>text</code>、<code>blob</code>较长的二进制</p></li> <li><p>日期型</p> <table><thead><tr><th>类型</th> <th>字节</th> <th>最小值</th> <th>最大值</th></tr></thead> <tbody><tr><td>date</td> <td>4</td> <td>1000-01-01</td> <td>9999-12-31</td></tr> <tr><td>datetime</td> <td>8</td> <td>1000-01-01</td> <td>9999-12-31 23:59:59</td></tr> <tr><td>timestamp</td> <td>4</td> <td>19700101080001</td> <td>2038年的某个时刻</td></tr> <tr><td>time</td> <td>3</td> <td>-838:59:59</td> <td>838:59:59</td></tr> <tr><td>year</td> <td>1</td> <td>1901</td> <td>2155</td></tr></tbody></table> <p><code>timestamp</code>和实际的时区有关，更能反应实际的日期，而<code>datetime</code>则只能反映出插入时的当地时区</p></li></ul> <h3 id="常见约束"><a href="#常见约束" class="header-anchor">#</a> 常见约束</h3> <h4 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍：</h4> <p>一种限制，用于限制表中的数据，为了保证表中的数据的准确和可靠性</p> <ul><li><code>NOT NULL</code>非空，用于保证该字段的值不能为空</li> <li><code>DEFAULT</code>默认值，用于保证该字段有默认值</li> <li><code>PRIMARY KEY</code>主键，用于保证该字段唯一性，并且非空，可以有多个列形成一个主键</li> <li><code>UNIQUE</code>用于保证该字段的唯一性，可以为空</li> <li><code>CHECK</code>检查约束<code>mysql</code>不支持</li> <li><code>FOREIGN KEY</code>外键，用于限制两个表的关系，用于保证该字段的值必须来自于主表的关联列的值。在从表中添加外键约束，引用主表中某列的值，插入数据时先插入主表，再插入从表。</li></ul> <p>添加约束的时机</p> <ul><li>创建表时</li> <li>修改表时</li></ul> <p>约束的分类</p> <ul><li><p>列级约束</p> <p>外键，检查约束没有效果</p></li> <li><p>表级约束</p> <p>除了非空和默认其他均支持</p></li></ul> <p>检查索引</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> 表名<span class="token punctuation">;</span>
</code></pre></div><h4 id="案例"><a href="#案例" class="header-anchor">#</a> 案例</h4> <p>创建表时添加约束</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stuinfo<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span> 						   <span class="token comment">#主键</span>
	stuName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">,</span> 				   <span class="token comment">#非空</span>
	gender <span class="token keyword">CHAR</span> <span class="token keyword">CHECK</span><span class="token punctuation">(</span>gender<span class="token operator">=</span><span class="token string">'男'</span> <span class="token operator">OR</span> gender<span class="token operator">=</span><span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">#检查</span>
	seat <span class="token keyword">INT</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span> 							  <span class="token comment">#唯一</span>
	age <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">18</span><span class="token punctuation">,</span> 						  <span class="token comment">#默认值  </span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>添加表级约束</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stuinfo<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	stuname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	gender <span class="token keyword">CHAR</span><span class="token punctuation">,</span>
	seat <span class="token keyword">INT</span><span class="token punctuation">,</span>
	age <span class="token keyword">INT</span><span class="token punctuation">,</span>
	majorid <span class="token keyword">INT</span><span class="token punctuation">,</span>
	
	<span class="token keyword">CONSTRAINT</span> pk <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>					<span class="token comment">#为id添加主键</span>
	<span class="token keyword">CONSTRAINT</span> up <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>seat<span class="token punctuation">)</span><span class="token punctuation">,</span>						<span class="token comment">#唯一</span>
	<span class="token keyword">CONSTRAINT</span> ck <span class="token keyword">CHECK</span><span class="token punctuation">(</span>gender<span class="token operator">=</span><span class="token string">'男'</span> <span class="token operator">OR</span> gender<span class="token operator">=</span><span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">#检查</span>
	<span class="token keyword">CONSTRAINT</span> fk <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>majorid<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> major<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token comment">#外键</span>
    
    <span class="token comment">#CONSTRAINT 名字 可省略</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>修改表时添加约束</p> <p>列级</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> 字段名 类型 约束
</code></pre></div><p>表级</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>字段名<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>外键</p> <p>级联删除：在删除主表中的记录时可以将从表中引用该记录的记录一同删除</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> 外键名 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>字段名<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> 主表<span class="token punctuation">(</span>字段<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span><span class="token punctuation">;</span>
</code></pre></div><p>级联置空：在删除主表中的记录可以将从表中引用该记录的外键置空</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> 外键名 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>字段名<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> 主表<span class="token punctuation">(</span>字段<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">SET</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="标识列"><a href="#标识列" class="header-anchor">#</a> 标识列</h4> <ul><li><p>又称为自增长列，可以不用手动插入值，系统提供默认的序列值</p> <p>标识列可以和任意<code>key</code>搭配</p> <p>一个表中至多一个标识列</p> <p>标识列只能是数值型</p></li> <li><p>案例</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tab_auto<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>设置自增长的步长</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SET</span> auto_increment_increment<span class="token operator">=</span><span class="token number">3</span>

<span class="token comment"># 默认值为1</span>
</code></pre></div></li></ul> <h3 id="tcl语言"><a href="#tcl语言" class="header-anchor">#</a> TCL语言</h3> <p><code>Transaction Control Language</code>事物控制语言</p> <p>事物：一个或一组sql语句组成一个执行单元，这个执行单元要么全部执行，要么全部不执行。</p> <p>事物的<code>ACID</code>属性</p> <ol><li>原子性：原子性是指事物是一个不可分割的工作单位，事物中的操作要么都发生，要么都不发生</li> <li>一致性：事物必须使数据库从一个一致性状态变换到另外一个一致性状态</li> <li>隔离性：事物的隔离性是指一个事物的执行不能被其他事物干扰，即一个事物内部的操作及使用的数据对并发的其他事物是隔离的，并发执行的各个事物之间不能相互干扰</li> <li>持久性：持久性是指一个事物一旦被提交，它对数据库中数据的改变就是永久性的，接下来的其他操作和数据库故障不应该对其有任何影响</li></ol> <h4 id="mysql的存储引擎"><a href="#mysql的存储引擎" class="header-anchor">#</a> MySQL的存储引擎</h4> <ul><li>概念：在<code>mysql</code>中的数据用各种不同的技术存储在文件(或内存)中</li> <li>通过<code>show engines</code>可以查看mysql支持的存储引擎</li> <li>在mysql中用的最多的存储引擎有：<code>innodb</code>、<code>myisam</code>、<code>memory</code>等。其中<code>innodb</code>支持事物，而<code>myisam</code>、<code>memory</code>不支持事物</li></ul> <h4 id="事物的创建"><a href="#事物的创建" class="header-anchor">#</a> 事物的创建</h4> <p>隐式事物：事物没有明显的开启和结束的标记<code>insert</code>、<code>update</code>、<code>delete</code>语句</p> <p>显示事物：事物有明显的开启和结束的标记，前提是先设置自动提交功能为禁用</p> <p>查看自动提交</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'autocommit'</span><span class="token punctuation">;</span>
</code></pre></div><p>设置自动提交功能为禁用，只针对当前会话</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SET</span> autocommit<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
</code></pre></div><p>显示事物的步骤</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SET</span> autocommit<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span> <span class="token comment">#开启事物，可选的</span>

<span class="token comment">#编写事物中的sql包括(select insert update delete)</span>
语句<span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">savepoint</span> 回滚点名称<span class="token punctuation">;</span> <span class="token comment">#设置回滚点</span>
语句<span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span> <span class="token comment">#提交事物</span>
<span class="token keyword">rollback</span><span class="token punctuation">;</span> <span class="token comment">#回滚事物默认回滚所有，可以加上回滚点，TRUNCATE不能回滚</span>
</code></pre></div><p>案例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> account<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	balance <span class="token keyword">DOUBLE</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> account<span class="token punctuation">(</span>username<span class="token punctuation">,</span>balance<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'张无忌'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'赵敏'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#开启事物</span>
<span class="token keyword">SET</span> autocommit<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
<span class="token comment">#编写一组事物的语句</span>
<span class="token keyword">UPDATE</span> account <span class="token keyword">SET</span> balance<span class="token operator">=</span><span class="token number">500</span> <span class="token keyword">WHERE</span> username<span class="token operator">=</span><span class="token string">'张无忌'</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> account <span class="token keyword">SET</span> balance<span class="token operator">=</span><span class="token number">1500</span> <span class="token keyword">WHERE</span> username<span class="token operator">=</span><span class="token string">'赵敏'</span><span class="token punctuation">;</span>
<span class="token comment">#结束事物</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="事务的隔离级别"><a href="#事务的隔离级别" class="header-anchor">#</a> 事务的隔离级别</h4> <ul><li><p>对于同时运行的多个事务，当这些事务访问数据库中相同的数据时，如果没有采取必要的隔离机制，就会导致各种并发问题</p> <ul><li><p>脏读：对于两个事务<code>T1</code>、<code>T2</code>，T1读取了已经被T2更新但还没有被提交的字段之后，若T2回滚，T1读取的内容就是临时且无效的</p></li> <li><p>不可重复读：对于两个事务T1，T2，T1读取了一个字段，然后T2更新了字段之后，T1再次读取同一个字段，值就不同了。</p></li> <li><p>幻读：对于两个事务T1，T2，T1从一个表中读取了一个字段，然后T2在该表中插入了一些新的行之后，如果T1再次读取同一个表，就会多出几行数据</p></li></ul></li> <li><p>数据库事务的隔离性：数据库系统必须具有隔离并发运行各个事务的能力，使它们不会相互影响，避免各种并发问题</p></li> <li><p>一个事务与其他事务隔离程度称为隔离级别，数据库规定了多种事务隔离级别，不同隔离级别分别对应不同的干扰程度，隔离级别越高，数据的一致性就越好，但并发生越弱</p></li> <li><p>数据库提供的事务隔离级别</p> <table><thead><tr><th>隔离级别</th> <th>描述</th></tr></thead> <tbody><tr><td>READ UNCOMMITED(读未提交数据)</td> <td>允许事务读取未被其他事务提交的变更，脏读，不可重复读和幻读的问题都会出现</td></tr> <tr><td>READ COMMITED(读已提交数据)</td> <td>只允许事务读取已经被其他事务提交的变更，可以避免脏读，但不可重复读和幻读问题仍然会出现</td></tr> <tr><td>REPEATABLE READ(可重复读)</td> <td>确保事务可以从一个字段中读取相同的值，这个事务持续期间，禁止其他事务对这个字段进行更新，可以避免脏读和不可重复读，但幻读仍然存在。</td></tr> <tr><td>SERIALIZABLE(串行化)</td> <td>确保事务可以从一个表中读取相同的行，这个事务持续期间，禁止其他事务对该表执行插入，更新和删除操作，所有并发问题都可以避免，但性能十分低下。</td></tr></tbody></table></li> <li><p><code>Mysql</code>支持四种事务隔离级别，<code>Mysql</code>默认的事务隔离级别为：<code>REPEATABLE READ</code></p></li> <li><p>查看事务的隔离级别</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#5.0</span>
<span class="token keyword">SELECT</span> @<span class="token variable">@tx_isolation</span>

<span class="token comment">#8.0</span>
<span class="token keyword">SELECT</span> @<span class="token variable">@transaction_isolation</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>设置当前会话隔离级别</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SET</span> <span class="token keyword">SESSION</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">ISOLATION</span> <span class="token keyword">LEVEL</span> <span class="token keyword">READ</span> <span class="token keyword">UNCOMMITTED</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="视图"><a href="#视图" class="header-anchor">#</a> 视图</h3> <ul><li><p>含义：虚拟表，和普通的表一样使用。是一种虚拟存在的表，行和列的数据来自定义视图的查询中使用的表，并且是在使用视图时动态生成的，只保存了sql逻辑，不保存查询结果</p></li> <li><p>优点</p> <p>重用sql语句</p> <p>简化复杂的sql操作，不必知道它的查询细节</p> <p>保护数据，提高安全性</p></li> <li><p>创建视图</p> <p>语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 封装sql语句为一个视图</span>
<span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> 视图的名字
<span class="token keyword">AS</span> 
<span class="token keyword">sql</span>语句<span class="token punctuation">;</span>

<span class="token comment"># 调用视图</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> 视图 筛选条件
</code></pre></div><p>案例：</p> <p>查询姓名中包含a字符的员工名、部门名和工种信息</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 创建</span>
<span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> v 
<span class="token keyword">AS</span> <span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	department_name<span class="token punctuation">,</span>
	job_title 
<span class="token keyword">FROM</span>
	employees e
	<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> departments d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
	<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> jobs j <span class="token keyword">ON</span> e<span class="token punctuation">.</span>job_id <span class="token operator">=</span> j<span class="token punctuation">.</span>job_id<span class="token punctuation">;</span>
	
<span class="token comment"># 使用</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> v <span class="token keyword">WHERE</span> last_name <span class="token operator">LIKE</span> <span class="token string">'%a%'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>修改视图</p> <p>方式一</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">VIEW</span> 视图名
<span class="token keyword">AS</span>
查询语句<span class="token punctuation">;</span>
</code></pre></div><p>方式二</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">VIEW</span> 视图名
<span class="token keyword">AS</span>
查询语句<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>删除视图</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> 视图名<span class="token punctuation">,</span>视图名<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查看视图</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DESC</span> 视图名<span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> 视图名<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>视图的更新</p> <p>具备如下特点的视图不允许更新</p> <ol><li>包含关键字<code>分组函数</code>,<code>distinct</code>,<code>group by</code>,<code>having</code>,<code>union</code>或者<code>union all</code></li> <li>常量视图</li> <li><code>select</code>中包含子查询</li> <li><code>join</code>能<code>update</code></li> <li><code>from</code>一个不能更新的视图</li> <li><code>where</code>子句的子查询引用了子句中的表</li></ol> <p>插入</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> 视图名<span class="token punctuation">(</span>字段名<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span>值<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>修改</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> 视图名 <span class="token keyword">SET</span> 字段<span class="token operator">=</span><span class="token string">'值'</span> <span class="token keyword">WHERE</span> 筛选条件<span class="token punctuation">;</span>
</code></pre></div><p>删除</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> 视图名 <span class="token keyword">WHERE</span> 筛选条件<span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="五-变量"><a href="#五-变量" class="header-anchor">#</a> 五.变量</h2> <h3 id="系统变量"><a href="#系统变量" class="header-anchor">#</a> 系统变量</h3> <p>含义：变量由系统提供，不是用户定义的，属于服务器层面</p> <h4 id="全局变量"><a href="#全局变量" class="header-anchor">#</a> 全局变量</h4> <ul><li><p>作用域：服务器每次启动将为所有的系统变量赋初始值，针对于所有的会话(连接有效)，重启重置。</p></li> <li><p>查看全局变量</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 查看全局变量</span>
<span class="token keyword">SHOW</span> <span class="token keyword">GLOBAL</span> VARIABLES<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查看满足条件的部分全局变量</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">GLOBAL</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'变量名'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查看指定的某个全局变量的值</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> @<span class="token variable">@GLOBAL.</span>变量名<span class="token punctuation">;</span> 
</code></pre></div></li> <li><p>为某个全局变量赋值</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> 系统变量名 <span class="token operator">=</span> 值<span class="token punctuation">;</span>

<span class="token keyword">SET</span> @<span class="token variable">@GLOBAL.</span>系统变量名<span class="token operator">=</span>值
</code></pre></div></li> <li><p>注意：如果是全局级别，需要加<code>global</code>，如果是会话级别需要加<code>session</code>，如果不写，则默认<code>session</code></p></li></ul> <h4 id="会话变量"><a href="#会话变量" class="header-anchor">#</a> 会话变量</h4> <ul><li><p>作用域：仅仅针对于当前会话连接有效</p></li> <li><p>查看会话变量</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token punctuation">[</span><span class="token keyword">SESSION</span><span class="token punctuation">]</span> VARIABLES<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查看部分的会话变量</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token punctuation">[</span><span class="token keyword">SESSION</span><span class="token punctuation">]</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'变量名'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查看某个指定的某个会话变量</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> @@<span class="token punctuation">[</span><span class="token keyword">SESSION</span><span class="token punctuation">.</span><span class="token punctuation">]</span>变量名<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>为某个会话变量赋值</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SET</span> @<span class="token variable">@SESSION.</span>变量名<span class="token punctuation">;</span>

<span class="token keyword">SET</span> <span class="token keyword">SESSION</span> 变量名<span class="token operator">=</span><span class="token string">'值'</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="自定义变量"><a href="#自定义变量" class="header-anchor">#</a> 自定义变量</h3> <p>变量是用户自定义的，不是由系统提供的</p> <p>使用：声明，赋值，使用(查看、比较、运算)</p> <h4 id="用户变量"><a href="#用户变量" class="header-anchor">#</a> 用户变量</h4> <ul><li><p>作用域：针对于当前会话(连接)有效。应用在任何地方，也就是<code>begin end</code>里面或<code>begin end</code>外面</p></li> <li><p>声明并初始化</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 方式1</span>
<span class="token keyword">SET</span> @用户变量名<span class="token operator">=</span>值<span class="token punctuation">;</span>

<span class="token comment"># 方式2</span>
<span class="token keyword">SET</span> @用户变量名:<span class="token operator">=</span>值<span class="token punctuation">;</span>

<span class="token comment"># 方式3</span>
<span class="token keyword">SELECT</span> @用户变量名:<span class="token operator">=</span>值<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>赋值更新用户变量的值</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 方式1与声明相同</span>
<span class="token keyword">SET</span> @用户变量名<span class="token operator">=</span>值<span class="token punctuation">;</span>
<span class="token keyword">SET</span> @用户变量名:<span class="token operator">=</span>值<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> @用户变量名:<span class="token operator">=</span>值<span class="token punctuation">;</span>

<span class="token comment"># 方式2 SELECT INTO</span>
<span class="token keyword">SELECT</span> 字段 <span class="token keyword">INTO</span> @变量名 <span class="token keyword">FROM</span> 表
</code></pre></div></li> <li><p>使用(查看用户变量的值)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> @用户变量名<span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="局部变量"><a href="#局部变量" class="header-anchor">#</a> 局部变量</h4> <ul><li><p>作用域：仅仅在带你故意它的<code>begin end</code>中有效,仅用于<code>begin end</code>中的第一句话</p></li> <li><p>声明</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DECLARE</span> 变量名 类型<span class="token punctuation">;</span>

<span class="token keyword">DECLARE</span> 变量名 类型 <span class="token keyword">DEFAULT</span> 值<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>赋值</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 方式1与声明相同</span>
<span class="token keyword">SET</span> 局部变量名<span class="token operator">=</span>值<span class="token punctuation">;</span>
<span class="token keyword">SET</span> 局部变量名:<span class="token operator">=</span>值<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> @局部变量名:<span class="token operator">=</span>值<span class="token punctuation">;</span>

<span class="token comment"># 方式2 SELECT INTO</span>
<span class="token keyword">SELECT</span> 字段 <span class="token keyword">INTO</span> 局部变量名 <span class="token keyword">FROM</span> 表
</code></pre></div></li> <li><p>使用</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 局部变量名<span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="六-存储过程和函数"><a href="#六-存储过程和函数" class="header-anchor">#</a> 六.存储过程和函数</h2> <h3 id="存储过程"><a href="#存储过程" class="header-anchor">#</a> 存储过程</h3> <ul><li><p>存储过程和函数：类似于方法，是一组预先编译好的SQL语句的集合</p></li> <li><p>优点：</p> <ol><li>提高代码的重用性</li> <li>简化操作</li> <li>减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率</li></ol></li> <li><p>创建语法</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> 存储过程名<span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
	存储过程体<span class="token punctuation">(</span>一组合法的<span class="token keyword">SQL</span>语句<span class="token punctuation">)</span>
<span class="token keyword">END</span>
</code></pre></div><p>参数列表包含三部分，</p> <div class="language-sql extra-class"><pre class="language-sql"><code>参数模式，参数名，参数类型<span class="token punctuation">;</span>
</code></pre></div><p>参数模式</p> <p>​	<code>IN</code>：该参数可以作为输入，需要调用方传入值</p> <p>​	<code>OUT</code>：该参数可以作为输出，也就是该参数可以作为返回值</p> <p>​	<code>INOUT</code>：该参数既可以作为输入又可以作为输出</p> <p>如果存储过程体仅仅只有一句话，<code>BEGIN END</code>可以省略</p> <p>存储过程体中的每条SQL语句的结尾要求必须加分号</p> <p>存储过程的结尾可以使用<code>DELIMITER</code>重新设置</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELIMITER</span> 结束标记
</code></pre></div></li> <li><p>调用</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CALL</span> 存储过程名<span class="token punctuation">(</span>实参列表<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>案例</p> <p>空参列表：插入<code>admin</code>表中五条记录</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 创建</span>
<span class="token keyword">DELIMITER</span> $
<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> p <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">BEGIN</span>
	<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> admin <span class="token punctuation">(</span> username<span class="token punctuation">,</span> <span class="token punctuation">`</span>password<span class="token punctuation">`</span> <span class="token punctuation">)</span>
	<span class="token keyword">VALUES</span>
		<span class="token punctuation">(</span> <span class="token string">'joh1'</span><span class="token punctuation">,</span> <span class="token string">'111'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">(</span> <span class="token string">'joh2'</span><span class="token punctuation">,</span> <span class="token string">'222'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">(</span> <span class="token string">'joh3'</span><span class="token punctuation">,</span> <span class="token string">'333'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">(</span> <span class="token string">'joh4'</span><span class="token punctuation">,</span> <span class="token string">'444'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">END</span> $

<span class="token comment"># 调用</span>
<span class="token keyword">CALL</span> p<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>IN</code>模式参数的存储过程</p> <p>根据女神名，查询对应的男神名</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELIMITER</span> $
<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> myp2<span class="token punctuation">(</span><span class="token operator">IN</span> beautyName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span> 
	<span class="token keyword">SELECT</span> bo<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> boys bo
	<span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> beauty b <span class="token keyword">ON</span> bo<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>boyfriend_id
	<span class="token keyword">WHERE</span> b<span class="token punctuation">.</span>name<span class="token operator">=</span>beautyName<span class="token punctuation">;</span>
<span class="token keyword">END</span> $

<span class="token keyword">CALL</span> myp2<span class="token punctuation">(</span><span class="token string">'柳岩'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>out</code>模式的存储过程</p> <p>根据女神名，返回对应的男神名</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 定义</span>
<span class="token keyword">DELIMITER</span> $
<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> myp3<span class="token punctuation">(</span><span class="token operator">IN</span> beautyName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">OUT</span> boyName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
	<span class="token keyword">SELECT</span> bo<span class="token punctuation">.</span>boyName <span class="token keyword">INTO</span> boyName
	<span class="token keyword">FROM</span> boys bo
	<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> beauty b <span class="token keyword">ON</span> bo<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>boyfriend_id
	<span class="token keyword">WHERE</span> boyName<span class="token operator">=</span>b<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token keyword">END</span> $
<span class="token comment"># 定义变量 可省略</span>
<span class="token keyword">SET</span> <span class="token variable">@bName</span><span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">CALL</span> myp3<span class="token punctuation">(</span><span class="token string">'小昭'</span><span class="token punctuation">,</span> <span class="token variable">@bName</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 输出变量</span>
<span class="token keyword">SELECT</span> <span class="token variable">@bName</span><span class="token punctuation">;</span>
</code></pre></div><p><code>inout</code>模式参数的存储过程</p> <p>传入a和b两个值，最终a和b都乘2返回</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> myp4<span class="token punctuation">(</span><span class="token keyword">INOUT</span> a <span class="token keyword">INT</span><span class="token punctuation">,</span> <span class="token keyword">INOUT</span> b <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
	<span class="token keyword">SET</span> a<span class="token operator">=</span>a<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token keyword">SET</span> b<span class="token operator">=</span>b<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">END</span> 

<span class="token keyword">SET</span> <span class="token variable">@a</span><span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">SET</span> <span class="token variable">@b</span><span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">CALL</span> myp4<span class="token punctuation">(</span><span class="token variable">@a</span><span class="token punctuation">,</span><span class="token variable">@b</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token variable">@a</span><span class="token punctuation">,</span><span class="token variable">@b</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>存储过程的删除</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">PROCEDURE</span> 存储过程名<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>查看存储过程的信息</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> 存储过程名<span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h3> <ul><li><p>函数与存储过程的区别：</p> <p>存储过程：可以没有返回值，也可以有多个返回值</p> <p>函数：有且仅有一个返回值</p></li> <li><p>函数的创建</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> 函数名<span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> 返回类型
<span class="token keyword">BEGIN</span> 
	函数体
<span class="token keyword">END</span>

<span class="token comment"># 参数列表包含两部分 参数名 参数类型</span>
<span class="token comment"># 函数体：要由return语句，如果return语句没有放在函数体的最后也不会报错 不建议这样使用</span>
</code></pre></div></li> <li><p>调用</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 函数名<span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>案例</p> <p>无参有返回</p> <p>返回公司的员工个数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> myf1 <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> <span class="token keyword">INT</span> 
<span class="token keyword">BEGIN</span>
	<span class="token comment"># 定义变量</span>
	<span class="token keyword">DECLARE</span> c <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">SELECT</span>
		<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> c 
	<span class="token keyword">FROM</span>
		employees<span class="token punctuation">;</span>
	<span class="token keyword">RETURN</span> c<span class="token punctuation">;</span>
<span class="token keyword">END</span> 
</code></pre></div><p>有参有返回</p> <p>根据员工名，返回它的工资</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELIMITER</span> $
<span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> myf2<span class="token punctuation">(</span>empName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> <span class="token keyword">DOUBLE</span>
<span class="token keyword">BEGIN</span> 
	<span class="token keyword">DECLARE</span> sal <span class="token keyword">DOUBLE</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">SELECT</span> salary 
	<span class="token keyword">INTO</span> sal
	<span class="token keyword">FROM</span> employees
	<span class="token keyword">WHERE</span> last_name<span class="token operator">=</span>empName<span class="token punctuation">;</span>
	<span class="token keyword">RETURN</span> sal<span class="token punctuation">;</span>
<span class="token keyword">END</span> $

<span class="token keyword">SELECT</span> myf2<span class="token punctuation">(</span><span class="token string">'Kochhar'</span><span class="token punctuation">)</span>$
</code></pre></div><p>两数之和</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELIMITER</span> $
<span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> myf3<span class="token punctuation">(</span>a <span class="token keyword">FLOAT</span><span class="token punctuation">,</span> b <span class="token keyword">FLOAT</span><span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> <span class="token keyword">FLOAT</span>
<span class="token keyword">BEGIN</span>
	<span class="token keyword">DECLARE</span> c <span class="token keyword">FLOAT</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">SET</span> c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
	<span class="token keyword">RETURN</span> c<span class="token punctuation">;</span>
<span class="token keyword">END</span> $

<span class="token keyword">SELECT</span> myf3<span class="token punctuation">(</span><span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">1.3</span><span class="token punctuation">)</span> $
</code></pre></div></li> <li><p>查看函数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> 函数名<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>删除函数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">FUNCTION</span> 函数名<span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="七-流程控制结构"><a href="#七-流程控制结构" class="header-anchor">#</a> 七.流程控制结构</h2> <h3 id="分支结构"><a href="#分支结构" class="header-anchor">#</a> 分支结构</h3> <h4 id="if函数"><a href="#if函数" class="header-anchor">#</a> if函数</h4> <ul><li><p>功能：实现简单的双分支</p></li> <li><p>语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">IF</span><span class="token punctuation">(</span>表达式<span class="token number">1</span><span class="token punctuation">,</span> 表达式<span class="token number">2</span><span class="token punctuation">,</span> 表达式<span class="token number">3</span><span class="token punctuation">)</span>
<span class="token comment"># 如果表达式1成立，则IF函数返回表达式2的值，否则返回表达式3的值</span>
</code></pre></div></li></ul> <h4 id="case结构"><a href="#case结构" class="header-anchor">#</a> case结构</h4> <ul><li><p>情况1：类似于<code>switch</code>,一般用于实现等值判断</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CASE</span> 变量<span class="token operator">|</span>表达式<span class="token operator">|</span>字段
<span class="token keyword">WHEN</span> 要判断的值 <span class="token keyword">THEN</span> 返回的值<span class="token number">1</span>或语句<span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">WHEN</span> 要判断的值 <span class="token keyword">THEN</span> 返回的值<span class="token number">2</span>或语句<span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">ELSE</span> 要返回的值n或语句n<span class="token punctuation">;</span>
<span class="token keyword">END</span> <span class="token keyword">CASE</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>情况2：类似于多重<code>IF</code>,一般用于实现区间判断</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CASE</span>
<span class="token keyword">WHEN</span> 要判断的条件<span class="token number">1</span> <span class="token keyword">THEN</span> 返回的值<span class="token number">1</span>或语句<span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">WHEN</span> 要判断的条件<span class="token number">2</span> <span class="token keyword">THEN</span> 返回的值<span class="token number">2</span>或语句<span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">ELSE</span> 要返回的值n或语句n<span class="token punctuation">;</span>
<span class="token keyword">END</span> <span class="token keyword">CASE</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>特点：</p> <p>可以作为表达式，嵌套其他语句中使用，可以放在任何地方，<code>BEGIN END</code>中或<code>BEGIN END</code>的外面</p> <p>可以作为对立的语句去使用，只能放在<code>BEGIN END</code>中</p> <p>如果<code>WHEN</code>中的值满足或条件成立，则执行对应的<code>THEN</code>后面的语句，并且结束<code>CASE</code>入宫都不满足则执行<code>ELSE</code>中的语句或值</p> <p><code>ELSE</code>可以省略，如果<code>ELSE</code>省略了，并且所有<code>WHERE条件都不满足</code>,则返回<code>NULL</code></p></li> <li><p>案例</p> <p>创建存储过程，根据传入的成绩，来显示等级，比如传入的成绩：<code>90-100</code>显示A，<code>80-90</code>显示B，<code>60-80</code>显示C，其余显示D。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELIMITER</span> $
<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> test<span class="token punctuation">(</span><span class="token operator">IN</span> score <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
	<span class="token keyword">CASE</span> 
	<span class="token keyword">WHEN</span> score <span class="token operator">BETWEEN</span> <span class="token number">90</span> <span class="token operator">AND</span> <span class="token number">100</span> <span class="token keyword">THEN</span> <span class="token keyword">SELECT</span> <span class="token string">'A'</span><span class="token punctuation">;</span>
	<span class="token keyword">WHEN</span> score <span class="token operator">BETWEEN</span> <span class="token number">80</span> <span class="token operator">AND</span> <span class="token number">90</span> <span class="token keyword">THEN</span> <span class="token keyword">SELECT</span> <span class="token string">'B'</span><span class="token punctuation">;</span>
	<span class="token keyword">WHEN</span> score <span class="token operator">BETWEEN</span> <span class="token number">60</span> <span class="token operator">AND</span> <span class="token number">80</span> <span class="token keyword">THEN</span> <span class="token keyword">SELECT</span> <span class="token string">'C'</span><span class="token punctuation">;</span>
	<span class="token keyword">ELSE</span> <span class="token keyword">SELECT</span> <span class="token string">'D'</span><span class="token punctuation">;</span>
	<span class="token keyword">END</span> <span class="token keyword">CASE</span><span class="token punctuation">;</span>
<span class="token keyword">END</span> $

<span class="token keyword">CALL</span> test<span class="token punctuation">(</span><span class="token number">95</span><span class="token punctuation">)</span> $
</code></pre></div></li></ul> <h4 id="if结构"><a href="#if结构" class="header-anchor">#</a> if结构</h4> <ul><li><p>功能：实现多重分支</p></li> <li><p>语法</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">if</span> 条件<span class="token number">1</span> <span class="token keyword">then</span> 语句<span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> 条件<span class="token number">2</span> <span class="token keyword">then</span> 语句<span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">else</span> 语句n<span class="token punctuation">;</span> <span class="token comment"># 可省略</span>
<span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>
</code></pre></div><p>应用在<code>begin end</code>中</p></li> <li><p>案例</p> <p>创建存储过程，根据传入的成绩，来显示等级，比如传入的成绩：<code>90-100</code>返回A，<code>80-90</code>返回B，<code>60-80</code>返回C，其余返回D。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELIMITER</span> $
<span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> test<span class="token punctuation">(</span>score <span class="token keyword">INT</span><span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> <span class="token keyword">CHAR</span>
<span class="token keyword">BEGIN</span>
	<span class="token keyword">IF</span> score<span class="token operator">&gt;=</span><span class="token number">90</span> <span class="token operator">AND</span> score<span class="token operator">&lt;=</span><span class="token number">100</span> <span class="token keyword">THEN</span> <span class="token keyword">RETURN</span> <span class="token string">'A'</span><span class="token punctuation">;</span>
	<span class="token keyword">ELSEIF</span> score<span class="token operator">&gt;=</span><span class="token number">80</span> <span class="token keyword">THEN</span> <span class="token keyword">RETURN</span> <span class="token string">'B'</span><span class="token punctuation">;</span>
	<span class="token keyword">ELSEIF</span> score<span class="token operator">&gt;=</span><span class="token number">60</span> <span class="token keyword">THEN</span> <span class="token keyword">RETURN</span> <span class="token string">'C'</span><span class="token punctuation">;</span>
	<span class="token keyword">ELSE</span> <span class="token keyword">RETURN</span> <span class="token string">'D'</span><span class="token punctuation">;</span>
	<span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>
<span class="token keyword">END</span> $
<span class="token keyword">SELECT</span> test<span class="token punctuation">(</span><span class="token number">95</span><span class="token punctuation">)</span> $
</code></pre></div></li></ul> <h3 id="循环结构"><a href="#循环结构" class="header-anchor">#</a> 循环结构</h3> <ul><li><p>分类</p> <p><code>while</code>、<code>loop</code>、<code>repeat</code>都需要放在<code>BEGIN END</code>里面</p></li> <li><p>循环控制</p> <p><code>iterate</code>类似于<code>continue</code>,结束本次循环，继续下一次</p> <p><code>leave</code>类似于<code>break</code>,结束当前所在的循环</p></li> <li><p><code>while</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token punctuation">[</span>标签:<span class="token punctuation">]</span><span class="token keyword">WHILE</span> 循环条件 <span class="token keyword">DO</span>
	循环体<span class="token punctuation">;</span>
<span class="token keyword">END</span> <span class="token keyword">WHILE</span> <span class="token punctuation">[</span>标签<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>loop</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token punctuation">[</span>标签:<span class="token punctuation">]</span><span class="token keyword">LOOP</span>
	循环体<span class="token punctuation">;</span>
<span class="token keyword">END</span> <span class="token keyword">LOOP</span> <span class="token punctuation">[</span>标签<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment"># 需搭配leave使用</span>
</code></pre></div></li> <li><p><code>repeat</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token punctuation">[</span>标签:<span class="token punctuation">]</span><span class="token keyword">REPEAT</span>
	循环体<span class="token punctuation">;</span>
UNTIL 循环结束的条件
<span class="token keyword">END</span> <span class="token keyword">REPEAT</span> <span class="token punctuation">[</span>标签<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>案例</p> <p>批量插入，根据次数插入到<code>admin</code>，最多插入20条</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELIMITER</span> $
<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> pro<span class="token punctuation">(</span><span class="token operator">IN</span> insertCount <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span> 
	<span class="token keyword">DECLARE</span> i <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">1</span><span class="token punctuation">;</span>
	a:<span class="token keyword">WHILE</span> i <span class="token operator">&lt;=</span> insertCount <span class="token keyword">DO</span>
		<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> admin<span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token punctuation">`</span>password<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'12'</span><span class="token punctuation">,</span> <span class="token string">'测试'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">IF</span> i <span class="token operator">&gt;=</span> <span class="token number">20</span> <span class="token keyword">THEN</span> <span class="token keyword">LEAVE</span> a<span class="token punctuation">;</span>
		<span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>
		<span class="token keyword">SET</span> i<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> 
	<span class="token keyword">END</span> <span class="token keyword">WHILE</span> a<span class="token punctuation">;</span>
<span class="token keyword">END</span> $

<span class="token keyword">CALL</span> pro<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> $
</code></pre></div></li></ul></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后修改时间: </span> <span class="time">5 天前</span></div></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/database/MySQL.html#一-mysql启动" class="sidebar-link reco-side-一-mysql启动" data-v-70334359>一.MySQL启动</a></li><li class="level-2" data-v-70334359><a href="/database/MySQL.html#二-mysql常用命令" class="sidebar-link reco-side-二-mysql常用命令" data-v-70334359>二.MySQL常用命令</a></li><li class="level-2" data-v-70334359><a href="/database/MySQL.html#三-mysql的语法规范" class="sidebar-link reco-side-三-mysql的语法规范" data-v-70334359>三.MySQL的语法规范</a></li><li class="level-2" data-v-70334359><a href="/database/MySQL.html#四-sql结构化查询语言" class="sidebar-link reco-side-四-sql结构化查询语言" data-v-70334359>四.SQL结构化查询语言</a></li><li class="level-3" data-v-70334359><a href="/database/MySQL.html#dql语言" class="sidebar-link reco-side-dql语言" data-v-70334359>DQL语言</a></li><li class="level-3" data-v-70334359><a href="/database/MySQL.html#dml语言" class="sidebar-link reco-side-dml语言" data-v-70334359>DML语言</a></li><li class="level-3" data-v-70334359><a href="/database/MySQL.html#ddl语言" class="sidebar-link reco-side-ddl语言" data-v-70334359>DDL语言</a></li><li class="level-3" data-v-70334359><a href="/database/MySQL.html#sql数据类型" class="sidebar-link reco-side-sql数据类型" data-v-70334359>SQL数据类型</a></li><li class="level-3" data-v-70334359><a href="/database/MySQL.html#常见约束" class="sidebar-link reco-side-常见约束" data-v-70334359>常见约束</a></li><li class="level-3" data-v-70334359><a href="/database/MySQL.html#tcl语言" class="sidebar-link reco-side-tcl语言" data-v-70334359>TCL语言</a></li><li class="level-3" data-v-70334359><a href="/database/MySQL.html#视图" class="sidebar-link reco-side-视图" data-v-70334359>视图</a></li><li class="level-2" data-v-70334359><a href="/database/MySQL.html#五-变量" class="sidebar-link reco-side-五-变量" data-v-70334359>五.变量</a></li><li class="level-3" data-v-70334359><a href="/database/MySQL.html#系统变量" class="sidebar-link reco-side-系统变量" data-v-70334359>系统变量</a></li><li class="level-3" data-v-70334359><a href="/database/MySQL.html#自定义变量" class="sidebar-link reco-side-自定义变量" data-v-70334359>自定义变量</a></li><li class="level-2" data-v-70334359><a href="/database/MySQL.html#六-存储过程和函数" class="sidebar-link reco-side-六-存储过程和函数" data-v-70334359>六.存储过程和函数</a></li><li class="level-3" data-v-70334359><a href="/database/MySQL.html#存储过程" class="sidebar-link reco-side-存储过程" data-v-70334359>存储过程</a></li><li class="level-3" data-v-70334359><a href="/database/MySQL.html#函数" class="sidebar-link reco-side-函数" data-v-70334359>函数</a></li><li class="level-2" data-v-70334359><a href="/database/MySQL.html#七-流程控制结构" class="sidebar-link reco-side-七-流程控制结构" data-v-70334359>七.流程控制结构</a></li><li class="level-3" data-v-70334359><a href="/database/MySQL.html#分支结构" class="sidebar-link reco-side-分支结构" data-v-70334359>分支结构</a></li><li class="level-3" data-v-70334359><a href="/database/MySQL.html#循环结构" class="sidebar-link reco-side-循环结构" data-v-70334359>循环结构</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;left:50px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/assets/js/app.ab5f16c5.js" defer></script><script src="/assets/js/3.0bb47036.js" defer></script><script src="/assets/js/1.5a70b7c3.js" defer></script><script src="/assets/js/14.d250c454.js" defer></script>
  </body>
</html>
