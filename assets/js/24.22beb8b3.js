(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{574:function(_,v,t){"use strict";t.r(v);var e=t(8),a=function(_){_.options.__data__block__={mermaid_1a962853:"graph TD\n应用层 --\x3e 表示层 --\x3e 会话层 --\x3e 运输层 --\x3e 网络层 --\x3e 数据链路层 --\x3e 物理层\n",mermaid_382ee148:"graph TD\n应用层 --\x3e 运输层 --\x3e 网际层 --\x3e 网络接口层\n",mermaid_382ee14c:"graph TD\n应用层 --\x3e 运输层 --\x3e 网际层 --\x3e 数据链路层 --\x3e 物理层\n",mermaid_3005d938:"graph LR\nA --\x3e |发消息|B\n"}},c=Object(e.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h2",{attrs:{id:"_1-基本概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-基本概念"}},[_._v("#")]),_._v(" 1. 基本概念")]),_._v(" "),t("h3",{attrs:{id:"_1-1-网络互联模型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-网络互联模型"}},[_._v("#")]),_._v(" 1.1 网络互联模型")]),_._v(" "),t("p",[t("code",[_._v("OSI")]),_._v("参考模型")]),_._v(" "),t("Mermaid",{attrs:{id:"mermaid_1a962853",graph:_.$dataBlock.mermaid_1a962853}}),t("p",[t("code",[_._v("TCP/IP")]),_._v("协议")]),_._v(" "),t("Mermaid",{attrs:{id:"mermaid_382ee148",graph:_.$dataBlock.mermaid_382ee148}}),t("p",[_._v("学习研究")]),_._v(" "),t("Mermaid",{attrs:{id:"mermaid_382ee14c",graph:_.$dataBlock.mermaid_382ee14c}}),t("h3",{attrs:{id:"_1-2-通信基础"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-通信基础"}},[_._v("#")]),_._v(" 1.2 通信基础")]),_._v(" "),t("h4",{attrs:{id:"_1-2-1-通信过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-通信过程"}},[_._v("#")]),_._v(" 1.2.1 通信过程")]),_._v(" "),t("ol",[t("li",[_._v("获取对方的"),t("code",[_._v("IP")]),_._v("地址和对应的"),t("code",[_._v("MAC")]),_._v("地址")]),_._v(" "),t("li",[_._v("如果此时发送方不知道目的地址的"),t("code",[_._v("MAC")]),_._v("，会使用"),t("code",[_._v("ARP")]),_._v("协议在同一个网段进行广播，获取目的地址的"),t("code",[_._v("MAC")]),_._v("地址")]),_._v(" "),t("li",[_._v("根据"),t("code",[_._v("MAC")]),_._v("地址(网卡地址)，输送数据到网卡，被网卡接受")]),_._v(" "),t("li",[_._v("如果对方发现"),t("code",[_._v("MAC")]),_._v("地址不是自己的则会丢弃")])]),_._v(" "),t("h4",{attrs:{id:"_1-2-2-计算机的连接方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-计算机的连接方式"}},[_._v("#")]),_._v(" 1.2.2 计算机的连接方式")]),_._v(" "),t("ol",[t("li",[t("p",[_._v("同轴电缆")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403130219.png",alt:"image-20210210124220690"}}),_._v("这种方式为"),t("strong",[_._v("半双工通信")]),_._v("同一时间只允许一个用户进行发送，容易冲突")]),_._v(" "),t("p",[_._v("因为数据会从发送方发给每一个用户，所以不安全")])]),_._v(" "),t("li",[t("p",[_._v("集线器")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403130438.png",alt:"image-20210210131607414"}})]),_._v(" "),t("p",[_._v("半双工通信，容易冲突")]),_._v(" "),t("p",[_._v("一个集线器能够连接的设备是有上限的，可以采用集线器连接集线器的方式进行连接")]),_._v(" "),t("p",[_._v("数据也会从发送方发给每一个用户，所以也不安全")])]),_._v(" "),t("li",[t("p",[_._v("网桥")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403130507.png",alt:"image-20210210133537667"}})]),_._v(" "),t("p",[_._v("通过自学习得知每个接口的"),t("code",[_._v("MAC")]),_._v("地址，从而起到隔绝冲突域的作用")]),_._v(" "),t("p",[_._v("如上图在每一次的"),t("code",[_._v("ARP")]),_._v("数据传送中，网桥就可以记录下"),t("code",[_._v("ip")]),_._v("对应的"),t("code",[_._v("MAC")]),_._v("地址，在数据经过网桥时可以比对"),t("code",[_._v("MAC")]),_._v("地址，从而实现隔绝的效果")])]),_._v(" "),t("li",[t("p",[_._v("交换机")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403130555.png",alt:"image-20210210140623590"}})]),_._v(" "),t("p",[_._v("相当于接口更多的网桥，能够实现"),t("strong",[_._v("全双工通信")])]),_._v(" "),t("p",[_._v("第一次发送数据时"),t("code",[_._v("ARP")]),_._v("依旧会采用广播的方式，但是此时的交换机会记录下每个接口对应的"),t("code",[_._v("MAC")]),_._v("地址")])]),_._v(" "),t("li",[t("p",[_._v("路由器")]),_._v(" "),t("p",[_._v("以上的四种方式，所有的设备必须处在同一个网段，即处在同一个广播域")]),_._v(" "),t("p",[_._v("路由器则可以在不同网段之间转发数据，路由器连接的设备一定要处于"),t("strong",[_._v("不同")]),_._v("的网段")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403130617.png",alt:"image-20210210195940917"}})]),_._v(" "),t("p",[t("strong",[_._v("发送数据的步骤")])]),_._v(" "),t("p",[_._v("在主机发送数据之前，首先会判断目标主机的"),t("code",[_._v("IP")]),_._v("地址跟它是否在同一个网段")]),_._v(" "),t("p",[_._v("判断是否在同一个网段的方法是拿自己的子网掩码和对方的"),t("code",[_._v("IP")]),_._v("地址进行"),t("code",[_._v("&")]),_._v("运算")]),_._v(" "),t("p",[_._v("在同一个网段发送"),t("code",[_._v("ARP")]),_._v("广播，通过交换机\\集线器传递数据，不在同一个网段通过路由器转发数据")]),_._v(" "),t("p",[_._v("通过路由器转发数据就需要网关（Gateway），网关一般设置为每一个网段的第一个"),t("code",[_._v("ip")]),_._v("地址，不在同一个网段互相传数据，会将数据传送给自己的网关（一个路由器起内包含连接在路由器上的所有网关），经由对方的网关传送给对方")])])]),_._v(" "),t("h2",{attrs:{id:"_2-mac和ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-mac和ip"}},[_._v("#")]),_._v(" 2. MAC和IP")]),_._v(" "),t("h3",{attrs:{id:"_2-1-mac地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-mac地址"}},[_._v("#")]),_._v(" 2.1 MAC地址")]),_._v(" "),t("p",[_._v("每一个网卡都有一个6字节的"),t("code",[_._v("MAC")]),_._v("地址（Media Access Control Address）")]),_._v(" "),t("p",[t("code",[_._v("MAC")]),_._v("地址全球唯一，固化在了网卡的"),t("code",[_._v("ROW")]),_._v("中，由"),t("code",[_._v("IEEE802")]),_._v("标准规定")]),_._v(" "),t("p",[_._v("前三个字节"),t("code",[_._v("OUI")]),_._v("（Organizationally Unique Identifier）是网卡厂家，后三个字节由厂商自行分配")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("组织唯一标识")]),_._v(" "),t("th",[_._v("网络接口标识")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("40-55-82")]),_._v(" "),t("td",[_._v("0A-8C-6D")])])])]),_._v(" "),t("p",[_._v("当"),t("code",[_._v("MAC")]),_._v("地址为"),t("code",[_._v("FF-FF-FF-FF-FF-FF")]),_._v("时代表广播地址")]),_._v(" "),t("p",[t("strong",[_._v("arp")])]),_._v(" "),t("p",[_._v("当发送方不知道对方主机的"),t("code",[_._v("MAC")]),_._v("地址时，可以通过发送"),t("code",[_._v("ARP")]),_._v("广播获取对方的"),t("code",[_._v("MAC")]),_._v("地址，获取成功后，发送方会缓存"),t("code",[_._v("IP")]),_._v("地址、"),t("code",[_._v("MAC")]),_._v("地址的映射信息，俗称"),t("code",[_._v("ARP")]),_._v("缓存")]),_._v(" "),t("p",[_._v("通过"),t("code",[_._v("arp")]),_._v("广播获取的"),t("code",[_._v("MAC")]),_._v("地址，属于动态"),t("code",[_._v("dynamic")]),_._v("缓存，存储时间比较短（默认是2分钟），过期了自动删除")]),_._v(" "),t("p",[_._v("查看缓存")]),_._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[_._v("arp -a\n")])])]),t("h3",{attrs:{id:"_2-2-ip地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-ip地址"}},[_._v("#")]),_._v(" 2.2 IP地址")]),_._v(" "),t("h4",{attrs:{id:"_2-2-1-简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-简介"}},[_._v("#")]),_._v(" 2.2.1 简介")]),_._v(" "),t("p",[t("code",[_._v("IP")]),_._v("地址（Internet Protocol Address）：互联网上的每一个主机都有一个"),t("code",[_._v("IP")]),_._v("地址，最初为"),t("code",[_._v("IPV4")]),_._v("版本，"),t("code",[_._v("32bit")]),_._v("（4字节），2019年11月25日，全球的"),t("code",[_._v("Ip")]),_._v("地址已经耗尽，目前正在推广"),t("code",[_._v("IPv6")])]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("第一部分")]),_._v(" "),t("th",[_._v("第二部分")]),_._v(" "),t("th",[_._v("第三部分")]),_._v(" "),t("th",[_._v("第四部分")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("1100 0000")]),_._v(" "),t("td",[_._v("1010 1000")]),_._v(" "),t("td",[_._v("0000 0001")]),_._v(" "),t("td",[_._v("0000 1010")])]),_._v(" "),t("tr",[t("td",[_._v("192")]),_._v(" "),t("td",[_._v("168")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("10")])])])]),_._v(" "),t("p",[t("strong",[_._v("功能")])]),_._v(" "),t("p",[_._v("假设")]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[_._v("IP地址：192.168.1.10\n子网掩码：255.255.255.0\n")])])]),t("table",[t("thead",[t("tr",[t("th",[_._v("网络ID")]),_._v(" "),t("th",[_._v("主机ID")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("1100 0000 1010 1000 0000 0001")]),_._v(" "),t("td",[_._v("0000 1010")])]),_._v(" "),t("tr",[t("td",[_._v("192.168.1")]),_._v(" "),t("td",[_._v("10")])])])]),_._v(" "),t("p",[t("code",[_._v("IP")]),_._v("地址由2部分组成：网络标识（网络ID）、主机标识（主机ID），同一个网段的计算机，网络ID相同")]),_._v(" "),t("p",[_._v("通过子网掩码（"),t("code",[_._v("subnet mask")]),_._v("）可以计算出网络ID："),t("strong",[_._v("子网掩码&IP地址")])]),_._v(" "),t("p",[_._v("如果主机ID位为全"),t("code",[_._v("0")]),_._v("代表网段地址，如上的网段地址为")]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[_._v("192.168.1.0\n")])])]),t("p",[_._v("如果主机ID位为全"),t("code",[_._v("1")]),_._v("代表给这个网段的所有主机发送消息，即广播地址，如上的广播地址为")]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[_._v("192.168.1.255\n")])])]),t("h4",{attrs:{id:"_2-2-2-ip地址的分类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-ip地址的分类"}},[_._v("#")]),_._v(" 2.2.2 IP地址的分类")]),_._v(" "),t("ul",[t("li",[t("p",[t("code",[_._v("A")]),_._v("类地址：默认子网掩码是"),t("code",[_._v("255.0.0.0")])]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("8bit")]),_._v(" "),t("th",[_._v("24bit")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("网络ID 0开头")]),_._v(" "),t("td",[_._v("主机ID")])])])]),_._v(" "),t("p",[_._v("网络ID的取值范围为"),t("code",[_._v("0~127")]),_._v("，"),t("code",[_._v("0")]),_._v("不能用，"),t("code",[_._v("127")]),_._v("作为保留网段，其中"),t("code",[_._v("127.0.0.1")]),_._v("是本地环回地址"),t("code",[_._v("Loopback")]),_._v("，代表本机地址，所以"),t("code",[_._v("A")]),_._v("类地址网络ID的实际取值范围为"),t("code",[_._v("1~126")])]),_._v(" "),t("p",[_._v("每个"),t("code",[_._v("A")]),_._v("类网络能容纳的最大主机数是："),t("code",[_._v("256 * 256 * 256 - 2 = 1677 7214")])])]),_._v(" "),t("li",[t("p",[t("code",[_._v("B")]),_._v("类地址：默认子网掩码是"),t("code",[_._v("255.255.0.0")])]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("16bit")]),_._v(" "),t("th",[_._v("16bit")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("网络ID 10开头")]),_._v(" "),t("td",[_._v("主机标识")])])])]),_._v(" "),t("p",[_._v("第一个字节的取值范围为"),t("code",[_._v("128~191")]),_._v("，每个"),t("code",[_._v("B")]),_._v("类网络能够容纳的最大主机数是："),t("code",[_._v("256 * 256 - 2 = 6 5534")])])]),_._v(" "),t("li",[t("p",[t("code",[_._v("C")]),_._v("类地址：默认子网掩码是"),t("code",[_._v("255.255.255.0")])]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("24bit")]),_._v(" "),t("th",[_._v("8bit")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("网络ID 110开头")]),_._v(" "),t("td",[_._v("主机ID")])])])]),_._v(" "),t("p",[_._v("第一个字节的取值为"),t("code",[_._v("192~223")]),_._v("，每个"),t("code",[_._v("C")]),_._v("类网络能够容纳的最大主机数是："),t("code",[_._v("256 - 2 = 254")])])]),_._v(" "),t("li",[t("p",[t("code",[_._v("D")]),_._v("类地址：以"),t("code",[_._v("1110")]),_._v("开头，没有子网掩码，用于多播地址")]),_._v(" "),t("p",[_._v("第一个字节的取值范围："),t("code",[_._v("224~239")])])]),_._v(" "),t("li",[t("p",[t("code",[_._v("E")]),_._v("类地址：以"),t("code",[_._v("1111")]),_._v("开头，保留为今后使用")]),_._v(" "),t("p",[_._v("第一个字节的取值范围："),t("code",[_._v("240~255")])])])]),_._v(" "),t("p",[_._v("只有"),t("code",[_._v("A")]),_._v("、"),t("code",[_._v("B")]),_._v("、"),t("code",[_._v("C")]),_._v("类地址才能分配给主机")]),_._v(" "),t("h4",{attrs:{id:"_2-2-3-公网ip、私网ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-公网ip、私网ip"}},[_._v("#")]),_._v(" 2.2.3 公网IP、私网IP")]),_._v(" "),t("p",[t("code",[_._v("IP")]),_._v("地址分为：公网"),t("code",[_._v("IP")]),_._v("和私网"),t("code",[_._v("IP")])]),_._v(" "),t("p",[t("strong",[_._v("公网IP")])]),_._v(" "),t("p",[t("code",[_._v("Internet")]),_._v("上的路由器中只有到达公网的路由表，没有到达私网的路由表")]),_._v(" "),t("p",[_._v("公网"),t("code",[_._v("IP")]),_._v("由因特网信息中心"),t("code",[_._v("Internet Network Information Center, Inter NIC")]),_._v("统一分配和管理")]),_._v(" "),t("p",[t("code",[_._v("ISP")]),_._v("需要想"),t("code",[_._v("Inter NIC")]),_._v("申请公网"),t("code",[_._v("IP")])]),_._v(" "),t("p",[t("strong",[_._v("私网IP")])]),_._v(" "),t("p",[_._v("主要用于局域网。下面是保留的私网网段")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("类型")]),_._v(" "),t("th",[_._v("范围")]),_._v(" "),t("th",[_._v("网段数量")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("A类")]),_._v(" "),t("td",[_._v("10.0.0.0/8")]),_._v(" "),t("td",[_._v("1")])]),_._v(" "),t("tr",[t("td",[_._v("B类")]),_._v(" "),t("td",[_._v("172.16.0.0/16~172.31.0.0/16")]),_._v(" "),t("td",[_._v("16")])]),_._v(" "),t("tr",[t("td",[_._v("C类")]),_._v(" "),t("td",[_._v("192.168.0.0/24~192.168.255.0/24")]),_._v(" "),t("td",[_._v("256")])])])]),_._v(" "),t("h3",{attrs:{id:"_2-3-子网掩码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-子网掩码"}},[_._v("#")]),_._v(" 2.3 子网掩码")]),_._v(" "),t("h4",{attrs:{id:"_2-3-1-子网掩码的表示方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1-子网掩码的表示方法"}},[_._v("#")]),_._v(" 2.3.1 子网掩码的表示方法")]),_._v(" "),t("p",[t("code",[_._v("CIDR")]),_._v("（Classless Inter-Domain Routing）：无类别域间路由表示法")]),_._v(" "),t("p",[t("code",[_._v("192.168.1.100/24")]),_._v("，代表子网掩码有24个1，也就是"),t("code",[_._v("255.255.255.0")])]),_._v(" "),t("p",[t("code",[_._v("123.210.100.200/16")]),_._v("，代表子网掩码有16个1，也就是"),t("code",[_._v("255.255.0.0")])]),_._v(" "),t("h4",{attrs:{id:"_2-3-2-子网划分"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2-子网划分"}},[_._v("#")]),_._v(" 2.3.2 子网划分")]),_._v(" "),t("p",[t("strong",[_._v("为什么要进行子网划分？")])]),_._v(" "),t("p",[_._v("如果让"),t("strong",[_._v("200")]),_._v("台主机在同一个网段内，就可以分配一个"),t("code",[_._v("C")]),_._v("类网段，比如"),t("code",[_._v("192.168.1.0/24")]),_._v("，总共"),t("code",[_._v("254")]),_._v("个可用的"),t("code",[_._v("IP")]),_._v("地址："),t("code",[_._v("192.168.1.1")]),_._v("~"),t("code",[_._v("192.168.1.254")]),_._v("，多出"),t("code",[_._v("54")]),_._v("个空闲"),t("code",[_._v("ip")]),_._v("地址，这种情况并不算浪费资源。")]),_._v(" "),t("p",[_._v("如果让"),t("strong",[_._v("500")]),_._v("台主机在同一个网段内，那就分配一个"),t("code",[_._v("B")]),_._v("类网段，比如"),t("code",[_._v("191.100.0.0/16")]),_._v("，总共"),t("code",[_._v("65534")]),_._v("个可用"),t("code",[_._v("IP")]),_._v("地址："),t("code",[_._v("191.100.0.1")]),_._v("~"),t("code",[_._v("191.100.255.254")]),_._v("，多出"),t("code",[_._v("65034")]),_._v("个空闲的"),t("code",[_._v("IP")]),_._v("地址，这种情况属于极大的浪费资源。")]),_._v(" "),t("p",[_._v("为了解决资源浪费的问题，提出了子网划分的概念。")]),_._v(" "),t("p",[t("strong",[_._v("子网划分")])]),_._v(" "),t("p",[_._v("假设对一个"),t("code",[_._v("C")]),_._v("类网段进行子网划分")]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[_._v("192.168.0.0/24\n")])])]),t("p",[_._v("借用主机位作子网位，划分出多个子网")]),_._v(" "),t("p",[_._v("划分方式:")]),_._v(" "),t("ol",[t("li",[t("p",[_._v("等长子网划分：将一个网段等分为多个子网，每个子网的可用"),t("code",[_._v("IP")]),_._v("地址数量是一样的")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("A子网")]),_._v(" "),t("th",[_._v("1100 0000")]),_._v(" "),t("th",[_._v("1010 1000")]),_._v(" "),t("th",[_._v("0000 0000")]),_._v(" "),t("th",[_._v("0")]),_._v(" "),t("th",[_._v("000 0000")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("B子网")]),_._v(" "),t("td",[_._v("1100 0000")]),_._v(" "),t("td",[_._v("1010 1000")]),_._v(" "),t("td",[_._v("0000 0000")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("000 0000")])]),_._v(" "),t("tr",[t("td",[_._v("子网掩码")]),_._v(" "),t("td",[_._v("255")]),_._v(" "),t("td",[_._v("255")]),_._v(" "),t("td",[_._v("255")]),_._v(" "),t("td",[_._v("128")]),_._v(" "),t("td")])])]),_._v(" "),t("p",[_._v("将主机的一位拿出来当做子网掩码的一部分，就会变成两个不同的网段")]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[_._v("A子网：192.168.0.0/25\nB子网：192.168.0.128/25\n两个网段的子网掩码都是：255.255.255.128\n")])])]),t("p",[_._v("对于A子网的取值范围应该是："),t("code",[_._v("192.168.0.1")]),_._v("~"),t("code",[_._v("192.168.0.126")])]),_._v(" "),t("p",[_._v("对于B子网的取值范围应该是："),t("code",[_._v("192.168.0.129")]),_._v("~"),t("code",[_._v("192.168.0.254")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403130639.png",alt:"image-20210211113554545"}})])]),_._v(" "),t("li",[t("p",[_._v("变长子网划分：每个子网的可用"),t("code",[_._v("IP")]),_._v("地址数量可以是不一样的")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403130655.png",alt:"image-20210211115326654"}})]),_._v(" "),t("p",[_._v("如果一个子网地址块的长度是原网段的"),t("code",[_._v("(1/2)^n")]),_._v("，那么子网的子网掩码，就是在原网段的子网掩码的基础上增加n个1，不等长的子网他们的子网掩码也不同。")]),_._v(" "),t("p",[t("strong",[_._v("各个网段的划分情况")])]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("网段")]),_._v(" "),t("th",[_._v("子网掩码")]),_._v(" "),t("th",[_._v("网络取值范围")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("A")]),_._v(" "),t("td",[_._v("255.255.255.224/27")]),_._v(" "),t("td",[_._v("192.168.0.33~192.168.0.62")])]),_._v(" "),t("tr",[t("td",[_._v("B")]),_._v(" "),t("td",[_._v("255.255.255.192/26")]),_._v(" "),t("td",[_._v("192.168.0.65~192.168.0.126")])]),_._v(" "),t("tr",[t("td",[_._v("C")]),_._v(" "),t("td",[_._v("255.255.255.128/25")]),_._v(" "),t("td",[_._v("192.168.0.129~192.168.0.254")])]),_._v(" "),t("tr",[t("td",[_._v("D")]),_._v(" "),t("td",[_._v("255.255.255.252/30")]),_._v(" "),t("td",[_._v("192.168.0.1~192.168.0.2")])]),_._v(" "),t("tr",[t("td",[_._v("E")]),_._v(" "),t("td",[_._v("255.255.255.252/30")]),_._v(" "),t("td",[_._v("192.168.0.5~192.168.0.6")])])])])])]),_._v(" "),t("h4",{attrs:{id:"_2-3-3-超网"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-3-超网"}},[_._v("#")]),_._v(" 2.3.3 超网")]),_._v(" "),t("p",[_._v("跟子网反过来，它是将多个"),t("strong",[_._v("连续")]),_._v("的网段合并成一个更大的网段")]),_._v(" "),t("p",[_._v("需求：原本有"),t("strong",[_._v("200")]),_._v("台计算机使用"),t("code",[_._v("192.168.0.0/24")]),_._v("网段，现在希望增加"),t("strong",[_._v("200")]),_._v("台设备到同一个网段")]),_._v(" "),t("p",[_._v("解决方法：200台在"),t("code",[_._v("192.168.0.0/24")]),_._v("网段，200台在"),t("code",[_._v("192.168.1.0/24")]),_._v("网段，并将两个网段合并为同一个网段："),t("code",[_._v("192.168.0.0/23")])]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("192.168.0.0")]),_._v(" "),t("th",[_._v("1100 0000")]),_._v(" "),t("th",[_._v("1010 1000")]),_._v(" "),t("th",[_._v("0000 0000")]),_._v(" "),t("th",[_._v("0000 0000")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("192.168.1.0")]),_._v(" "),t("td",[_._v("1100 0000")]),_._v(" "),t("td",[_._v("1010 1000")]),_._v(" "),t("td",[_._v("0000 0001")]),_._v(" "),t("td",[_._v("0000 0000")])]),_._v(" "),t("tr",[t("td",[_._v("子网掩码")]),_._v(" "),t("td",[_._v("1111 1111")]),_._v(" "),t("td",[_._v("1111 1111")]),_._v(" "),t("td",[_._v("1111 1110")]),_._v(" "),t("td",[_._v("0000 0000")])]),_._v(" "),t("tr",[t("td",[_._v("子网掩码")]),_._v(" "),t("td",[_._v("255")]),_._v(" "),t("td",[_._v("255")]),_._v(" "),t("td",[_._v("254")]),_._v(" "),t("td",[_._v("0")])])])]),_._v(" "),t("p",[_._v("它们的网段为"),t("code",[_._v("192.168.0.0/23")]),_._v("广播地址为"),t("code",[_._v("192.168.1.255")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403130709.png",alt:"image-20210211134232655"}})]),_._v(" "),t("p",[t("strong",[_._v("合并规律")])]),_._v(" "),t("p",[_._v("假设n是2的K（k>=1）次幂，如果第一个网段的网络号能被n整除，那么由它开始连续的n个网段，能够通过左移k为子网掩码进行合并")]),_._v(" "),t("p",[_._v("比如：")]),_._v(" "),t("ul",[t("li",[_._v("第一个网段的网络号以二进制0结尾，那么由它开始连续的2个网段，能够通过左移1位子网掩码进行合并")]),_._v(" "),t("li",[_._v("第一个网段的网络号以二进制00结尾，那么由它开始连续的4个网段，能够通过左移2位子网掩码进行合并")]),_._v(" "),t("li",[_._v("第一个网段的网络号以二进制000结尾，那么由它开始连续的8个网段，能够通过左移2位子网掩码进行合并")])]),_._v(" "),t("h3",{attrs:{id:"_2-4-ipv6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-ipv6"}},[_._v("#")]),_._v(" 2.4 IPv6")]),_._v(" "),t("p",[t("code",[_._v("IPv6(Internet Protocol version 6)")]),_._v("，网际协议第六版，用它来取代"),t("code",[_._v("IPv4")]),_._v("主要是为了解决"),t("code",[_._v("IPv4")]),_._v("地址枯竭的问题，同时它也在其他方面对于"),t("code",[_._v("IPv4")]),_._v("有许多改进")]),_._v(" "),t("p",[_._v("然而长期以来在互联网流量中仍然占主要地位，"),t("code",[_._v("IPv6")]),_._v("的使用增长缓慢")]),_._v(" "),t("p",[t("code",[_._v("IPv6")]),_._v("采用128位的地址，每16bit一组，共8组")]),_._v(" "),t("p",[_._v('每组以冒号":"隔开，每组以4位是十六进制方式表示')]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[_._v("2001:0db8:3c4d:0015:0000:0000:1a2f:1a2b\n")])])]),t("p",[t("code",[_._v("::1")]),_._v("本地环回地址")]),_._v(" "),t("h2",{attrs:{id:"_3-路由"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-路由"}},[_._v("#")]),_._v(" 3. 路由")]),_._v(" "),t("h3",{attrs:{id:"_3-1-路由寻址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-路由寻址"}},[_._v("#")]),_._v(" 3.1 路由寻址")]),_._v(" "),t("p",[_._v("在不同网段之间转发数据，需要有路由器的支持。默认情况下，路由器只知道跟它直连的网段，非直连的网段都需要通过静态路由、动态路由告诉它")]),_._v(" "),t("p",[_._v("静态路由：管理员手动添加路由信息，适用于小规模网络")]),_._v(" "),t("p",[_._v("动态路由：路由器通过路由选择协议（比如"),t("code",[_._v("RIP")]),_._v("、"),t("code",[_._v("OSPF")]),_._v("）自动获取路由信息，使用于大规模网络")]),_._v(" "),t("p",[t("strong",[_._v("以下为静态路由")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403130733.png",alt:"image-20210211152330909"}})]),_._v(" "),t("p",[_._v("每一个路由器内都有一张路由表，记录不同路由器之间不同网段的通信路径")]),_._v(" "),t("p",[_._v("假设"),t("code",[_._v("192.168.1.10/24")]),_._v("和"),t("code",[_._v("193.169.2.10/24")]),_._v("要通信，两个路由器需要使用同一个网段的"),t("code",[_._v("IP")]),_._v("进行通信")]),_._v(" "),t("p",[t("strong",[_._v("路由器0")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403130750.png",alt:"image-20210211152559644"}})]),_._v(" "),t("p",[t("strong",[_._v("路由器1")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403130813.png",alt:"image-20210211152743450"}})]),_._v(" "),t("p",[_._v("设置更高层次的模糊匹配")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403130828.png",alt:"image-20210211155412587"}})]),_._v(" "),t("p",[_._v("也可以设置默认匹配")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403130926.png",alt:"image-20210211155847143"}})]),_._v(" "),t("h3",{attrs:{id:"_3-2-数据包的传输过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-数据包的传输过程"}},[_._v("#")]),_._v(" 3.2 数据包的传输过程")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131005.png",alt:"image-20210211172036400"}})]),_._v(" "),t("p",[_._v("主机"),t("code",[_._v("192.168.1.10/24")]),_._v("要发送消息给"),t("code",[_._v("192.168.3.10/24")]),_._v("，第一步，并不是获取对方的"),t("code",[_._v("MAC")]),_._v("地址，而是获取网关的"),t("code",[_._v("MAC")]),_._v("地址，在传送过程中，"),t("code",[_._v("IP")]),_._v("地址不会改变，而"),t("code",[_._v("MAC")]),_._v("地址会不断变更")]),_._v(" "),t("h3",{attrs:{id:"_3-3-网络、互联网、因特网"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-网络、互联网、因特网"}},[_._v("#")]),_._v(" 3.3 网络、互联网、因特网")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131018.png",alt:"image-20210211172349063"}})]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131027.png",alt:"image-20210211172415233"}})]),_._v(" "),t("p",[_._v("世界上最大的互联网就是"),t("strong",[_._v("因特网")]),t("code",[_._v("Internet")]),_._v("，将全世界的互联网连接一起")]),_._v(" "),t("p",[t("code",[_._v("ISP")]),_._v("（Internet Service Provider）"),t("code",[_._v("Internet")]),_._v("服务提供商，比如移动、电信、网通、铁通等")]),_._v(" "),t("h3",{attrs:{id:"_3-4-网络分类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-网络分类"}},[_._v("#")]),_._v(" 3.4 网络分类")]),_._v(" "),t("p",[_._v("按照网络的范围进行分类，可以分为：局域网、城域网、广域网等")]),_._v(" "),t("p",[t("strong",[_._v("局域网")])]),_._v(" "),t("ol",[t("li",[t("p",[t("code",[_._v("Local Area Network")]),_._v("，LAN，一般为几百米到十几公里内的计算机所构成的计算机网络，常用于公司、家庭、学校、医院、机关、一栋大楼等")])]),_._v(" "),t("li",[t("p",[_._v("局域网中使用最广泛的网络技术叫：以太网"),t("code",[_._v("Ethernet")])])]),_._v(" "),t("li",[t("p",[_._v("在电脑、手机上经常见到的一个英文"),t("code",[_._v("WLAN")]),_._v("（Wireless LAN），意思是无线局域网")])])]),_._v(" "),t("p",[t("strong",[_._v("城域网")])]),_._v(" "),t("p",[t("code",[_._v("Metropolitan Area Network")]),_._v("，MAN，一般范围是数十公里到数百公里，可以覆盖一个城市")]),_._v(" "),t("p",[t("strong",[_._v("广域网")])]),_._v(" "),t("p",[t("code",[_._v("Wide Area Network")]),_._v("，WAN，一般范围是几百公里到几千公里，可以覆盖一个国家。通常都需要租用"),t("code",[_._v("ISP")]),_._v("的线路")]),_._v(" "),t("h3",{attrs:{id:"_3-5-常见的几种接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-常见的几种接口"}},[_._v("#")]),_._v(" 3.5 常见的几种接口")]),_._v(" "),t("ol",[t("li",[t("p",[t("code",[_._v("FastEthernet")])]),_._v(" "),t("p",[_._v("快速以太网接口（100M），一般用于局域网连接，比如电脑网线连接交换机")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("GigabitEthernet")])]),_._v(" "),t("p",[_._v("千兆以太网接口（1000M）")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("Serial")])]),_._v(" "),t("p",[_._v("串行接口，路由器和路由器之间使用串口连接，路由器和交换机之间连接使用快速以太网口")])])]),_._v(" "),t("h3",{attrs:{id:"_3-6-上网方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-上网方式"}},[_._v("#")]),_._v(" 3.6 上网方式")]),_._v(" "),t("h4",{attrs:{id:"_3-6-1-电话线入户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-1-电话线入户"}},[_._v("#")]),_._v(" 3.6.1 电话线入户")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131039.png",alt:"image-20210211175235178"}})]),_._v(" "),t("p",[t("code",[_._v("ADSL")]),_._v("电话拨号上网（"),t("code",[_._v("Asymmetric Digital Subscriber Line")]),_._v("），非对称数字用户线路，提供上、下不对称的传输带宽。")]),_._v(" "),t("p",[_._v("猫"),t("code",[_._v("Modem")]),_._v("，调制解调器，进行数字信号和模拟信号的转换")]),_._v(" "),t("h4",{attrs:{id:"_3-6-2-光纤入户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-2-光纤入户"}},[_._v("#")]),_._v(" 3.6.2 光纤入户")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131054.png",alt:"image-20210211175616729"}})]),_._v(" "),t("p",[_._v("光猫"),t("code",[_._v("Optical Modem")]),_._v("，光调制解调器，进行数字信号和光信号的转换")]),_._v(" "),t("h4",{attrs:{id:"_3-6-3-网线入户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-3-网线入户"}},[_._v("#")]),_._v(" 3.6.3 网线入户")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131107.png",alt:"image-20210211180401473"}})]),_._v(" "),t("h3",{attrs:{id:"_3-7-nat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-nat"}},[_._v("#")]),_._v(" 3.7 NAT")]),_._v(" "),t("p",[_._v("NAT："),t("code",[_._v("Network Address Translation")])]),_._v(" "),t("p",[_._v("私网IP访问"),t("code",[_._v("Internet")]),_._v("需要进行"),t("code",[_._v("NAT")]),_._v("转换为公网"),t("code",[_._v("IP")]),_._v("，这一步由路由器完成")]),_._v(" "),t("p",[t("code",[_._v("NAT")]),_._v("的特点")]),_._v(" "),t("ul",[t("li",[_._v("可以节约公网"),t("code",[_._v("IP")]),_._v("资源")]),_._v(" "),t("li",[_._v("会隐藏内部真时"),t("code",[_._v("IP")])])]),_._v(" "),t("p",[t("code",[_._v("NAT")]),_._v("的分类")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("静态转换，手动配置"),t("code",[_._v("NAT")]),_._v("映射表，一对一转换，不能节约"),t("code",[_._v("IP")]),_._v("资源")])]),_._v(" "),t("li",[t("p",[_._v("动态转换，定义外部地址池，动态随机转换，也是一对一转换")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("PAT")]),_._v("(Port Address Translation)")]),_._v(" "),t("p",[_._v("多对一转换，最大程度节约公网"),t("code",[_._v("IP")]),_._v("资源")]),_._v(" "),t("p",[_._v("采用端口多路复用方式，通过端口号标识不同的数据流")]),_._v(" "),t("p",[_._v("目前应用最广泛的"),t("code",[_._v("NAT")]),_._v("实现方式")])])]),_._v(" "),t("h2",{attrs:{id:"_4-网络分层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-网络分层"}},[_._v("#")]),_._v(" 4. 网络分层")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131117.png",alt:"image-20210212090741050"}})]),_._v(" "),t("p",[_._v("OSI模型：国际标准模型")]),_._v(" "),t("p",[t("code",[_._v("TCP/IP")]),_._v("协议模型：实际应用的模型")]),_._v(" "),t("p",[t("strong",[_._v("数据的传送过程")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131126.png",alt:"image-20210212091045582"}})]),_._v(" "),t("p",[_._v("数据在经过发送方的每一层都会进行一次封装，在接受方则会每一层都进行一次解封装")]),_._v(" "),t("p",[t("strong",[_._v("不同层的功能")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131135.png",alt:"image-20210212091500465"}})]),_._v(" "),t("h3",{attrs:{id:"_4-1-物理层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-物理层"}},[_._v("#")]),_._v(" 4.1 物理层")]),_._v(" "),t("p",[_._v("物理层定义了接口标准、线缆标准、传输速率、传输方式等。")]),_._v(" "),t("p",[t("strong",[_._v("数字信号、模拟信号")])]),_._v(" "),t("p",[_._v("模拟信号"),t("code",[_._v("Analog Signal")]),_._v("：连续的信号，适合长距离传输。抗干扰能力差，收到干扰时波形变形很难纠正")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131145.png",alt:"image-20210212092040983"}})]),_._v(" "),t("p",[_._v("数字信号"),t("code",[_._v("Digital Signal")]),_._v("：离散的信号，不适合长距离传输，抗干扰能力强，收到干扰时波形可以修复")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131154.png",alt:"image-20210212092117282"}})]),_._v(" "),t("p",[t("strong",[_._v("数据通信模型")])]),_._v(" "),t("ol",[t("li",[t("p",[_._v("局域网通信模型")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131204.png",alt:"image-20210212092357074"}})]),_._v(" "),t("p",[_._v("网线不能超过"),t("strong",[_._v("100")]),_._v("米，因为信号会衰减")])]),_._v(" "),t("li",[t("p",[_._v("广域网通信模型")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131213.png",alt:"image-20210212092739804"}})])])]),_._v(" "),t("p",[t("strong",[_._v("信道Channel")])]),_._v(" "),t("p",[_._v("信息传输的通道，一条传输介质上（比如网线）上可以有多条信道")]),_._v(" "),t("p",[_._v("单工通信：信号只能往一个方向传输，任何时候都不能改变信号的传输方向。比如，无线电广播，有线电视话广播等")]),_._v(" "),t("p",[_._v("半双工通信：信号可以双向传输，但必须是交替执行，同一时间只能往一个方向传输。比如，对讲机等")]),_._v(" "),t("p",[_._v("全双工通信：信号可以同时双向传输。比如，手机等")]),_._v(" "),t("h3",{attrs:{id:"_4-2-数据链路层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-数据链路层"}},[_._v("#")]),_._v(" 4.2 数据链路层")]),_._v(" "),t("p",[_._v("数据链路层"),t("code",[_._v("Data Link")])]),_._v(" "),t("p",[t("strong",[_._v("链路")]),_._v("：从1个节点到相邻节点的一段物理线路（有线或无线），中间没有其他交换节点")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131222.png",alt:"image-20210212093820980"}})]),_._v(" "),t("p",[t("strong",[_._v("数据链路")]),_._v("：在一条链路上传输数据时，需要有对应的通信协议来控制数据的传输，不同类型的数据链路，所用的通信协议可能是不同的")]),_._v(" "),t("ol",[t("li",[_._v("广播信道："),t("code",[_._v("CSMA/CD")]),_._v("协议（比如同轴电缆、集线器等组成的网络）")]),_._v(" "),t("li",[_._v("点对点信道："),t("code",[_._v("PPP")]),_._v("协议（比如两个路由器之间的信道）")])]),_._v(" "),t("h4",{attrs:{id:"_4-2-1-数据链路层的问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-数据链路层的问题"}},[_._v("#")]),_._v(" 4.2.1 数据链路层的问题")]),_._v(" "),t("ol",[t("li",[t("p",[_._v("封装成帧")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131236.png",alt:"image-20210213084253529"}})]),_._v(" "),t("p",[_._v("帧"),t("code",[_._v("Frame")]),_._v("的数据部分：就是网络层传递下来的数据包（"),t("code",[_._v("IP")]),_._v("数据包，"),t("code",[_._v("Packet")]),_._v("）")]),_._v(" "),t("p",[t("code",[_._v("MTU")]),_._v("最大传输单元"),t("code",[_._v("Maximum Transfer Unit")]),_._v("：每一种数据链路层协议都规定了所能够传送的帧的数据长度上限，比如以太网的"),t("code",[_._v("MTU")]),_._v("为"),t("code",[_._v("1500")]),_._v("个字节")])]),_._v(" "),t("li",[t("p",[_._v("透明传输")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131249.png",alt:"image-20210213084944437"}})]),_._v(" "),t("p",[_._v("如果数据部分出现"),t("code",[_._v("SOH")]),_._v("、"),t("code",[_._v("EOT")]),_._v("，就需要进行转义")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131303.png",alt:"image-20210213093611836"}})])]),_._v(" "),t("li",[t("p",[_._v("差错检验")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131313.png",alt:"image-20210213094125389"}})]),_._v(" "),t("p",[t("code",[_._v("FCS")]),_._v("是根据数据部分+首部计算得出，用于校验数据的完整性")])])]),_._v(" "),t("h4",{attrs:{id:"_4-2-2-csma-cd协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-csma-cd协议"}},[_._v("#")]),_._v(" 4.2.2 CSMA/CD协议")]),_._v(" "),t("p",[t("code",[_._v("CSMA/CD")]),_._v("（"),t("code",[_._v("Carrier Sense Multiple Acess with Collision Detectio")]),_._v("）")]),_._v(" "),t("p",[_._v("功能：载波侦听、多路访问、冲突检测，一般用于集线器所连接的网络使用")]),_._v(" "),t("p",[_._v("使用了"),t("code",[_._v("CSMA/CD")]),_._v("的网络可以称为是以太网"),t("code",[_._v("Ethernet")]),_._v("，它传输的是以太网帧：以太网帧的格式有："),t("code",[_._v("Ethernet V2")]),_._v("标准（使用最多）、"),t("code",[_._v("IEEE")]),_._v("的"),t("code",[_._v("802.3")]),_._v("标准")]),_._v(" "),t("p",[_._v("为了能够检测正在发送的帧是否产生了冲突，以太网的帧至少要"),t("code",[_._v("64")]),_._v("字节")]),_._v(" "),t("p",[_._v("用交换机组建的网络，已经支持全双工通信，不需要在使用"),t("code",[_._v("CSMA/CD")]),_._v("，但它传输的帧依旧是以太网帧，即使用交换机组建的网络，依然可以叫做以太网")]),_._v(" "),t("h4",{attrs:{id:"_4-2-3-ethernet-v2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-3-ethernet-v2"}},[_._v("#")]),_._v(" 4.2.3 Ethernet v2")]),_._v(" "),t("p",[_._v("是数据帧的一种标准传输格式")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131323.png",alt:"image-20210213100701455"}})]),_._v(" "),t("p",[t("code",[_._v("Ethernet v2")]),_._v("使用曼斯特编码，不需要帧开始符和帧结束符")]),_._v(" "),t("p",[_._v("首部：目标"),t("code",[_._v("MAC")]),_._v("+源"),t("code",[_._v("MAC")]),_._v("+网络类型（IPv4&IPv6）")]),_._v(" "),t("p",[_._v("一个完整的以太网帧包括：首部+数据+"),t("code",[_._v("FCS")])]),_._v(" "),t("p",[_._v("数据长度至少是：64-6-6-2-4=46字节，最多1500个字节。如果小于46字节，数据链路层不在数据的后面加入一些字节填充")]),_._v(" "),t("h4",{attrs:{id:"_4-2-4-ppp协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-4-ppp协议"}},[_._v("#")]),_._v(" 4.2.4 PPP协议")]),_._v(" "),t("p",[t("code",[_._v("PPP")]),_._v("协议："),t("code",[_._v("Point to Point Protocol")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131332.png",alt:"image-20210213101905661"}})]),_._v(" "),t("ul",[t("li",[t("code",[_._v("Address")]),_._v("字段：图中的值是"),t("code",[_._v("0xFF")]),_._v("，形同虚设，点到点信道不需要源"),t("code",[_._v("MAC")]),_._v("、目标"),t("code",[_._v("MAC")]),_._v("地址")]),_._v(" "),t("li",[t("code",[_._v("Control")]),_._v("字段：图中的值是"),t("code",[_._v("0x03")]),_._v("，目前没什么用")]),_._v(" "),t("li",[t("code",[_._v("Protocol")]),_._v("字段：内部用到的协议类型")]),_._v(" "),t("li",[_._v("帧开始符、帧结束符："),t("code",[_._v("0x7E")])])]),_._v(" "),t("p",[t("strong",[_._v("数据转义")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131341.png",alt:"image-20210213102708037"}})]),_._v(" "),t("p",[_._v("将"),t("code",[_._v("0x7E")]),_._v("替换为"),t("code",[_._v("0x7D5E")]),_._v("，将"),t("code",[_._v("0x7D")]),_._v("替换为"),t("code",[_._v("0x7D5D")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131350.png",alt:"image-20210213103002215"}})]),_._v(" "),t("p",[_._v("网卡接受到一个帧，首先进行差错校验，如果校验通过则接收，否则丢弃")]),_._v(" "),t("p",[t("code",[_._v("Wireshark")]),_._v("抓到的帧没有"),t("code",[_._v("FCS")]),_._v("，因为它抓到的是差错校验通过的帧（"),t("code",[_._v("FCS")]),_._v("会被硬件去掉）")]),_._v(" "),t("h3",{attrs:{id:"_4-3-网络层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-网络层"}},[_._v("#")]),_._v(" 4.3 网络层")]),_._v(" "),t("p",[_._v("网络层数据包（"),t("code",[_._v("IP")]),_._v("数据包，"),t("code",[_._v("Packet")]),_._v("）由首部、数据2部分组成，数据一般由传输层传递下来的数据段"),t("code",[_._v("Segment")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131400.png",alt:"image-20210213105458044"}})]),_._v(" "),t("p",[t("code",[_._v("wireshark")]),_._v("抓"),t("code",[_._v("ping www.qq.com")]),_._v("网络层数据")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131513.png",alt:"image-20210213192323068"}})]),_._v(" "),t("p",[_._v("各部分取值")]),_._v(" "),t("ol",[t("li",[t("p",[_._v("版本")]),_._v(" "),t("p",[_._v("占4位，"),t("code",[_._v("OB0100")]),_._v("："),t("code",[_._v("IPv4")]),_._v("，"),t("code",[_._v("OB0110")]),_._v("："),t("code",[_._v("IPv6")])])]),_._v(" "),t("li",[t("p",[_._v("首部长度")]),_._v(" "),t("p",[_._v("占4位，二进制值乘4才是最终长度")]),_._v(" "),t("p",[t("code",[_._v("0B0101")]),_._v("：20最小值")]),_._v(" "),t("p",[t("code",[_._v("0B1111")]),_._v("：60最大值")])]),_._v(" "),t("li",[t("p",[_._v("区分服务")]),_._v(" "),t("p",[_._v("8位，可以提高网络的服务质量")])]),_._v(" "),t("li",[t("p",[_._v("总长度")]),_._v(" "),t("p",[_._v("网络层的总长度16位，"),t("code",[_._v("0<=数据包<=65535")]),_._v("，由于数据链路层的每个数据帧（以太网数据帧）的最大长度为1500字节，所以比较大的"),t("code",[_._v("IP")]),_._v("数据包，需要分成片"),t("code",[_._v("fragments")]),_._v("传输给数据链路层，每一片都有自己的网络层首部（"),t("code",[_._v("IP")]),_._v("首部）")])]),_._v(" "),t("li",[t("p",[_._v("标识"),t("code",[_._v("Identification")])]),_._v(" "),t("p",[_._v("占16位，表示为数据包的"),t("code",[_._v("ID")]),_._v("，当数据包过大进行分片时，同一个数据包的所有片的标识都是一样的")]),_._v(" "),t("p",[_._v("有一个计数器专门管理数据包的"),t("code",[_._v("ID")]),_._v("，每发出一个数据包，"),t("code",[_._v("ID")]),_._v("就加1")])]),_._v(" "),t("li",[t("p",[_._v("标志"),t("code",[_._v("flags")])]),_._v(" "),t("p",[_._v("占三位")]),_._v(" "),t("p",[_._v("第一位"),t("code",[_._v("Reserved Bit")]),_._v("：保留")]),_._v(" "),t("p",[_._v("第二位"),t("code",[_._v("Don't Fragment")]),_._v("：1代表不允许分片，0代表允许分片")]),_._v(" "),t("p",[_._v("第三位"),t("code",[_._v("More Fragments")]),_._v("：1代表不是最后一片，0代表是最后一片")])]),_._v(" "),t("li",[t("p",[_._v("片偏移"),t("code",[_._v("Fragment Offset")])]),_._v(" "),t("p",[_._v("占13位，片偏移乘以8：字节偏移")]),_._v(" "),t("p",[_._v("每一片的长度一定是8的整数倍")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131524.png",alt:"image-20210213172715591"}})])]),_._v(" "),t("li",[t("p",[_._v("生存时间")]),_._v(" "),t("p",[_._v("生存时间"),t("code",[_._v("Time To Live, TTL")]),_._v("，占8位")]),_._v(" "),t("p",[_._v("每个路由器在转发之前会将"),t("code",[_._v("TTL")]),_._v("减1，一旦发现"),t("code",[_._v("TTL")]),_._v("减为0，路由器就会返回错误报告")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("操作系统")]),_._v(" "),t("th",[_._v("版本")]),_._v(" "),t("th",[_._v("默认TTL")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("Windows")]),_._v(" "),t("td",[_._v("Server 2003，XP，7，10")]),_._v(" "),t("td",[_._v("128")])]),_._v(" "),t("tr",[t("td",[_._v("Linux")]),_._v(" "),t("td",[_._v("2.0.x Kernel，Red Hat 9")]),_._v(" "),t("td",[_._v("64")])]),_._v(" "),t("tr",[t("td",[_._v("Linux")]),_._v(" "),t("td",[_._v("2.2.14 Kernel，2.4 Kernel")]),_._v(" "),t("td",[_._v("255")])]),_._v(" "),t("tr",[t("td",[_._v("Mac OS")]),_._v(" "),t("td"),_._v(" "),t("td",[_._v("60")])]),_._v(" "),t("tr",[t("td",[_._v("Mac OS X")]),_._v(" "),t("td"),_._v(" "),t("td",[_._v("64")])])])])]),_._v(" "),t("li",[t("p",[_._v("协议")]),_._v(" "),t("p",[_._v("占8位，表明所封装的数据是使用了什么协议")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("协议")]),_._v(" "),t("th",[_._v("ICMP")]),_._v(" "),t("th",[_._v("IGMP")]),_._v(" "),t("th",[_._v("IP")]),_._v(" "),t("th",[_._v("TCP")]),_._v(" "),t("th",[_._v("EGP")]),_._v(" "),t("th",[_._v("IGP")]),_._v(" "),t("th",[_._v("UDP")]),_._v(" "),t("th",[_._v("IPv6")]),_._v(" "),t("th",[_._v("ESP")]),_._v(" "),t("th",[_._v("OSPF")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("十进制")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("2")]),_._v(" "),t("td",[_._v("4")]),_._v(" "),t("td",[_._v("6")]),_._v(" "),t("td",[_._v("8")]),_._v(" "),t("td",[_._v("9")]),_._v(" "),t("td",[_._v("17")]),_._v(" "),t("td",[_._v("41")]),_._v(" "),t("td",[_._v("50")]),_._v(" "),t("td",[_._v("89")])])])])]),_._v(" "),t("li",[t("p",[_._v("首部检验和")]),_._v(" "),t("p",[_._v("占16位，用于检测首部是否正确。")])]),_._v(" "),t("li",[t("p",[_._v("源IP")])]),_._v(" "),t("li",[t("p",[_._v("目标Ip")])])]),_._v(" "),t("h3",{attrs:{id:"_4-4-传输层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-传输层"}},[_._v("#")]),_._v(" 4.4 传输层")]),_._v(" "),t("p",[_._v("传输层有两个协议")]),_._v(" "),t("ul",[t("li",[t("code",[_._v("TCP(Transmission Control Protocol)")]),_._v("：传输控制协议")]),_._v(" "),t("li",[t("code",[_._v("UDP(User Datagram Protocol)")]),_._v("：用户数据报协议")])]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("特性")]),_._v(" "),t("th",[_._v("TCP")]),_._v(" "),t("th",[_._v("UDP")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("连接性")]),_._v(" "),t("td",[_._v("面向连接")]),_._v(" "),t("td",[_._v("无连接")])]),_._v(" "),t("tr",[t("td",[_._v("可靠性")]),_._v(" "),t("td",[_._v("可靠传输、不丢包")]),_._v(" "),t("td",[_._v("不可靠传输，尽最大努力交付，可能丢包")])]),_._v(" "),t("tr",[t("td",[_._v("首部占用空间")]),_._v(" "),t("td",[_._v("大")]),_._v(" "),t("td",[_._v("小")])]),_._v(" "),t("tr",[t("td",[_._v("传输速率")]),_._v(" "),t("td",[_._v("慢")]),_._v(" "),t("td",[_._v("快")])]),_._v(" "),t("tr",[t("td",[_._v("资源消耗")]),_._v(" "),t("td",[_._v("大")]),_._v(" "),t("td",[_._v("小")])]),_._v(" "),t("tr",[t("td",[_._v("应用场景")]),_._v(" "),t("td",[_._v("浏览器、文件传输、邮件发送")]),_._v(" "),t("td",[_._v("音视频通话、直播")])]),_._v(" "),t("tr",[t("td",[_._v("应用层协议")]),_._v(" "),t("td",[_._v("HTTP、HTTPS、FTP、SMTP、DNS")]),_._v(" "),t("td",[_._v("DNS")])])])]),_._v(" "),t("h4",{attrs:{id:"_4-4-1-udp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-1-udp"}},[_._v("#")]),_._v(" 4.4.1 UDP")]),_._v(" "),t("p",[t("code",[_._v("UDP")]),_._v("是无连接的，减少了建立和释放连接的开销，"),t("code",[_._v("UDP")]),_._v("尽最大能力交付，不保证可靠交付。因此不需要维护一些复杂的参数，首部只有8个字节")]),_._v(" "),t("p",[_._v("数据格式")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131537.png",alt:"image-20210213200417043"}})]),_._v(" "),t("ol",[t("li",[t("p",[t("code",[_._v("UDP")]),_._v("长度")]),_._v(" "),t("p",[_._v("长度是指这一个"),t("code",[_._v("UDP")]),_._v("数据包的总长度，这个字段的设计是为了保证首部是32bit对齐，因为数据包的长度可以由网络层"),t("code",[_._v("IP")]),_._v("数据包的首部推测出来")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("UDP")]),_._v("检验和")]),_._v(" "),t("p",[_._v("检验和的计算内容：伪首部 + 首部 + 数据")])])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131546.png",alt:"image-20210213200749930"}})]),_._v(" "),t("p",[_._v("伪首部只在计算校验和时生效，并不会传送给网络层")]),_._v(" "),t("h4",{attrs:{id:"_4-4-2-tcp数据格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-2-tcp数据格式"}},[_._v("#")]),_._v(" 4.4.2 TCP数据格式")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131555.png",alt:"image-20210214103809588"}})]),_._v(" "),t("ol",[t("li",[t("p",[_._v("序号")]),_._v(" "),t("p",[t("code",[_._v("Sequence Number")]),_._v("：占4字节，首先，在传输过程的每一个字节都会有一个编号，在建立连接后，序号代表：这一次传给对方的"),t("code",[_._v("TCP")]),_._v("数据部分的第一个字节的编号")])]),_._v(" "),t("li",[t("p",[_._v("确认号")]),_._v(" "),t("p",[t("code",[_._v("Acknowledgment Number")]),_._v("：占4字节，在建立连接后，确认号代表：期望对方下一次传过来的"),t("code",[_._v("TCP")]),_._v("数据部分的第一个字节的编号")])]),_._v(" "),t("li",[t("p",[_._v("数据偏移")]),_._v(" "),t("p",[_._v("占4位，首部长度，需要乘以4，取值范围20~60")])]),_._v(" "),t("li",[t("p",[_._v("保留位")]),_._v(" "),t("p",[_._v("占6位，目前全为0")])]),_._v(" "),t("li",[t("p",[_._v("标志位")]),_._v(" "),t("p",[_._v("占6位，取值代表不同的意思")]),_._v(" "),t("p",[t("code",[_._v("URG")]),_._v("(Urgent)：当"),t("code",[_._v("URG=1")]),_._v("时，紧急指针字段才有效。表明当前报文字段中有紧急数据，应优先尽快传送")]),_._v(" "),t("p",[t("code",[_._v("ACK")]),_._v("(Acknowledgement)：当"),t("code",[_._v("ACK=1")]),_._v("时，确认号字段才有效")]),_._v(" "),t("p",[t("code",[_._v("PSH")]),_._v("(Push)")]),_._v(" "),t("p",[t("code",[_._v("RST")]),_._v("(Reset)：当"),t("code",[_._v("RST=1")]),_._v("时，表明连接中出现严重差错，必须释放连接，然后再重新建立连接")]),_._v(" "),t("p",[t("code",[_._v("SYN")]),_._v("(Synchromization)：当"),t("code",[_._v("SYN=1")]),_._v("、"),t("code",[_._v("ACK=0")]),_._v("时，表明这是一个建立连接的请求；若对方同意建立连接，则回复"),t("code",[_._v("SYN=1")]),_._v("、"),t("code",[_._v("ACK=1")])]),_._v(" "),t("p",[t("code",[_._v("FIN")]),_._v("(Finsh)：当"),t("code",[_._v("FIN=1")]),_._v("时，表明数据已经发送完毕，要求释放连接")])]),_._v(" "),t("li",[t("p",[_._v("窗口")]),_._v(" "),t("p",[_._v("占2字节")]),_._v(" "),t("p",[_._v("具有流量控制功能，告诉对方预留的缓冲区大小")])]),_._v(" "),t("li",[t("p",[_._v("检验和")]),_._v(" "),t("p",[_._v("跟"),t("code",[_._v("UDP")]),_._v("一样，"),t("code",[_._v("TCP")]),_._v("检验和的计算内容：伪首部+首部+数据")]),_._v(" "),t("p",[_._v("伪首部占12字节，只在计算检验和时有效")])]),_._v(" "),t("li",[t("p",[_._v("紧急指针")]),_._v(" "),t("p",[_._v("数字表示"),t("code",[_._v("TCP")]),_._v("数据部分的前几位是紧急数据，需要优先传送")])])]),_._v(" "),t("h4",{attrs:{id:"_4-4-3-tcp可靠传输"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-3-tcp可靠传输"}},[_._v("#")]),_._v(" 4.4.3 TCP可靠传输")]),_._v(" "),t("p",[t("strong",[_._v("停止等待ARQ协议")])]),_._v(" "),t("p",[t("code",[_._v("ARQ")]),_._v("(Automatic Repeat-request)，自动重传请求")]),_._v(" "),t("ul",[t("li",[_._v("超时重传")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131609.png",alt:"image-20210214210649285"}})]),_._v(" "),t("ul",[t("li",[_._v("确认丢失")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131626.png",alt:"image-20210214211016272"}})]),_._v(" "),t("p",[t("strong",[_._v("连续ARQ协议+滑动窗口协议")])]),_._v(" "),t("img",{staticStyle:{zoom:"60%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131655.png"}}),_._v(" "),t("p",[t("strong",[_._v("选择性确认")])]),_._v(" "),t("p",[_._v("在"),t("code",[_._v("TCP")]),_._v("通信过程中，如果发送序列中间某个数据包丢失（比如1、2、3、4、5中的3丢失了），如果正常情况下会重传(3、4、5)。4和5就属于重复发送，为了解决上述问题，发展出了"),t("code",[_._v("SACK")]),_._v("(Selective Acknowledgment，选择性确认)技术，可以告诉发送放哪些数据已经发送成功，哪些发送失败需要重新发送。")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131710.png"}}),_._v(" "),t("p",[t("code",[_._v("SACK")]),_._v("信息放在"),t("code",[_._v("TCP")]),_._v("首部的选项部分")]),_._v(" "),t("ul",[t("li",[t("code",[_._v("Kind")]),_._v("：占1字节。值为5代表这是"),t("code",[_._v("SACK")]),_._v("选项")]),_._v(" "),t("li",[t("code",[_._v("Length")]),_._v("：占1字节。表明"),t("code",[_._v("SACK")]),_._v("选项一共占用多少字节")]),_._v(" "),t("li",[t("code",[_._v("Left Edge")]),_._v("：占4字节。左边界")]),_._v(" "),t("li",[t("code",[_._v("Right Edge")]),_._v("：占4字节。右边界")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131902.png",alt:"image-20210215150858248"}})]),_._v(" "),t("p",[_._v("一对边界信息需要占8字节，由于"),t("code",[_._v("TCP")]),_._v("首部的选项部分最多40字节，所以"),t("code",[_._v("SACK")]),_._v("选项最多携带4组边界信息")]),_._v(" "),t("p",[_._v("对于重传的数据包如果超过一定的重传次数，仍然传输失败（未收到对方的确认报文），则会断开连接，重新建立")]),_._v(" "),t("h4",{attrs:{id:"_4-4-4-tcp流量控制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-4-tcp流量控制"}},[_._v("#")]),_._v(" 4.4.4 TCP流量控制")]),_._v(" "),t("p",[_._v("让发送方的发送速率不要太快，让接受方能够及时处理，主要原理是通过确认报文中窗口字段来控制发送方的发送速率，如果接受窗口的大小为0，则发送方会停止发送")]),_._v(" "),t("p",[t("strong",[_._v("特殊情况")])]),_._v(" "),t("p",[_._v("第一次接受方发送0窗口的报文字段，但在后面接受方有了一些存储空间，给发送方发送的非0窗口的报文段丢失了，双方会陷入僵局。解决方案：当发送发接收到0窗口通知时，这时发送方停止发送报文，并且同时开启一个定时器，隔一段时间之后就发个测试报文去询问接受方最新的窗口大小，如果还是0则会再次启动定时器")]),_._v(" "),t("h4",{attrs:{id:"_4-4-5-tcp拥塞控制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-5-tcp拥塞控制"}},[_._v("#")]),_._v(" 4.4.5 TCP拥塞控制")]),_._v(" "),t("img",{staticStyle:{zoom:"60%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403131914.png"}}),_._v(" "),t("p",[t("strong",[_._v("拥塞控制")])]),_._v(" "),t("p",[_._v("防止过多的数据注入到网络中，避免网络中的路由器或链路过载。拥塞控制是一个全局性的过程，涉及到所有的主机、路由器以及与降低网络传输性能有关的所有因素")]),_._v(" "),t("p",[t("strong",[_._v("几个缩写")])]),_._v(" "),t("p",[t("code",[_._v("MSS")]),_._v("（Maximum Segment Size）：每个段最大的数据部分大小，连接时由双方协商确定")]),_._v(" "),t("p",[t("code",[_._v("cwnd")]),_._v("（congestion window）：拥塞窗口")]),_._v(" "),t("p",[t("code",[_._v("rwnd")]),_._v("（receive window）：接受窗口")]),_._v(" "),t("p",[t("code",[_._v("swnd")]),_._v("（send window）：发送窗口")]),_._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[_._v("swnd "),t("span",{pre:!0,attrs:{class:"token operator"}},[_._v("=")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[_._v("min")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("(")]),_._v("cwnd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v(" rwnd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(")")]),_._v("\n")])])]),t("p",[t("strong",[_._v("拥塞控制的方法")])]),_._v(" "),t("ol",[t("li",[t("p",[_._v("慢开始（slow start）")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132002.png",alt:"image-20210218151606670"}})]),_._v(" "),t("p",[_._v("发送时，刚开始慢，后面越来越快。"),t("code",[_._v("cwnd")]),_._v("的初始值比较小，然后随着数据包被接受方确认（收到一个ACK）之后成指数级增长")])]),_._v(" "),t("li",[t("p",[_._v("拥塞避免（congestion avoidance）")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132014.png",alt:"image-20210218152151150"}})]),_._v(" "),t("p",[t("code",[_._v("ssthresh")]),_._v("（slow start threshold）：慢开始阈值，"),t("code",[_._v("cwnd")]),_._v("达到阈值后，以线性方式增加。拥塞窗口缓慢增大，以防止网络过早出现拥塞")]),_._v(" "),t("p",[_._v("乘法减小：只要网络出现拥塞，把"),t("code",[_._v("ssthresh")]),_._v("减半，与此同时，执行慢开始算法（"),t("code",[_._v("cwnd")]),_._v("又恢复到初始值）")])]),_._v(" "),t("li",[t("p",[_._v("快速重传（fast retransmit）")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132024.png",alt:"image-20210218154923271"}})]),_._v(" "),t("p",[_._v("接受方：每收到一个失序的分组后就立即发出重复确认，使发送方及时知道有分组没有到达，而不要等待自己发送数据时才进行确认")]),_._v(" "),t("p",[_._v("发送方：只要连续收到三个重复确认（总共4个相同的确认），就应当立即重传对方尚未收到的报文段，而不必继续等待重传计时器到期后再重传")])]),_._v(" "),t("li",[t("p",[_._v("快速恢复（fast recovery）")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132033.png",alt:"image-20210218155714515"}})])])]),_._v(" "),t("p",[_._v('当发送方连续收到三个重复确认，就执行"乘法减小"算法，把'),t("code",[_._v("ssthresh")]),_._v("减半，与蛮开始不同之处是现在不执行慢开始算法，即"),t("code",[_._v("cwnd")]),_._v("现在不恢复到初始值，而是把"),t("code",[_._v("cwnd")]),_._v("值设置为"),t("code",[_._v("ssthresh")]),_._v('减半后的数值，人后开始执行拥塞避免算法（"线性增大"），使拥塞窗口缓慢地线性增大')]),_._v(" "),t("h4",{attrs:{id:"_4-4-6-tcp建立连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-6-tcp建立连接"}},[_._v("#")]),_._v(" 4.4.6 TCP建立连接")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132044.png"}}),_._v(" "),t("p",[t("strong",[_._v("客户端申请建立连接")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132126.png",alt:"image-20210218193808063"}})]),_._v(" "),t("p",[t("strong",[_._v("服务器发送数据")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132134.png",alt:"image-20210218202859094"}})]),_._v(" "),t("p",[t("strong",[_._v("客户端确认")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132142.png",alt:"image-20210218204210161"}})]),_._v(" "),t("p",[t("strong",[_._v("三次握手")])]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132208.png"}}),_._v(" "),t("p",[t("code",[_._v("CLOSED")]),_._v("："),t("code",[_._v("client")]),_._v("处于关闭状态")]),_._v(" "),t("p",[t("code",[_._v("LISTEN")]),_._v("："),t("code",[_._v("server")]),_._v("处于监听状态，等待"),t("code",[_._v("client")]),_._v("连接")]),_._v(" "),t("p",[t("code",[_._v("SYN-RCVD")]),_._v("：表明"),t("code",[_._v("server")]),_._v("接收到了"),t("code",[_._v("SYN")]),_._v("报文，当收到"),t("code",[_._v("client")]),_._v("的"),t("code",[_._v("ACK")]),_._v("的报文后，它会进入到"),t("code",[_._v("ESTABLISHED")]),_._v("状态")]),_._v(" "),t("p",[t("code",[_._v("SYN-SEND")]),_._v("：表明"),t("code",[_._v("client")]),_._v("已发送"),t("code",[_._v("SYN")]),_._v("报文，等待"),t("code",[_._v("server")]),_._v("的第2次握手")]),_._v(" "),t("p",[t("code",[_._v("ESTABLISHED")]),_._v("：连接已经建立")]),_._v(" "),t("p",[_._v("前两次的握手中头部占32字节，固定20字节+选项12字节")]),_._v(" "),t("p",[t("strong",[_._v("三次握手的目的")])]),_._v(" "),t("p",[_._v("3次握手的主要目的是防止"),t("code",[_._v("server")]),_._v("端一直等待，浪费资源。假设有如下情况")]),_._v(" "),t("p",[_._v("一个"),t("code",[_._v("client")]),_._v("发出的第一个连接请求报文段，因为网络延迟，在第二次连接已经释放后的某个时间才到达"),t("code",[_._v("server")]),_._v("，这是一个已经失效的连接请求，但"),t("code",[_._v("server")]),_._v("收到后，误以为是"),t("code",[_._v("client")]),_._v("再次发出的一个新的连接请求，于是"),t("code",[_._v("server")]),_._v("就想"),t("code",[_._v("client")]),_._v("发出确认报文段，同意建立连接，但是因为是两次握手，只要"),t("code",[_._v("server")]),_._v("发出确认，新的连接就建立了。由于现在的"),t("code",[_._v("client")]),_._v("并没有真正想连接服务器的意愿，因此不会理睬"),t("code",[_._v("server")]),_._v("的确认报文段，但是"),t("code",[_._v("server")]),_._v("却以为新的连接已经建立，并一直等待"),t("code",[_._v("client")]),_._v("发来的数据，这样，"),t("code",[_._v("server")]),_._v("的很多资源就浪费了")]),_._v(" "),t("p",[_._v("第三次握手失败情况")]),_._v(" "),t("p",[_._v("此时"),t("code",[_._v("server")]),_._v("的状态为"),t("code",[_._v("SYN-RCVD")]),_._v("，若等不到"),t("code",[_._v("client")]),_._v("的"),t("code",[_._v("ACK")]),_._v("，"),t("code",[_._v("server")]),_._v("会重新发送"),t("code",[_._v("SYN")]),_._v("+"),t("code",[_._v("ACK")]),_._v("包，如果"),t("code",[_._v("server")]),_._v("多次重发"),t("code",[_._v("SYN")]),_._v("+"),t("code",[_._v("ACK")]),_._v("都等不到"),t("code",[_._v("client")]),_._v("的"),t("code",[_._v("ACK")]),_._v("，就会发送"),t("code",[_._v("RST")]),_._v("包，强制关闭连接")]),_._v(" "),t("h4",{attrs:{id:"_4-4-7-tcp断开连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-7-tcp断开连接"}},[_._v("#")]),_._v(" 4.4.7 TCP断开连接")]),_._v(" "),t("p",[t("strong",[_._v("四次挥手")])]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132243.png"}}),_._v(" "),t("p",[t("strong",[_._v("状态解读")])]),_._v(" "),t("ol",[t("li",[t("p",[t("code",[_._v("FIN-WAIT-1")]),_._v("：表示想主动关闭连接")]),_._v(" "),t("p",[_._v("向对方发送"),t("code",[_._v("FIN")]),_._v("报文，此时进入到"),t("code",[_._v("FIN-WAIT-1")]),_._v("状态")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("CLOSE-WAIT")]),_._v("：表示在等待关闭")]),_._v(" "),t("p",[_._v("当对方发送"),t("code",[_._v("FIN")]),_._v("给自己，自己会回应一个"),t("code",[_._v("ACK")]),_._v("报文给对方，此时则进入到"),t("code",[_._v("CLOSE-WAIT")]),_._v("状态，在此状态下，需要考虑自己是否还有数据要发送给对方，如果没有，发送"),t("code",[_._v("FIN")]),_._v("报文给对方")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("FIN-WAIT-2")]),_._v("：只要对方发送"),t("code",[_._v("ACK")]),_._v("确认后，主动方就会处于"),t("code",[_._v("FIN-WAIT-2")]),_._v("状态，然后等待对方发送"),t("code",[_._v("FIN")]),_._v("报文")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("CLOSING")]),_._v("：一种比较罕见的例外状态，标识双方都正在关闭连接")]),_._v(" "),t("p",[_._v("表示你发送"),t("code",[_._v("FIN")]),_._v("报文后，并没有收到对方的"),t("code",[_._v("ACK")]),_._v("报文，反而却收到了对方的"),t("code",[_._v("FIN")]),_._v("报文")]),_._v(" "),t("p",[_._v("如果双方几乎在同时准备关闭连接的话，那么就出现了同时发送"),t("code",[_._v("FIN")]),_._v("报文的情况，也会出现"),t("code",[_._v("CLOSING")]),_._v("状态")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("LAST-ACK")]),_._v("：被动关闭一方在发送"),t("code",[_._v("FIN")]),_._v("报文后，最后等待对方的"),t("code",[_._v("ACK")]),_._v("报文")]),_._v(" "),t("p",[_._v("当收到"),t("code",[_._v("ACK")]),_._v("报文后，即可进入"),t("code",[_._v("CLOSED")]),_._v("状态")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("TIME-WAIT")]),_._v("：表示收到了对方的"),t("code",[_._v("FIN")]),_._v("报文，并发送出了"),t("code",[_._v("ACK")]),_._v("报文，就等"),t("code",[_._v("2MSL")]),_._v("后即可进入"),t("code",[_._v("CLOSED")]),_._v("状态了")]),_._v(" "),t("p",[_._v("如果在"),t("code",[_._v("FIN-WAIT-1")]),_._v("状态下，收到了对方同时带"),t("code",[_._v("FIN")]),_._v("标志和"),t("code",[_._v("ACK")]),_._v("标志的报文时，可直接进入到"),t("code",[_._v("TIME-WAIT")]),_._v("状态，而无需经过"),t("code",[_._v("FIN-WAIT-2")]),_._v("状态")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("CLOSED")]),_._v("：关闭状态")]),_._v(" "),t("p",[_._v("由于有些状态的时间比较短暂，所以很难用"),t("code",[_._v("netstat")]),_._v("命令看到")])])]),_._v(" "),t("p",[t("strong",[_._v("为什么需要四次挥手")])]),_._v(" "),t("ol",[t("li",[t("p",[_._v("当主机1(client)发出"),t("code",[_._v("FIN")]),_._v("报文段时")]),_._v(" "),t("p",[_._v("表示主机1告诉主机2(server)，主机1已经没有数据要发送了，但是，此时主机1还是可以接受来自主机2的数据")])]),_._v(" "),t("li",[t("p",[_._v("当主机2返回"),t("code",[_._v("ACK")]),_._v("报文段时")]),_._v(" "),t("p",[_._v("表示主机2已经知道主机1没有数据发送了，但是主机2还是可以发送数据到主机1的")])]),_._v(" "),t("li",[t("p",[_._v("当主机2也发送了"),t("code",[_._v("FIN")]),_._v("报文段时")]),_._v(" "),t("p",[_._v("表示主机2告诉主机1，主机2已经没有数据要发送了")])]),_._v(" "),t("li",[t("p",[_._v("当主机1返回"),t("code",[_._v("ACK")]),_._v("报文段时")]),_._v(" "),t("p",[_._v("表示主机1已经知道主机2没有数据发送了，随后正式断开整个"),t("code",[_._v("TCP")]),_._v("连接")])])]),_._v(" "),t("p",[t("strong",[_._v("释放连接的细节")])]),_._v(" "),t("ol",[t("li",[t("p",[t("code",[_._v("TCP/IP")]),_._v("协议栈在设计上，允许任何一方先发起断开请求。")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("client")]),_._v("发送"),t("code",[_._v("ACK")]),_._v("后，需要有个"),t("code",[_._v("TIME-WAIT")]),_._v("阶段，等待一段时间后，再真正关闭连接")]),_._v(" "),t("p",[_._v("一般等待2倍的"),t("code",[_._v("MSL")]),_._v("（"),t("code",[_._v("Maximum Segment Lifetime")]),_._v("，最大分段生存期）")]),_._v(" "),t("p",[t("code",[_._v("MSL")]),_._v("是"),t("code",[_._v("TCP")]),_._v("报文在"),t("code",[_._v("Internet")]),_._v("上的最长生存时间，每个具体的"),t("code",[_._v("TCP")]),_._v("实现都必须选择一个确定的"),t("code",[_._v("MSL")]),_._v("值，"),t("code",[_._v("RFC 1122")]),_._v("建议是2分钟")])]),_._v(" "),t("li",[t("p",[_._v("如果"),t("code",[_._v("client")]),_._v("发送"),t("code",[_._v("ACK")]),_._v("后马上释放了，然后又因为网络原因，"),t("code",[_._v("server")]),_._v("没有收到"),t("code",[_._v("client")]),_._v("的"),t("code",[_._v("ACK")]),_._v("，"),t("code",[_._v("server")]),_._v("就会重发"),t("code",[_._v("FIN")])]),_._v(" "),t("p",[_._v("可能出现的情况")]),_._v(" "),t("ul",[t("li",[t("code",[_._v("client")]),_._v("没有任何回应，服务器一直等待，甚至多次重发"),t("code",[_._v("FIN")]),_._v("，浪费资源")]),_._v(" "),t("li",[t("code",[_._v("client")]),_._v("有个新的应用程序刚好分配了同一个端口，新的应用程序收到"),t("code",[_._v("FIN")]),_._v("后马上开始执行断开连接的操作")])])]),_._v(" "),t("li",[t("p",[_._v("有的时候使用抓包工具时，可能只会看到3次挥手")]),_._v(" "),t("p",[_._v("这其实是将第2、3次挥手合并了")]),_._v(" "),t("p",[_._v("当"),t("code",[_._v("server")]),_._v("接受到"),t("code",[_._v("client")]),_._v("的"),t("code",[_._v("FIN")]),_._v("时，如果"),t("code",[_._v("server")]),_._v("后面也没有数据要发送给"),t("code",[_._v("client")]),_._v("了，这时"),t("code",[_._v("server")]),_._v("就可以将第2、3次合并，回复结果中包括告诉"),t("code",[_._v("client")]),_._v("已经收到它的断开请求，告诉"),t("code",[_._v("client")]),_._v("已经没有数据要发了")])])]),_._v(" "),t("h3",{attrs:{id:"_4-5-应用层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-应用层"}},[_._v("#")]),_._v(" 4.5 应用层")]),_._v(" "),t("p",[_._v("常见的协议")]),_._v(" "),t("ul",[t("li",[_._v("超文本传输："),t("code",[_._v("HTTP")]),_._v("、"),t("code",[_._v("HTTPS")])]),_._v(" "),t("li",[_._v("文件传输："),t("code",[_._v("FTP")])]),_._v(" "),t("li",[_._v("电子邮件："),t("code",[_._v("SMTP")]),_._v("、"),t("code",[_._v("POP3")]),_._v("、"),t("code",[_._v("IMAP")])]),_._v(" "),t("li",[_._v("动态主机配置："),t("code",[_._v("DHCP")])]),_._v(" "),t("li",[_._v("域名系统："),t("code",[_._v("DNS")])])]),_._v(" "),t("h4",{attrs:{id:"_4-5-1-域名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-1-域名"}},[_._v("#")]),_._v(" 4.5.1 域名")]),_._v(" "),t("p",[_._v("由于"),t("code",[_._v("IP")]),_._v("地址不方便记忆，并且不能表达组织的名称和性质，人们设计出了域名"),t("code",[_._v("Domain Name")]),_._v("，实际上为了能够访问具体的主机，最终还是得知道目标主机的"),t("code",[_._v("IP")]),_._v("地址")]),_._v(" "),t("p",[_._v("根据级别的不同，域名可以分为")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("顶级域名")]),_._v(" "),t("p",[_._v("通用顶级域名（General Top-level Domain，简称gTLD）")]),_._v(" "),t("p",[t("code",[_._v(".com")]),_._v("公司、"),t("code",[_._v(".net")]),_._v("网络机构、"),t("code",[_._v(".org")]),_._v("组织机构、"),t("code",[_._v(".edu")]),_._v("教育、"),t("code",[_._v(".gov")]),_._v("政府部门、"),t("code",[_._v(".int")]),_._v("国际组织...")]),_._v(" "),t("p",[_._v("国家及地区顶级域名（Country code Top-level Domain，简称ccTLD）")]),_._v(" "),t("p",[t("code",[_._v(".cn")]),_._v("中国、"),t("code",[_._v(".jp")]),_._v("日本、"),t("code",[_._v(".uk")]),_._v("英国...")]),_._v(" "),t("p",[_._v("新通用顶级域名（New Generic Top-level Domain，简称New gTLD）")]),_._v(" "),t("p",[t("code",[_._v(".vip")]),_._v("、"),t("code",[_._v(".xyz")]),_._v("、"),t("code",[_._v(".top")]),_._v("、"),t("code",[_._v(".club")]),_._v("、"),t("code",[_._v(".shop")]),_._v("...")])]),_._v(" "),t("li",[t("p",[_._v("二级域名，顶级域名之下的域名")]),_._v(" "),t("p",[_._v("在通用顶级域名之下的域名，它一般指域名注册人的名称，例如"),t("code",[_._v("google")]),_._v("、"),t("code",[_._v("baidu")]),_._v("、"),t("code",[_._v("microsoft")]),_._v("...")]),_._v(" "),t("p",[_._v("在国家及地区域名下，它一般指注册类别的，例如"),t("code",[_._v("com")]),_._v("、"),t("code",[_._v("edu")]),_._v("、"),t("code",[_._v("gov")]),_._v("、"),t("code",[_._v("net")]),_._v("等")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132323.png",alt:"image-20210219164803428"}})])]),_._v(" "),t("li",[t("p",[_._v("三级域名")])]),_._v(" "),t("li",[t("p",[_._v("...")])])]),_._v(" "),t("h4",{attrs:{id:"_4-5-2-dns"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-2-dns"}},[_._v("#")]),_._v(" 4.5.2 DNS")]),_._v(" "),t("p",[t("code",[_._v("DNS")]),_._v("的全称是："),t("code",[_._v("Domain Name System")]),_._v("，译为：域名系统。利用"),t("code",[_._v("DNS")]),_._v("协议，可以将域名（比如"),t("code",[_._v("baidu.com")]),_._v("）解析成对应的"),t("code",[_._v("IP")]),_._v("地址"),t("code",[_._v("220.181.38.148")])]),_._v(" "),t("p",[t("code",[_._v("DNS")]),_._v("可以基于"),t("code",[_._v("UDP")]),_._v("协议，也可以基于"),t("code",[_._v("TCP")]),_._v("协议，服务器占用53端口")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132334.png",alt:"image-20210219171311319"}})]),_._v(" "),t("p",[t("strong",[_._v("DNS服务器")])]),_._v(" "),t("ol",[t("li",[_._v("客户端首先会访问最近的一台"),t("code",[_._v("DNS")]),_._v("服务器（或者是客户端自己配置的"),t("code",[_._v("DNS")]),_._v("服务器）")]),_._v(" "),t("li",[_._v("所有的"),t("code",[_._v("DNS")]),_._v("服务器都记录了"),t("code",[_._v("DNS")]),_._v("根服务器的"),t("code",[_._v("IP")]),_._v("地址")]),_._v(" "),t("li",[_._v("上级"),t("code",[_._v("DNS")]),_._v("服务器记录了下一级"),t("code",[_._v("DNS")]),_._v("服务器的"),t("code",[_._v("IP")]),_._v("地址")]),_._v(" "),t("li",[_._v("全球一共13台"),t("code",[_._v("IPv4")]),_._v("的"),t("code",[_._v("DNS")]),_._v("根域名服务器、25台"),t("code",[_._v("IPv6")]),_._v("的"),t("code",[_._v("DNS")]),_._v("根域名服务器")])]),_._v(" "),t("h4",{attrs:{id:"_4-5-3-dhcp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-3-dhcp"}},[_._v("#")]),_._v(" 4.5.3 DHCP")]),_._v(" "),t("p",[t("code",[_._v("IP")]),_._v("地址按照分配方式，可以分为：静态"),t("code",[_._v("IP")]),_._v("地址、动态"),t("code",[_._v("IP")]),_._v("地址")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("静态"),t("code",[_._v("ip")]),_._v("地址")]),_._v(" "),t("p",[_._v("手动设置")]),_._v(" "),t("p",[_._v("使用场景：不怎么挪动的台式机（比如学校机房中的台式机）、服务器等")])]),_._v(" "),t("li",[t("p",[_._v("动态"),t("code",[_._v("IP")]),_._v("地址")]),_._v(" "),t("p",[_._v("从"),t("code",[_._v("DHCP")]),_._v("服务器自动获取"),t("code",[_._v("IP")]),_._v("地址")]),_._v(" "),t("p",[_._v("使用场景：移动设备、无线设备等")])])]),_._v(" "),t("p",[t("code",[_._v("DHCP")]),_._v("（Dynamic Host Configuraiton Protocol）：动态主机配置协议，"),t("code",[_._v("DHCP")]),_._v("协议是基于"),t("code",[_._v("UDP")]),_._v("协议，客户端是68端口，服务器是67端口")]),_._v(" "),t("p",[t("code",[_._v("DHCP")]),_._v("服务器会从"),t("code",[_._v("IP")]),_._v("地址池中，挑选一个"),t("code",[_._v("IP")]),_._v("地址“出租”给客户端一段时间，时间到期就回收它们，平时家里上网的路由器可以充当"),t("code",[_._v("DHCP")]),_._v("服务器")]),_._v(" "),t("p",[t("strong",[_._v("DHCP分配流程")])]),_._v(" "),t("ol",[t("li",[t("p",[t("code",[_._v("DISCOVER")]),_._v("：发现服务器")]),_._v(" "),t("p",[_._v("发广播包(源"),t("code",[_._v("IP")]),_._v("是"),t("code",[_._v("0.0.0.0")]),_._v("，目标是"),t("code",[_._v("255.255.255.255")]),_._v("，目标"),t("code",[_._v("MAC")]),_._v("是"),t("code",[_._v("FF:FF:FF:FF:FF:FF")]),_._v(")")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("OFFER")]),_._v("：提供租约")]),_._v(" "),t("p",[_._v("服务器返回可以租用的"),t("code",[_._v("IP")]),_._v("地址，以及租用期限、子网掩码、网管、"),t("code",[_._v("DNS")]),_._v("等信息，可能会有多个服务器提供租约")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("REQUEST")]),_._v("：选择"),t("code",[_._v("IP")]),_._v("地址")]),_._v(" "),t("p",[_._v("客户端选择一个"),t("code",[_._v("OFFER")]),_._v("，发送广播包进行回应")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("ACKNOWLEDGE")]),_._v("：确认")]),_._v(" "),t("p",[_._v("被选中的服务器发送"),t("code",[_._v("ACK")]),_._v("数据包给客户端，"),t("code",[_._v("IP")]),_._v("地址分配完毕")])])]),_._v(" "),t("p",[t("strong",[_._v("细节")])]),_._v(" "),t("ol",[t("li",[t("code",[_._v("DHCP")]),_._v("服务器可以借助"),t("code",[_._v("DHCP")]),_._v("中继代理（"),t("code",[_._v("DHCP Relay Agent")]),_._v("）实现跨网段分配"),t("code",[_._v("IP")]),_._v("地址（假设"),t("code",[_._v("DHCP")]),_._v("服务器、客户端不在同一个网段）")]),_._v(" "),t("li",[_._v("自动续约：客户端会在租期不足的时候，自动向"),t("code",[_._v("DHCP")]),_._v("服务器发送"),t("code",[_._v("REQUEST")]),_._v("信息申请续约")])]),_._v(" "),t("h4",{attrs:{id:"_4-5-4-http"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-4-http"}},[_._v("#")]),_._v(" 4.5.4 HTTP")]),_._v(" "),t("p",[t("code",[_._v("HTTP")]),_._v("（Hyper Text Transfer Protocol）：超文本传输协议，是互联网中应用最广泛的应用层协议之一。设计"),t("code",[_._v("HTTP")]),_._v("最初的目的是：提供一种发布和接受"),t("code",[_._v("HTML")]),_._v("页面的方法，由"),t("code",[_._v("URI")]),_._v("来标识具体的资源；后面用"),t("code",[_._v("HTTP")]),_._v("传递的数据格式不仅仅是"),t("code",[_._v("HTML")]),_._v("，应用非常广泛")]),_._v(" "),t("p",[t("code",[_._v("HTTP")]),_._v("的标准是由万维网协会"),t("code",[_._v("W3C")]),_._v("、互联网工程任务组"),t("code",[_._v("IETF")]),_._v("协调指定，最终发布的一系列的"),t("code",[_._v("RFC")]),_._v("（Request For Comments，可以译为：请求意见稿）")]),_._v(" "),t("p",[t("strong",[_._v("版本")])]),_._v(" "),t("ol",[t("li",[_._v("1991年"),t("code",[_._v("HTTP/0.9")]),_._v("，只支持"),t("code",[_._v("GET")]),_._v("请求方法获取文本数据（比如"),t("code",[_._v("HTML")]),_._v("文档），且不支持请求头、响应头等，无法向服务器传递太多信息")]),_._v(" "),t("li",[_._v("1996年"),t("code",[_._v("HTTP/1.0")]),_._v("，支持"),t("code",[_._v("POST")]),_._v("、"),t("code",[_._v("HEAD")]),_._v("等请求方法，支持请求头、响应头等，支持更多种数据类型（不再局限于文本数据），浏览器每次请求都需要与服务器建立一个"),t("code",[_._v("TCP")]),_._v("连接，请求处理完成后立即断开"),t("code",[_._v("TCP")]),_._v("连接")]),_._v(" "),t("li",[_._v("1997年"),t("code",[_._v("HTTP/1.1")]),_._v("，最经典、使用最广泛的版本。支持"),t("code",[_._v("PUT")]),_._v("、"),t("code",[_._v("DELETE")]),_._v("等请求方法，采用持久连接"),t("code",[_._v("Connection: keep-alive")]),_._v("，多个请求可以共用一个"),t("code",[_._v("TCP")]),_._v("连接")]),_._v(" "),t("li",[_._v("2015年"),t("code",[_._v("HTTP/2.0")])]),_._v(" "),t("li",[_._v("2018年"),t("code",[_._v("HTTP/3.0")])])]),_._v(" "),t("p",[t("strong",[_._v("报文格式")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132347.png",alt:"image-20210219204320592"}})]),_._v(" "),t("ol",[t("li",[t("p",[_._v("请求报文")]),_._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[_._v("POST /s1/login HTTP/1.1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("8080")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Connection")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" keep"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("alive\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Content-Length")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("25")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Cache-Control")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" max"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("age=0\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Upgrade-Insecure-Requests")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("1")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Origin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" http"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v("//localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("8080")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Content-Type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" application/x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("www"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("form"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("urlencoded\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("User-Agent")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v(" like Gecko) Chrome/88.0.4324.182 Safari/537.36 Edg/88.0.705.74\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Accept")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" text/html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v("application/xhtml+xml"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v("application/xml;q=0.9"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v("image/webp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v("image/apng"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),t("span",{pre:!0,attrs:{class:"token important"}},[_._v("*/*;q=0.8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v("application/signed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("exchange;v=b3;q=0.9\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Sec-Fetch-Site")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" same"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("origin\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Sec-Fetch-Mode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" navigate\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Sec-Fetch-User")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("?")]),_._v("1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Sec-Fetch-Dest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" document\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Referer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" http"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v("//localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v("8080/s1/html/login.html\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Accept-Encoding")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" gzip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v(" deflate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v(" br\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Accept-Language")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" zh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("CN"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v("zh;q=0.9"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v("en;q=0.8"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v("en"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("GB;q=0.7"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v("en"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("US;q=0.6"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v("zh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("TW;q=0.5\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Cookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" JSESSIONID=FE9FD8715D870123295BBC401B6DB7E6; Idea"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("9729ea=64ab6b25"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("3255"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("43ab"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("9637"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("7c28d339adb8\n\nusername=123"),t("span",{pre:!0,attrs:{class:"token important"}},[_._v("&password=456")]),_._v("\n")])])])]),_._v(" "),t("li",[t("p",[_._v("响应报文")]),_._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[_._v("HTTP/1.1 200 \n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Content-Length")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("16")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Date")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" Fri"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v(" 19 Feb 2021 12"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v("37"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v("46 GMT\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Keep-Alive")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" timeout=20\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Connection")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" keep"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("-")]),_._v("alive\n\nLogin Success"),t("span",{pre:!0,attrs:{class:"token tag"}},[_._v("!")]),t("span",{pre:!0,attrs:{class:"token tag"}},[_._v("!")]),t("span",{pre:!0,attrs:{class:"token tag"}},[_._v("!")]),_._v("\n")])])])])]),_._v(" "),t("p",[t("strong",[_._v("ABNF")])]),_._v(" "),t("p",[t("code",[_._v("ABNF")]),_._v("（Augmented BNF）是"),t("code",[_._v("BNF")]),_._v("（Backus-Naur Form，巴科斯-瑙尔范式）的修改、增强版，"),t("code",[_._v("ABNF")]),_._v("用作"),t("code",[_._v("internet")]),_._v("中通信协议的定义语言")]),_._v(" "),t("p",[_._v("整体格式")]),_._v(" "),t("div",{staticClass:"language-ABNF extra-class"},[t("pre",{pre:!0,attrs:{class:"language-abnf"}},[t("code",[t("span",{pre:!0,attrs:{class:"token rule"}},[_._v("HTTP-message")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[_._v("=")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token rule"}},[_._v("start-line")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token repetition operator"}},[_._v("*")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("(")]),t("span",{pre:!0,attrs:{class:"token rule"}},[_._v("header-field")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token core-rule rule constant"}},[_._v("CRLF")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(")")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token core-rule rule constant"}},[_._v("CRLF")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("[")]),t("span",{pre:!0,attrs:{class:"token rule"}},[_._v("message-body")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("]")]),_._v("\n")])])]),t("ul",[t("li",[t("code",[_._v("start-line")]),_._v("：请求行"),t("code",[_._v("request-line")]),_._v("或者响应行"),t("code",[_._v("status-line")])]),_._v(" "),t("li",[t("code",[_._v("*")]),_._v("：0个或者多个。2*表示至少2个，3*6表示3到6个")]),_._v(" "),t("li",[t("code",[_._v("()")]),_._v("：组成一个整体")]),_._v(" "),t("li",[t("code",[_._v("[]")]),_._v("：可选")])]),_._v(" "),t("p",[t("strong",[_._v("URL编码")])]),_._v(" "),t("p",[t("code",[_._v("URL")]),_._v("中一旦出现了一些特殊字符（比如中文、空格），需要进行编码，在浏览器地址栏输入"),t("code",[_._v("URL")]),_._v("时，是采用"),t("code",[_._v("UTF-8")]),_._v("进行编码")]),_._v(" "),t("p",[t("strong",[_._v("请求方法")])]),_._v(" "),t("ol",[t("li",[t("code",[_._v("GET")]),_._v("：常用于读取的操作，请求参数直接拼接在"),t("code",[_._v("URL")]),_._v("的后面（浏览器对"),t("code",[_._v("URL")]),_._v("是有长度限制的）")]),_._v(" "),t("li",[t("code",[_._v("POST")]),_._v("：常用于添加、修改、删除的操作，请求参数可以放到请求体中（没有大小限制）")]),_._v(" "),t("li",[t("code",[_._v("HEAD")]),_._v("：请求得到与"),t("code",[_._v("GET")]),_._v("请求相同的响应，但没有响应体（即只获取响应头）")]),_._v(" "),t("li",[t("code",[_._v("OPTIONS")]),_._v("：用于获取目的资源所支持的通信选项，比如服务器支持的请求方法")]),_._v(" "),t("li",[t("code",[_._v("PUT")]),_._v("：用于对已存在的资源进行整体覆盖")]),_._v(" "),t("li",[t("code",[_._v("PATCH")]),_._v("：用于对资源进行部分修改（资源不存在，会创建新的资源）")]),_._v(" "),t("li",[t("code",[_._v("DELETE")]),_._v("：用于删除指定的资源")]),_._v(" "),t("li",[t("code",[_._v("TRACE")]),_._v("：请求服务器回显其收到的请求信息，主要用于"),t("code",[_._v("HTTP")]),_._v("请求的测试或诊断")]),_._v(" "),t("li",[t("code",[_._v("CONNECT")]),_._v("：可以开启一个客户端与所请求资源之间的双向沟通的通道，它可以用来创建隧道"),t("code",[_._v("tunnel")]),_._v("，可以用来访问采用了"),t("code",[_._v("SSL(HTTPS)")]),_._v("协议的站点")])]),_._v(" "),t("p",[t("strong",[_._v("头部字段")])]),_._v(" "),t("p",[_._v("类型")]),_._v(" "),t("ul",[t("li",[_._v("请求头字段"),t("code",[_._v("Request Header Fields")]),_._v("，有关要获取的资源或客户端本身信息的消息头")]),_._v(" "),t("li",[_._v("响应头字段"),t("code",[_._v("Response Header Fields")]),_._v("，有关响应的补充信息，比如服务器本身（名称和版本等）的消息头")]),_._v(" "),t("li",[_._v("实体头字段"),t("code",[_._v("Entity Header Fields")]),_._v("，有关实体主体的更多信息，比如主体长度"),t("code",[_._v("Content-Length")]),_._v("或者"),t("code",[_._v("MIME")]),_._v("类型")]),_._v(" "),t("li",[_._v("通用头字段"),t("code",[_._v("General Header Fields")]),_._v("，同时适用于请求和响应消息，但与消息主体无关的消息头")])]),_._v(" "),t("p",[_._v("请求头字段")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("头部字段")]),_._v(" "),t("th",[_._v("说明")]),_._v(" "),t("th",[_._v("示例")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("User-Agent")]),_._v(" "),t("td",[_._v("浏览器的身份标识字符串")]),_._v(" "),t("td",[_._v("User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.182 Safari/537.36 Edg/88.0.705.74")])]),_._v(" "),t("tr",[t("td",[_._v("Host")]),_._v(" "),t("td",[_._v("服务器的域名、端口号")]),_._v(" "),t("td",[_._v("Host: localhost:8080")])]),_._v(" "),t("tr",[t("td",[_._v("Date")]),_._v(" "),t("td",[_._v("发送消息的日期和时间")]),_._v(" "),t("td",[_._v("Date: Fri, 19 Feb 2021 12:37:46 GMT")])]),_._v(" "),t("tr",[t("td",[_._v("Referer")]),_._v(" "),t("td",[_._v("表示浏览器所访问的前一个页面，正是那个页面上的某个链接将浏览器带到了当前所请求的这个页面")]),_._v(" "),t("td",[_._v("Referer: https://www.baidu.com")])]),_._v(" "),t("tr",[t("td",[_._v("Content-Type")]),_._v(" "),t("td",[_._v("请求体的类型")]),_._v(" "),t("td",[_._v("Content-Type: application/x-www-form-urlencoded")])]),_._v(" "),t("tr",[t("td",[_._v("Content-Length")]),_._v(" "),t("td",[_._v("请求体的长度（字节）")]),_._v(" "),t("td",[_._v("Content-Length: 16")])]),_._v(" "),t("tr",[t("td",[_._v("Accept")]),_._v(" "),t("td",[_._v("能够接受的响应内容类型（Content-Types）")]),_._v(" "),t("td",[_._v("Accept: text/plain")])]),_._v(" "),t("tr",[t("td",[_._v("Accept-Charset")]),_._v(" "),t("td",[_._v("能够接受的字符集")]),_._v(" "),t("td",[_._v("Accept-Charset: utf-8")])]),_._v(" "),t("tr",[t("td",[_._v("Accept-Encoding")]),_._v(" "),t("td",[_._v("能够接受的编码方式列表")]),_._v(" "),t("td",[_._v("Accept-Encoding: gzip, deflate")])]),_._v(" "),t("tr",[t("td",[_._v("Accept-Language")]),_._v(" "),t("td",[_._v("能够接受的响应内容的自然语言列表")]),_._v(" "),t("td",[_._v("Accept-Language: en-US")])]),_._v(" "),t("tr",[t("td",[_._v("Range")]),_._v(" "),t("td",[_._v("仅请求某个实体的一部分。字节偏移以0开始")]),_._v(" "),t("td",[_._v("Range: bytes=500-999")])]),_._v(" "),t("tr",[t("td",[_._v("Origin")]),_._v(" "),t("td",[_._v("发起一个针对跨域资源共享的请求")]),_._v(" "),t("td",[_._v("Origin: https://www.baidu.com")])]),_._v(" "),t("tr",[t("td",[_._v("Cookie")]),_._v(" "),t("td",[_._v("之前由服务器通过Set-Cookie发送的Cookie")]),_._v(" "),t("td",[_._v("Cookie: $Version=1; Skin=new;")])]),_._v(" "),t("tr",[t("td",[_._v("Connection")]),_._v(" "),t("td",[_._v("该浏览器想要优先使用的连接类型")]),_._v(" "),t("td",[_._v("Connection: keep-alive")])]),_._v(" "),t("tr",[t("td",[_._v("Cache-Control")]),_._v(" "),t("td",[_._v("用来指定在这次的请求/响应链中的所有缓存机制都必须遵守的指令")]),_._v(" "),t("td",[_._v("Cache-Control: no-cache")])])])]),_._v(" "),t("p",[_._v("响应头字段")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("字段名")]),_._v(" "),t("th",[_._v("说明")]),_._v(" "),t("th",[_._v("示例")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("Date")]),_._v(" "),t("td",[_._v("发送消息的日期和时间")]),_._v(" "),t("td",[_._v("Date: Fri, 19 Feb 2021 12:37:46 GMT")])]),_._v(" "),t("tr",[t("td",[_._v("Last-Modified")]),_._v(" "),t("td",[_._v("所请求的对象的最后修改日期")]),_._v(" "),t("td",[_._v("Last-Modified: Tue, Fri, 19 Feb 2021 12:37:46 GMT")])]),_._v(" "),t("tr",[t("td",[_._v("Server")]),_._v(" "),t("td",[_._v("服务器的名字")]),_._v(" "),t("td",[_._v("Server: Apache/2.4.1 (Unix)")])]),_._v(" "),t("tr",[t("td",[_._v("Expires")]),_._v(" "),t("td",[_._v("指定一个时间，超过改时间认为此响应已经过期")]),_._v(" "),t("td",[_._v("Expires: Tue, Fri, 19 Feb 2021 12:37:46 GMT")])]),_._v(" "),t("tr",[t("td",[_._v("Content-Type")]),_._v(" "),t("td",[_._v("响应体的类型")]),_._v(" "),t("td",[_._v("Content-Type: text/html; charset=utf-8")])]),_._v(" "),t("tr",[t("td",[_._v("Content-Encoding")]),_._v(" "),t("td",[_._v("内容所使用的编码类型")]),_._v(" "),t("td",[_._v("Content-Encoding: gzip")])]),_._v(" "),t("tr",[t("td",[_._v("Content-Length")]),_._v(" "),t("td",[_._v("响应体的长度（字节为单位）")]),_._v(" "),t("td",[_._v("Content-Length: 348")])]),_._v(" "),t("tr",[t("td",[_._v("Content-Disposition")]),_._v(" "),t("td",[_._v("一个可以让客户端下载文件并建议文件名的头部")]),_._v(" "),t("td",[_._v('Content-Disposition: attachment; filename="fname.ext"')])]),_._v(" "),t("tr",[t("td",[_._v("Accept-Ranges")]),_._v(" "),t("td",[_._v("服务器支持哪些种类的部分内容范围")]),_._v(" "),t("td",[_._v("Accept-Ranges: bytes")])]),_._v(" "),t("tr",[t("td",[_._v("Content-Range")]),_._v(" "),t("td",[_._v("这条消息是属于完整消息的哪部分")]),_._v(" "),t("td",[_._v("Content-Range: bytes 21010-47021/47022")])]),_._v(" "),t("tr",[t("td",[_._v("Access-Control-Allow-Origin")]),_._v(" "),t("td",[_._v("指定哪些网站可参与到跨域资源共享文件过程中")]),_._v(" "),t("td",[_._v("Access-Control-Allow-Origin: *")])]),_._v(" "),t("tr",[t("td",[_._v("Location")]),_._v(" "),t("td",[_._v("用来进行重定向，或者在创建了某个新资源时使用")]),_._v(" "),t("td",[_._v("Location: http://www.baidu.com")])]),_._v(" "),t("tr",[t("td",[_._v("Set-Cookie")]),_._v(" "),t("td",[_._v("返回一个Cookie让客户端去保存")]),_._v(" "),t("td",[_._v("Set-Cookie: UserID=xxxxxxxxx")])]),_._v(" "),t("tr",[t("td",[_._v("Connection")]),_._v(" "),t("td",[_._v("针对该连接所预期的选项")]),_._v(" "),t("td",[_._v("Connection: close")])]),_._v(" "),t("tr",[t("td",[_._v("Cache-Control")]),_._v(" "),t("td",[_._v("向从服务器直到客户端在内的所有缓存机制告知，他们是否可以缓存这个对象。单位秒")]),_._v(" "),t("td",[_._v("Cache-Control: max-age=1000")])])])]),_._v(" "),t("p",[t("strong",[_._v("状态码")])]),_._v(" "),t("p",[_._v("分类")]),_._v(" "),t("ol",[t("li",[_._v("信息响应："),t("code",[_._v("100~199")])]),_._v(" "),t("li",[_._v("成功响应："),t("code",[_._v("200~299")])]),_._v(" "),t("li",[_._v("重定向："),t("code",[_._v("300~399")])]),_._v(" "),t("li",[_._v("客户端错误："),t("code",[_._v("400~499")])]),_._v(" "),t("li",[_._v("服务器错误："),t("code",[_._v("500~599")])])]),_._v(" "),t("p",[_._v("常见的状态码")]),_._v(" "),t("ul",[t("li",[_._v("100"),t("code",[_._v("continue")]),_._v("，请求的初始部分已经被服务器收到，并且没有被服务器拒绝。客户端应该继续发送剩余的请求，如果请求已经完成，就忽略这个响应。允许客户端发送带请求体的请求前，判断服务器是否愿意接受请求（服务器通过请求头判断）。在某些情况下，如果服务器在不看请求体就拒绝请求时，客户端就发送请求体是不恰当的或低效的")]),_._v(" "),t("li",[_._v("200"),t("code",[_._v("ok")]),_._v("，请求成功")]),_._v(" "),t("li",[_._v("302"),t("code",[_._v("found")]),_._v("，请求的资源被暂时的移动到了由"),t("code",[_._v("location")]),_._v("头部指定的"),t("code",[_._v("URL")]),_._v("上")]),_._v(" "),t("li",[_._v("304"),t("code",[_._v("not modified")]),_._v("，说明无需再次传输请求的内容，也就是说可以使用缓存的内容")]),_._v(" "),t("li",[_._v("400"),t("code",[_._v("bad request")]),_._v("，由于语法无效，服务器无法理解该请求")]),_._v(" "),t("li",[_._v("401"),t("code",[_._v("unauthorized")]),_._v("，由于缺乏目标资源要求的身份验证凭证")]),_._v(" "),t("li",[_._v("404"),t("code",[_._v("not found")]),_._v("，服务器端无法找到所请求的资源")]),_._v(" "),t("li",[_._v("405"),t("code",[_._v("method not allowed")]),_._v("，服务器禁止了使用当前"),t("code",[_._v("HTTP")]),_._v("方法的请求")]),_._v(" "),t("li",[_._v("406"),t("code",[_._v("not acceptable")]),_._v("，服务器端无法提供与"),t("code",[_._v("Accept-Charset")]),_._v("以及"),t("code",[_._v("Accept-Language")]),_._v("指定的值相匹配的响应")]),_._v(" "),t("li",[_._v("408"),t("code",[_._v("request timeout")]),_._v("，服务器想要将没有在使用的连接关闭，一些服务器会在空闲连接上发送此信息，即便是在客户端没有发送任何请求的情况下")]),_._v(" "),t("li",[_._v("500"),t("code",[_._v("internal server error")]),_._v("，所请求的服务器遇到意外的情况并阻止其执行请求")]),_._v(" "),t("li",[_._v("501"),t("code",[_._v("not implemented")]),_._v("，请求的方法不被服务器支持，因此无法被处理，服务器必须支持的方法只有"),t("code",[_._v("GET")]),_._v("和"),t("code",[_._v("HEAD")])]),_._v(" "),t("li",[_._v("502"),t("code",[_._v("bad gateway")]),_._v("，作为网关或代理角色的服务器，从上游服务器（如"),t("code",[_._v("tomcat")]),_._v("）中接受到的响应式无效的")]),_._v(" "),t("li",[_._v("503"),t("code",[_._v("service unavailable")]),_._v("，服务器尚处于可以接受请求的状态，可能是服务器停机维护或过载")])]),_._v(" "),t("p",[t("strong",[_._v("跨域")])]),_._v(" "),t("ul",[t("li",[t("p",[_._v("解决"),t("code",[_._v("AJAX")]),_._v("跨域请求的常用方法")]),_._v(" "),t("p",[t("code",[_._v("CORS(Cross-Origin Resource Sharing)")]),_._v("，跨域资源共享")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("CROS")]),_._v("的实现需要客户端和服务器同时支持")]),_._v(" "),t("p",[_._v("客户端：所有浏览器都支持")]),_._v(" "),t("p",[_._v("服务器：需要返回相应的响应头（比如"),t("code",[_._v("Access-Control-Allow-Origin")]),_._v("），告诉浏览器这是一个允许跨域访问的请求")])])]),_._v(" "),t("h4",{attrs:{id:"_4-5-5-https"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-5-https"}},[_._v("#")]),_._v(" 4.5.5 HTTPS")]),_._v(" "),t("p",[t("code",[_._v("HTTPS(HyperText Transfer Protocol Secure)")]),_._v("，超文本传输安全协议。也被称为"),t("code",[_._v("HTTP over TLS")]),_._v("、"),t("code",[_._v("HTTP over SSL")]),_._v("、"),t("code",[_._v("HTTP Secure")]),_._v("，"),t("code",[_._v("HTTPS")]),_._v("的默认端口号是"),t("code",[_._v("443")])]),_._v(" "),t("p",[t("code",[_._v("HTTPS")]),_._v("是在"),t("code",[_._v("HTTP")]),_._v("的基础上使用"),t("code",[_._v("SSL/TLS")]),_._v("来加密报文，对窃听和中间人攻击提供合理的防护。"),t("code",[_._v("SSL/TLS")]),_._v("也可以用在其他协议上，比如"),t("code",[_._v("FTP")]),_._v("--\x3e"),t("code",[_._v("FTPS")]),_._v("、"),t("code",[_._v("SMTP")]),_._v("--\x3e"),t("code",[_._v("SMTPS")])]),_._v(" "),t("p",[t("code",[_._v("TLS(Transport Layer Security)")]),_._v("：传输层安全协议前身是"),t("code",[_._v("SSL(Secure Sockets Layer)")]),_._v("安全套接层，"),t("code",[_._v("SSL/TLS")]),_._v("工作在应用层和传输层之间")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132437.png"}}),_._v(" "),t("p",[t("code",[_._v("HTTPS")]),_._v("的通讯过程")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132501.png"}}),_._v(" "),t("ol",[t("li",[t("code",[_._v("TCP")]),_._v("的3次握手")]),_._v(" "),t("li",[t("code",[_._v("TLS")]),_._v("的连接")]),_._v(" "),t("li",[t("code",[_._v("HTTP")]),_._v("请求和响应")])]),_._v(" "),t("p",[t("strong",[_._v("TLS连接的关键步骤")])]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132525.png"}}),_._v(" "),t("ol",[t("li",[t("p",[t("code",[_._v("Client Hello")])]),_._v(" "),t("p",[t("code",[_._v("TLS")]),_._v("的版本号，支持的加密组件"),t("code",[_._v("Clipher Suite")]),_._v("列表（加密组件是指所使用的加密算法及密钥长度等），一个随机数"),t("code",[_._v("Client Random")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132554.png",alt:"image-20210222100354425"}})])]),_._v(" "),t("li",[t("p",[t("code",[_._v("Server Hello")])]),_._v(" "),t("p",[t("code",[_._v("TLS")]),_._v("的版本号，选择的加密组件（是从接收到的客户端加密组件列表中挑选出来的），一个随机数")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132620.png",alt:"image-20210222100434999"}})])]),_._v(" "),t("li",[t("p",[t("code",[_._v("Certificate")])]),_._v(" "),t("p",[_._v("服务器的公钥证书（被CA签名过）")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132633.png",alt:"image-20210222100520486"}})])]),_._v(" "),t("li",[t("p",[t("code",[_._v("Server Key Exchange")])]),_._v(" "),t("p",[_._v("用以实现"),t("code",[_._v("ECDHE")]),_._v("算法的其中一个参数"),t("code",[_._v("Server Params")]),_._v("("),t("code",[_._v("ECDHE")]),_._v("是一种密钥交换算法，为了防止伪造，"),t("code",[_._v("Server Params")]),_._v("经过了服务器私钥签名）")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132643.png",alt:"image-20210222100836077"}})])]),_._v(" "),t("li",[t("p",[t("code",[_._v("Server Hello Done")])]),_._v(" "),t("p",[_._v("告知客户端，协商结束")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132651.png",alt:"image-20210222101103662"}})])]),_._v(" "),t("li",[t("p",[t("code",[_._v("Client Key Exchange")])]),_._v(" "),t("p",[_._v("发送用以实现"),t("code",[_._v("ECDHE")]),_._v("算法的另一个参数"),t("code",[_._v("Client Params")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132701.png",alt:"image-20210222101555895"}})]),_._v(" "),t("p",[_._v("目前，客户端和服务器都拥有了"),t("code",[_._v("ECDHE")]),_._v("算法需要的2个参数："),t("code",[_._v("Server Params")]),_._v("、"),t("code",[_._v("Client Params")]),_._v("。客户端、服务器都可以使用"),t("code",[_._v("ECDHE")]),_._v("算法根据"),t("code",[_._v("Server Params")]),_._v("、"),t("code",[_._v("Client Params")]),_._v("计算出一个新的随机字符串"),t("code",[_._v("Pre-master secret")]),_._v("。然后结合"),t("code",[_._v("Client Random")]),_._v("、"),t("code",[_._v("Server Random")]),_._v("、"),t("code",[_._v("Pre-master secret")]),_._v("生成一个主密钥，使用主密钥衍生出客户端发送的会话密钥、服务器发送的会话密钥等")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("Change Cipher Spec")])]),_._v(" "),t("p",[_._v("告知服务器，之后的通信采用计算出来的会话密钥进行加密")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132709.png",alt:"image-20210222102408322"}})])]),_._v(" "),t("li",[t("p",[t("code",[_._v("Finished")])]),_._v(" "),t("p",[_._v("包含连接至今全部报文的整体校验值（摘要），加密之后发送给服务器")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132720.png",alt:"image-20210222102551886"}})])]),_._v(" "),t("li",[t("ol",{attrs:{start:"10"}},[t("li",[_._v("服务器发送的"),t("code",[_._v("Change Cipher Spec")]),_._v("、"),t("code",[_._v("Finished")])])]),_._v(" "),t("p",[_._v("到此为止，客户端服务器都验证加密解密没有问题，握手正式结束，后面开始传输加密的"),t("code",[_._v("HTTP")]),_._v("请求和响应")]),_._v(" "),t("p",[t("img",{attrs:{src:"%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE.assets/image-20210222102408322.png",alt:"image-20210222102408322"}})]),_._v(" "),t("p",[t("img",{attrs:{src:"%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE.assets/image-20210222102551886.png",alt:"image-20210222102551886"}})])])]),_._v(" "),t("h4",{attrs:{id:"_4-5-6-spdy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-6-spdy"}},[_._v("#")]),_._v(" 4.5.6 SPDY")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132731.png"}}),_._v(" "),t("p",[t("code",[_._v("SPDY(speedy)")]),_._v("，是基于"),t("code",[_._v("TCP")]),_._v("的应用层协议，它强制要求使用"),t("code",[_._v("SSL/TLS")]),_._v("。"),t("code",[_._v("SPDY")]),_._v("并不用于取代"),t("code",[_._v("HTTP")]),_._v("，它只是修改了"),t("code",[_._v("HTTP")]),_._v("请求于响应的传输方式。只需要增加一个"),t("code",[_._v("SPDY")]),_._v("层，现有的所有服务端应用均不用做任何修改。")]),_._v(" "),t("p",[t("code",[_._v("SPDY")]),_._v("是"),t("code",[_._v("HTTP/2")]),_._v("的前身")]),_._v(" "),t("h4",{attrs:{id:"_4-5-7-http-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-7-http-2"}},[_._v("#")]),_._v(" 4.5.7 HTTP/2")]),_._v(" "),t("p",[t("code",[_._v("HTTP/2")]),_._v("在底层传输做了很多的改进和优化，但在语意上完全与"),t("code",[_._v("HTTP/1.1")]),_._v("兼容（比如请求头、响应码等没有改变）")]),_._v(" "),t("p",[t("strong",[_._v("HTTP/2的特性")])]),_._v(" "),t("ol",[t("li",[t("p",[_._v("二进制格式")]),_._v(" "),t("p",[_._v("采用二进制格式传输数据，而非"),t("code",[_._v("HTTP/1.1")]),_._v("的文本格式")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132759.png"}}),_._v(" "),t("p",[_._v("数据流：已建立的连接内的双向字节流，可以承载一条或多条消息。所有的通信都在一个"),t("code",[_._v("TCP")]),_._v("连接上完成，此连接可以承载任意数量的双向数据流")]),_._v(" "),t("p",[_._v("消息：与逻辑"),t("code",[_._v("HTTP")]),_._v("请求或响应消息对应，由一系列帧组成")]),_._v(" "),t("p",[_._v("帧："),t("code",[_._v("HTTP/2")]),_._v("通信的最小单位，每个帧都包含帧头（会标识出当前帧所属的数据流），来自不同数据流的帧可以交错发送，然后再根据每个帧头的数据标识符重新组装")])]),_._v(" "),t("li",[t("p",[_._v("多路复用"),t("code",[_._v("Multiplexing")])]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132829.png",alt:"image-20210222120606370"}}),_._v(" "),t("p",[_._v("客户端和服务器可以将"),t("code",[_._v("HTTP")]),_._v("消息分解为互不以来的帧，然后交错发送，最后再在另一端把他们重新组装起来")]),_._v(" "),t("p",[_._v("并行交错地发送多个请求，请求之间互不影响")]),_._v(" "),t("p",[_._v("并行交错地发送多个响应，响应之间互不影响")]),_._v(" "),t("p",[_._v("使用一个连接并行发送多个请求和响应")])]),_._v(" "),t("li",[t("p",[_._v("优先级")]),_._v(" "),t("p",[t("code",[_._v("HTTP/2")]),_._v("标准允许每个数据流都有一个关联的权重和依赖关系，可以向每个数据流分配一个1至256之间的整数，每个数据流与其他数据流之间可以存在显示依赖关系")]),_._v(" "),t("p",[_._v('客户端可以构建和传递"优先级树"，表明它倾向于如何接受响应')]),_._v(" "),t("p",[_._v("服务器可以使用此信息通过控制CPU、内存和其他资源的分配设定数据流处理的优先级，在资源数据可用之后，确保将高优先级响应以最优的方式传输至客户端")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132852.png",alt:"image-20210222123410978"}}),_._v(" "),t("ul",[t("li",[t("p",[_._v("应尽可能先给父数据流分配资源")])]),_._v(" "),t("li",[t("p",[_._v("同级数据流（共享相同父项）应按其权重比例分配资源")])])])]),_._v(" "),t("li",[t("p",[_._v("头部压缩")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132908.png",alt:"image-20210222123945994"}}),_._v(" "),t("p",[t("code",[_._v("HTTP/2")]),_._v("使用"),t("code",[_._v("HPACK")]),_._v("压缩请求头和响应头，可以极大减少头部开销，进而提高性能")])]),_._v(" "),t("li",[t("p",[_._v("服务器推送")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132923.png",alt:"image-20210222124915234"}}),_._v(" "),t("p",[_._v("服务器可以对一个客户端请求发送多个响应，除了最初的响应外，服务器还可以向客户端推送额外资源，而无需客户端额外明确地请求")])])]),_._v(" "),t("p",[t("strong",[_._v("HTTP/2的问题")])]),_._v(" "),t("ol",[t("li",[t("p",[_._v("队头阻塞")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132938.png",alt:"image-20210222125422820"}}),_._v(" "),t("p",[_._v("假设在传输过程中，红色的数据包丢失，剩下的数据不能够传输到应用层，而是等待红色的数据包重传")])]),_._v(" "),t("li",[t("p",[_._v("握手延迟")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403132955.png",alt:"image-20210222125759032"}})])]),_._v(" "),t("h4",{attrs:{id:"_4-5-8-http-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-8-http-3"}},[_._v("#")]),_._v(" 4.5.8 HTTP/3")]),_._v(" "),t("p",[t("code",[_._v("Google")]),_._v("开发的基于"),t("code",[_._v("UDP")]),_._v("协议的"),t("code",[_._v("QUIC")]),_._v("协议，后改名"),t("code",[_._v("HTTP/3")])]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133015.png",alt:"image-20210222130037226"}}),_._v(" "),t("p",[_._v("数据的可靠传输由"),t("code",[_._v("QUIC")]),_._v("协议来保证")]),_._v(" "),t("p",[t("strong",[_._v("HTTP/3的特性——连接迁移")])]),_._v(" "),t("p",[t("code",[_._v("TCP")]),_._v("基于4要素（源IP、源端口、目标IP、目标端口），切换网络时至少有一个要素发生变化，导致连接发生变化。当连接发生变化时，就会连接失败重新建立连接")]),_._v(" "),t("p",[t("code",[_._v("QUIC")]),_._v("的连接不受4要素的影响，当4要素发生变化时，原连接依然维持。"),t("code",[_._v("QUIC")]),_._v("连接不以4要素作为标识，而是使用一组"),t("code",[_._v("Connection ID(连接ID)")]),_._v("来标识一个连接，即使"),t("code",[_._v("IP")]),_._v("或者端口发生变化，只要"),t("code",[_._v("Connection ID")]),_._v("没有变化，那么连接依然可以维持")]),_._v(" "),t("p",[t("strong",[_._v("HTTP/3的问题——操作系统内核、CPU负载")])]),_._v(" "),t("p",[_._v("与传统的"),t("code",[_._v("TLS")]),_._v("的"),t("code",[_._v("HTTP/2")]),_._v("相比，大规模部署的"),t("code",[_._v("QUIC")]),_._v("需要近2倍的"),t("code",[_._v("CPU")]),_._v("使用量，原因是因为"),t("code",[_._v("Linux")]),_._v("内核的"),t("code",[_._v("UDP")]),_._v("部分没有像"),t("code",[_._v("TCP")]),_._v("那样的优化，因为传统上没有使用"),t("code",[_._v("UDP")]),_._v("进行如此高速的信息传输，并且"),t("code",[_._v("TCP")]),_._v("和"),t("code",[_._v("TLS")]),_._v("有硬件加速。")]),_._v(" "),t("h2",{attrs:{id:"_5-网络基础知识"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-网络基础知识"}},[_._v("#")]),_._v(" 5. 网络基础知识")]),_._v(" "),t("h3",{attrs:{id:"_5-1-代理服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-代理服务器"}},[_._v("#")]),_._v(" 5.1 代理服务器")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133035.png"}}),_._v(" "),t("p",[_._v("代理服务器"),t("code",[_._v("Proxy Server")]),_._v("特点：本身不生产内容，处于中间位置转发上下游的请求和响应")]),_._v(" "),t("h4",{attrs:{id:"_5-1-1-正向代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-1-正向代理"}},[_._v("#")]),_._v(" 5.1.1 正向代理")]),_._v(" "),t("p",[t("strong",[_._v("正向代理")]),_._v("：代理的对象是客户端")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133047.png"}}),_._v(" "),t("p",[t("strong",[_._v("作用")])]),_._v(" "),t("ol",[t("li",[t("p",[_._v("隐藏客户端身份")])]),_._v(" "),t("li",[t("p",[_._v("绕过防火墙（突破访问限制）")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133116.png",alt:"image-20210221112437199"}})]),_._v(" "),t("li",[t("p",[t("code",[_._v("Internet")]),_._v("访问控制")])]),_._v(" "),t("li",[t("p",[_._v("数据过滤")])])]),_._v(" "),t("p",[_._v("某些抓包工具（比如"),t("code",[_._v("Fiddler")]),_._v("、"),t("code",[_._v("Charles")]),_._v("）正是运用了代理服务器的原理。注意："),t("code",[_._v("Wireshark")]),_._v("的原理是通过底层驱动，拦截网卡上流过的数据")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133143.png"}}),_._v(" "),t("h4",{attrs:{id:"_5-1-2-反向代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-2-反向代理"}},[_._v("#")]),_._v(" 5.1.2 反向代理")]),_._v(" "),t("p",[_._v("反向代理：代理的对象是服务器")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133058.png"}}),_._v(" "),t("p",[t("strong",[_._v("作用")])]),_._v(" "),t("ol",[t("li",[t("p",[_._v("隐藏服务器身份")])]),_._v(" "),t("li",[t("p",[_._v("安全防护")])]),_._v(" "),t("li",[t("p",[_._v("负载均衡")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133128.png",alt:"image-20210221113908920"}})])]),_._v(" "),t("h4",{attrs:{id:"_5-1-3-相关头部字段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-3-相关头部字段"}},[_._v("#")]),_._v(" 5.1.3 相关头部字段")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133200.png",alt:"image-20210221115323441"}})]),_._v(" "),t("ul",[t("li",[t("code",[_._v("Via")]),_._v("：追加经过的每一台代理服务器的主机名（或域名）")]),_._v(" "),t("li",[t("code",[_._v("X-Forwarded-For")]),_._v("：追加请求方的"),t("code",[_._v("IP")]),_._v("地址")]),_._v(" "),t("li",[t("code",[_._v("X-Real-IP")]),_._v("：客户端的真实"),t("code",[_._v("IP")]),_._v("地址")])]),_._v(" "),t("p",[_._v("第一次请求")]),_._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Via")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" proxy1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("X-Forwarded-For")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" 14.14.14.14\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("X-Real-IP")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" 14.14.14.14\n")])])]),t("p",[_._v("第二次请求")]),_._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Via")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" proxy1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v(" proxy2\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("X-Forwarded-For")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" 14.14.14.14"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v(" 220.11.11.11\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("X-Real-IP")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" 14.14.14.14\n")])])]),t("p",[_._v("第三次请求")]),_._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Via")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" proxy2\n")])])]),t("p",[_._v("第四次请求")]),_._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[_._v("Via")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(":")]),_._v(" proxy2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v(",")]),_._v(" proxy1\n")])])]),t("h3",{attrs:{id:"_5-2-cdn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-cdn"}},[_._v("#")]),_._v(" 5.2 CDN")]),_._v(" "),t("p",[t("code",[_._v("CDN(Content Delivery Network或Content Distribution Network)")]),_._v("，内容分发网络。利用最靠近每位用户的服务器，更快更可靠地将音乐、图片、视频等资源文件（一般是静态资源）传递给用户")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133223.png",alt:"image-20210221122145172"}})]),_._v(" "),t("p",[t("code",[_._v("CDN")]),_._v("运营商在全国、乃至全球的各个大枢纽城市都建立了机房，部署了大量拥有提高存储带宽的节点，构建了一个跨运营商、跨地域的专用网络。内容所有者（服务的拥有者）向"),t("code",[_._v("CDN")]),_._v("运营商支付费用，"),t("code",[_._v("CDN")]),_._v("将其内容交付给最终用户")]),_._v(" "),t("p",[_._v("请求拥有"),t("code",[_._v("CDN")]),_._v("的服务器的流程")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133231.png"}}),_._v(" "),t("h3",{attrs:{id:"_5-3-webservice"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-webservice"}},[_._v("#")]),_._v(" 5.3 WebService")]),_._v(" "),t("p",[t("code",[_._v("WebService")]),_._v("，"),t("code",[_._v("Web")]),_._v("服务，是一种跨编程语言和跨操作系统平台的远程调用技术标准")]),_._v(" "),t("p",[_._v("使用场景：天气预报，手机归属地查询、航班信息查询、物流信息查询等，比如天气预报，是气象局把自己的服务以"),t("code",[_._v("WebService")]),_._v("形式暴露出来，让第三方程序可以调用这些服务功能。")]),_._v(" "),t("p",[_._v("事实上，"),t("code",[_._v("WebService")]),_._v("完全可以用普通的"),t("code",[_._v("Web API")]),_._v("取代（比如"),t("code",[_._v("HTTP")]),_._v("+"),t("code",[_._v("JSON")]),_._v("）")]),_._v(" "),t("p",[t("code",[_._v("SOAP(Simple Object Access Protocol)")]),_._v("，简单对象访问协议，很多时候"),t("code",[_._v("SOAP")]),_._v("="),t("code",[_._v("HTTP")]),_._v("+"),t("code",[_._v("XML")]),_._v("，"),t("code",[_._v("WebService")]),_._v("使用"),t("code",[_._v("SOAP")]),_._v("协议来封装传输数据")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133535.png"}}),_._v(" "),t("p",[t("code",[_._v("WSDL(Web Service Description Language)")]),_._v("，"),t("code",[_._v("Web")]),_._v("服务描述语言，一个"),t("code",[_._v("XML")]),_._v("文档，用以描述"),t("code",[_._v("WebService")]),_._v("接口的细节（比如参数，返回值等），一般在"),t("code",[_._v("WebService")]),_._v("的"),t("code",[_._v("URL")]),_._v("后面跟上"),t("code",[_._v("?wsdl")]),_._v("获取"),t("code",[_._v("WSDL")]),_._v("信息")]),_._v(" "),t("h3",{attrs:{id:"_5-4-httpdns"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-httpdns"}},[_._v("#")]),_._v(" 5.4 HTTPDNS")]),_._v(" "),t("p",[t("code",[_._v("HTTPDNS")]),_._v("是基于"),t("code",[_._v("HTTP")]),_._v("协议向"),t("code",[_._v("DNS")]),_._v("服务器发送域名解析请求")]),_._v(" "),t("p",[_._v("替代了基于"),t("code",[_._v("DNS")]),_._v("协议向运营商"),t("code",[_._v("Local DNS")]),_._v("发起解析请求的传统方式，可以避免"),t("code",[_._v("Local DNS")]),_._v("造成的域名劫持和跨网访问问题，常用在移动互联网中（比如在"),t("code",[_._v("Android")]),_._v("、"),t("code",[_._v("IOS")]),_._v("开发中）")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("优势点")]),_._v(" "),t("th",[_._v("xx云HTTPDNS")]),_._v(" "),t("th",[_._v("运营商Local DNS")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("高速")]),_._v(" "),t("td",[_._v("高速访问")]),_._v(" "),t("td",[_._v("访问缓慢")])]),_._v(" "),t("tr",[t("td",[_._v("安全")]),_._v(" "),t("td",[_._v("防劫持")]),_._v(" "),t("td",[_._v("广告劫持")])]),_._v(" "),t("tr",[t("td",[_._v("智能")]),_._v(" "),t("td",[_._v("精准调度")]),_._v(" "),t("td",[_._v("解析转发")])]),_._v(" "),t("tr",[t("td",[_._v("可靠")]),_._v(" "),t("td",[_._v("负载均衡")]),_._v(" "),t("td",[_._v("异常故障")])])])]),_._v(" "),t("h3",{attrs:{id:"_5-5-vpn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-vpn"}},[_._v("#")]),_._v(" 5.5 VPN")]),_._v(" "),t("p",[t("code",[_._v("VPN(Virtual Private Network)")]),_._v("，虚拟私人网络。它可以在公共网络上建立专用网络，进行加密通讯")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133601.png"}}),_._v(" "),t("p",[t("strong",[_._v("VPN的作用")])]),_._v(" "),t("ul",[t("li",[t("p",[_._v("提高上网的安全性")])]),_._v(" "),t("li",[t("p",[_._v("保护公司内部资料")])]),_._v(" "),t("li",[t("p",[_._v("隐藏上网者的身份")])]),_._v(" "),t("li",[t("p",[_._v("突破网站的地域限制")]),_._v(" "),t("p",[_._v("有些网站针对不同地区的用户展示不同的内容")])]),_._v(" "),t("li",[t("p",[_._v("突破网络封锁")]),_._v(" "),t("p",[_._v("因为有"),t("code",[_._v("GFW(Great Firewall of China)")]),_._v("的限制，有些网站在国内访问不了")])])]),_._v(" "),t("p",[t("strong",[_._v("VPN与代理的区别")])]),_._v(" "),t("ul",[t("li",[t("p",[_._v("软件")]),_._v(" "),t("p",[t("code",[_._v("VPN")]),_._v("一般需要安装"),t("code",[_._v("VPN")]),_._v("客户端软件")]),_._v(" "),t("p",[_._v("代理不需要安装额外的软件")])]),_._v(" "),t("li",[t("p",[_._v("安全性")]),_._v(" "),t("p",[t("code",[_._v("VPN")]),_._v("默认会对数据进行加密")]),_._v(" "),t("p",[_._v("代理默认不会对数据进行加密（数据最终是否加密取决于使用的协议本身）")])]),_._v(" "),t("li",[t("p",[_._v("费用")]),_._v(" "),t("p",[_._v("一般情况下，"),t("code",[_._v("VPN")]),_._v("比代理贵")])])]),_._v(" "),t("p",[t("strong",[_._v("实现原理")])]),_._v(" "),t("p",[_._v("隧道协议"),t("code",[_._v("Tunneling Protocol")])]),_._v(" "),t("p",[_._v("常见的隧道协议")]),_._v(" "),t("ul",[t("li",[t("code",[_._v("PPTP(Point to Point Tunneling Protocol)")]),_._v("：点对点隧道协议")]),_._v(" "),t("li",[t("code",[_._v("L2TP(Layer Two Tunneling Protocol)")]),_._v("：第二层隧道协议")]),_._v(" "),t("li",[t("code",[_._v("IPsec(Internet Protocol Security)")]),_._v("：互联网安全协议")]),_._v(" "),t("li",[t("code",[_._v("SSL VPN")]),_._v("如"),t("code",[_._v("OpenVPN")])])]),_._v(" "),t("h3",{attrs:{id:"_5-6-网络爬虫"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-网络爬虫"}},[_._v("#")]),_._v(" 5.6 网络爬虫")]),_._v(" "),t("p",[_._v("网络爬虫"),t("code",[_._v("Web Crawler")]),_._v("，也叫网络蜘蛛"),t("code",[_._v("Web Spider")]),_._v("。模拟人类使用浏览器操作页面的行为")]),_._v(" "),t("p",[t("code",[_._v("robots.txt")]),_._v("是存放于网站根目录下的文本文件，比如"),t("code",[_._v("https://www.bilibili.com/robots.txt")]),_._v("。")]),_._v(" "),t("ul",[t("li",[_._v("用来告诉爬虫：哪些内容是不应被爬取的，哪些是可以被爬取的")]),_._v(" "),t("li",[_._v("因为一些系统中的"),t("code",[_._v("URL")]),_._v("是大小写敏感的，所以"),t("code",[_._v("robots.txt")]),_._v("的文件名应统一为小写")]),_._v(" "),t("li",[_._v("它不是一个规范，而只是约定俗成的，所以并不能保证网站的隐私")])]),_._v(" "),t("h3",{attrs:{id:"_5-7-http缓存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-7-http缓存"}},[_._v("#")]),_._v(" 5.7 HTTP缓存")]),_._v(" "),t("p",[_._v("通常会缓存的情况是："),t("code",[_._v("GET")]),_._v("请求+静态资源（比如"),t("code",[_._v("HTML")]),_._v("、"),t("code",[_._v("CSS")]),_._v("、"),t("code",[_._v("JS")]),_._v("、图片等）")]),_._v(" "),t("h4",{attrs:{id:"_5-7-1-响应头"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-7-1-响应头"}},[_._v("#")]),_._v(" 5.7.1 响应头")]),_._v(" "),t("p",[t("code",[_._v("Pragma")]),_._v("：作用类似于"),t("code",[_._v("Cache-Control")]),_._v("，"),t("code",[_._v("HTTP/1.0")]),_._v("的产物")]),_._v(" "),t("p",[t("code",[_._v("Expires")]),_._v("：缓存的过期时间（"),t("code",[_._v("GMT")]),_._v("格式时间），"),t("code",[_._v("HTTP/1.0")]),_._v("的产物")]),_._v(" "),t("p",[t("code",[_._v("Cache-Control")]),_._v("：设置缓存策略")]),_._v(" "),t("p",[t("strong",[_._v("响应头")])]),_._v(" "),t("ul",[t("li",[t("code",[_._v("no-storage")]),_._v("：不缓存数据到本地")]),_._v(" "),t("li",[t("code",[_._v("public")]),_._v("：允许用户、代理服务器缓存数据到本地")]),_._v(" "),t("li",[t("code",[_._v("private")]),_._v("：只允许用户缓存数据到本地")]),_._v(" "),t("li",[t("code",[_._v("max-age")]),_._v("：缓存的有效时间，单位秒")]),_._v(" "),t("li",[t("code",[_._v("Last-Modified")]),_._v("：资源的最后一次修改时间")]),_._v(" "),t("li",[t("code",[_._v("ETag")]),_._v("：资源的唯一标识（根据文件内容计算出来的摘要值）")])]),_._v(" "),t("p",[_._v("优先级："),t("code",[_._v("pragma")]),_._v(" > "),t("code",[_._v("Cache-Control")]),_._v(" > "),t("code",[_._v("Expires")])]),_._v(" "),t("p",[t("strong",[_._v("请求头")])]),_._v(" "),t("ul",[t("li",[t("p",[t("code",[_._v("If-None-Match")])]),_._v(" "),t("p",[_._v("如果上一次的响应头中有"),t("code",[_._v("ETag")]),_._v("，就会将"),t("code",[_._v("ETag")]),_._v("的值作为请求头的值")]),_._v(" "),t("p",[_._v("如果服务器发现资源的最新摘要值跟"),t("code",[_._v("If-None-Match")]),_._v("不匹配，就会返回新的资源"),t("code",[_._v("200 OK")])]),_._v(" "),t("p",[_._v("否则，就不会返回资源的具体数据"),t("code",[_._v("304 Not Modified")])])]),_._v(" "),t("li",[t("p",[t("code",[_._v("If-Modified-Since")])]),_._v(" "),t("p",[_._v("如果上一次的响应头中没有"),t("code",[_._v("ETag")]),_._v("，有"),t("code",[_._v("Last-Modified")]),_._v("，就会将"),t("code",[_._v("Last-Modified")]),_._v("的值作为请求头的值")]),_._v(" "),t("p",[_._v("如果服务器发现资源的最后一次修改时间晚于"),t("code",[_._v("If-Modified-Since")]),_._v("，就会返回新的资源"),t("code",[_._v("200 OK")])]),_._v(" "),t("p",[_._v("否则，就不会返回资源的具体数据"),t("code",[_._v("304 Not Modified")])])])]),_._v(" "),t("p",[t("code",[_._v("Last-Modified")]),_._v("的缺陷")]),_._v(" "),t("ul",[t("li",[_._v("只能精确到秒级别，如果资源在1秒内被修改了，客户端将无法获取最新的资源数据")]),_._v(" "),t("li",[_._v("如果某些资源被修改了（最后一次修改时间发生了变化），但是内容并没有任何变化，相同数据重复传输")])]),_._v(" "),t("p",[t("code",[_._v("ETag")])]),_._v(" "),t("ul",[t("li",[_._v("只要资源的内容没变化，就不会重复传输资源数据‘")]),_._v(" "),t("li",[_._v("紫瑶资源的内容发生了变化，就会返回最新的资源给客户端")])]),_._v(" "),t("h4",{attrs:{id:"_5-7-2-缓存使用流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-7-2-缓存使用流程"}},[_._v("#")]),_._v(" 5.7.2 缓存使用流程")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133618.png"}}),_._v(" "),t("h2",{attrs:{id:"_6-网络安全"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-网络安全"}},[_._v("#")]),_._v(" 6. 网络安全")]),_._v(" "),t("p",[_._v("网络通信中面临的4中安全威胁")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133628.png"}}),_._v(" "),t("ul",[t("li",[_._v("截获：窃听通信内容")]),_._v(" "),t("li",[_._v("中断：中断网络通信")]),_._v(" "),t("li",[_._v("篡改：篡改通信内容")]),_._v(" "),t("li",[_._v("伪造：伪造通信内容")])]),_._v(" "),t("h3",{attrs:{id:"_6-1-arp欺骗"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-arp欺骗"}},[_._v("#")]),_._v(" 6.1 ARP欺骗")]),_._v(" "),t("p",[t("code",[_._v("ARP")]),_._v("欺骗"),t("code",[_._v("ARP spoofing")]),_._v("，又称"),t("code",[_._v("ARP")]),_._v("毒化"),t("code",[_._v("ARP poisoning")]),_._v("、"),t("code",[_._v("ARP")]),_._v("病毒、"),t("code",[_._v("ARP")]),_._v("攻击。")]),_._v(" "),t("p",[t("strong",[_._v("ARP欺骗的效果")])]),_._v(" "),t("ol",[t("li",[_._v("可以让攻击者获取局域网上的数据包甚至可以篡改数据包")]),_._v(" "),t("li",[_._v("可以让网络上特定的主机之间无法正常通信")]),_._v(" "),t("li",[_._v("让送至特定"),t("code",[_._v("IP")]),_._v("地址的流量被错误送到攻击者所取代的地方")])]),_._v(" "),t("p",[t("strong",[_._v("攻击的核心步骤")])]),_._v(" "),t("p",[_._v("假设主机"),t("code",[_._v("C")]),_._v("是攻击者，主机"),t("code",[_._v("A")]),_._v("、"),t("code",[_._v("B")]),_._v("是被攻击者。"),t("code",[_._v("C")]),_._v("只要收到过"),t("code",[_._v("A")]),_._v("、"),t("code",[_._v("B")]),_._v("发送的"),t("code",[_._v("ARP")]),_._v("请求，就会拥有"),t("code",[_._v("A")]),_._v("、"),t("code",[_._v("B")]),_._v("的"),t("code",[_._v("IP")]),_._v("、"),t("code",[_._v("MAC")]),_._v("地址，就可以进行欺骗活动")]),_._v(" "),t("ol",[t("li",[t("code",[_._v("C")]),_._v("发送一个"),t("code",[_._v("ARP")]),_._v("响应给"),t("code",[_._v("B")]),_._v("，把响应包里的源"),t("code",[_._v("IP")]),_._v("设为"),t("code",[_._v("A")]),_._v("的"),t("code",[_._v("IP")]),_._v("地址，源"),t("code",[_._v("MAC")]),_._v("设为"),t("code",[_._v("C")]),_._v("的"),t("code",[_._v("MAC")]),_._v("地址")]),_._v(" "),t("li",[t("code",[_._v("B")]),_._v("收到"),t("code",[_._v("ARP")]),_._v("响应后，更新它的"),t("code",[_._v("ARP")]),_._v("表，把"),t("code",[_._v("A")]),_._v("的"),t("code",[_._v("MAC")]),_._v("地址"),t("code",[_._v("IP_A, MAC_A")]),_._v("改为"),t("code",[_._v("IP_A, MAC_C")])]),_._v(" "),t("li",[_._v("当"),t("code",[_._v("B")]),_._v("要发送数据包给"),t("code",[_._v("A")]),_._v("时，它根据"),t("code",[_._v("ARP")]),_._v("表来封装数据包的头部，把目标"),t("code",[_._v("MAC")]),_._v("地址改为"),t("code",[_._v("MAC_C")]),_._v("，而非"),t("code",[_._v("MAC_A")])]),_._v(" "),t("li",[_._v("当交换机收到"),t("code",[_._v("B")]),_._v("发送给"),t("code",[_._v("A")]),_._v("的数据包时，根据此包的目标"),t("code",[_._v("MAC")]),_._v("地址"),t("code",[_._v("MAC_C")]),_._v("而把数据包转发给"),t("code",[_._v("C")])]),_._v(" "),t("li",[t("code",[_._v("C")]),_._v("收到数据包后，可以把它存起来以后再发送给"),t("code",[_._v("A")]),_._v("，达到窃听效果。"),t("code",[_._v("C")]),_._v("也可以篡改数据后才发送数据包给"),t("code",[_._v("A")])])]),_._v(" "),t("p",[t("strong",[_._v("防护")])]),_._v(" "),t("ol",[t("li",[t("p",[_._v("静态"),t("code",[_._v("ARP")])])]),_._v(" "),t("li",[t("p",[t("code",[_._v("DHCP Snooping")]),_._v("，网络设备可借由"),t("code",[_._v("DHCP")]),_._v("保留网络上各电脑的"),t("code",[_._v("MAC")]),_._v("地址，在伪造的"),t("code",[_._v("ARP")]),_._v("数据包发出时即可侦测到")])]),_._v(" "),t("li",[t("p",[_._v("利用一些软件监听"),t("code",[_._v("ARP")]),_._v("的不正常变动")]),_._v(" "),t("p",[_._v("...")])])]),_._v(" "),t("h3",{attrs:{id:"_6-2-dos、ddos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-dos、ddos"}},[_._v("#")]),_._v(" 6.2 DoS、DDoS")]),_._v(" "),t("p",[t("code",[_._v("DoS")]),_._v("攻击（拒绝服务攻击，"),t("code",[_._v("Denial-of-Service attack")]),_._v("），使目标电脑的网络或系统资源耗尽，使服务暂时中断或停止，导致其正常用户无法访问")]),_._v(" "),t("p",[t("code",[_._v("DDoS")]),_._v("攻击（分布式拒绝服务攻击，"),t("code",[_._v("Distributed Denial-of-Service attack")]),_._v('），黑客使用网络上两个或以上被攻陷的电脑作为"僵尸"向特定的目标发动'),t("code",[_._v("DoS")]),_._v("攻击")]),_._v(" "),t("p",[t("code",[_._v("DoS")]),_._v("攻击可以分为两大类")]),_._v(" "),t("ol",[t("li",[_._v("带宽消耗型："),t("code",[_._v("UDP")]),_._v("洪水攻击、"),t("code",[_._v("ICMP")]),_._v("洪水攻击")]),_._v(" "),t("li",[_._v("资源消耗型："),t("code",[_._v("SYN")]),_._v("洪水攻击、"),t("code",[_._v("LAND")]),_._v("攻击")])]),_._v(" "),t("p",[t("strong",[_._v("SYN洪水攻击")])]),_._v(" "),t("p",[_._v("攻击者发送一系列的"),t("code",[_._v("SYN")]),_._v("请求到目标，然后让目标因收不到"),t("code",[_._v("ACK")]),_._v("（第三次握手）而进行等待、消耗资源")]),_._v(" "),t("p",[_._v("攻击方法：跳过发送最后的"),t("code",[_._v("ACK")]),_._v("信息，修改源"),t("code",[_._v("IP")]),_._v("地址，让目标送"),t("code",[_._v("SYN-ACK")]),_._v("到伪造的"),t("code",[_._v("IP")]),_._v("地址，因此目标永不可能收到"),t("code",[_._v("ACK")])]),_._v(" "),t("p",[t("strong",[_._v("LAND攻击")])]),_._v(" "),t("p",[t("code",[_._v("LAND")]),_._v("攻击（局域网拒绝服务攻击，"),t("code",[_._v("Local Area Network Denial attack")]),_._v("），通过持续发送相同相同源地址和目标地址的欺骗数据包，使目标试图与自己建立连接，消耗系统资源直至崩溃")]),_._v(" "),t("p",[t("strong",[_._v("防御")])]),_._v(" "),t("p",[_._v("防御方式通常为：入侵检测、流量过滤和多重验证，堵塞网络带宽的流量将被过滤，而正常的流量可正常通过")]),_._v(" "),t("p",[_._v("防火墙")]),_._v(" "),t("ul",[t("li",[_._v("防火墙可以设置规则，例如允许或拒绝特定通讯协议，端口或"),t("code",[_._v("IP")]),_._v("地址")]),_._v(" "),t("li",[_._v("当工具从少数不正常的"),t("code",[_._v("IP")]),_._v("地址发出时，可以简单的使用拒绝规则阻止一切从攻击源"),t("code",[_._v("IP")]),_._v("发出的通讯")]),_._v(" "),t("li",[_._v("复杂攻击难以用简单规则来组织，例如80端口遭受攻击时不可能拒绝端口所有通信，因为同时会组织合法流量")]),_._v(" "),t("li",[_._v("防火墙可能处于网络架构中过后的位置，路由器可能在恶意流量达到防火墙前即被攻击影响")])]),_._v(" "),t("p",[_._v("交换机：大多数交换机有一定的速度限制和访问控制能力")]),_._v(" "),t("p",[_._v("路由器：和交换机类似，路由器也有一定的速度限制和访问控制能力")]),_._v(" "),t("p",[_._v('黑洞引导：将所有受攻击计算机的通信全部发送至一个"黑洞"(空接口或不存在的计算机地址)或者有足够能力处理洪流的网络设备商，以免网络受到较大影响')]),_._v(" "),t("p",[_._v("流量清洗：当流量被送到"),t("code",[_._v("DDoS")]),_._v("防护清洗中心时，通过采用抗"),t("code",[_._v("DDoS")]),_._v("软件处理，将正常流量和恶意流量区分开来")]),_._v(" "),t("h3",{attrs:{id:"_6-3-dns劫持"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-dns劫持"}},[_._v("#")]),_._v(" 6.3 DNS劫持")]),_._v(" "),t("p",[t("code",[_._v("DNS")]),_._v("劫持，又称为域名劫持。攻击者篡改了某个域名的解析结果，使得指向该域名的"),t("code",[_._v("IP")]),_._v("变成了另一个"),t("code",[_._v("IP")]),_._v("，导致对相应网址的访问被劫持到里一个不可到达的或者假冒的网址，从而实现非法窃取用户信息或者破坏正常网络服务的目的")]),_._v(" "),t("p",[_._v("为了防止出现"),t("code",[_._v("DNS")]),_._v("劫持的现象，可以考虑使用更靠谱的"),t("code",[_._v("DNS")]),_._v("服务器，比如："),t("code",[_._v("114.114.114.114")])]),_._v(" "),t("ul",[t("li",[_._v("谷歌："),t("code",[_._v("8.8.8.8")]),_._v("、"),t("code",[_._v("8.8.4.4")])]),_._v(" "),t("li",[_._v("微软："),t("code",[_._v("4.2.2.1")]),_._v("、"),t("code",[_._v("4.2.2.2")])]),_._v(" "),t("li",[_._v("百度："),t("code",[_._v("180.76.76.76")])]),_._v(" "),t("li",[_._v("阿里："),t("code",[_._v("223.5.5.5")]),_._v("、"),t("code",[_._v("223.6.6.6")])])]),_._v(" "),t("p",[t("code",[_._v("HTTP")]),_._v("劫持：对"),t("code",[_._v("HTTP")]),_._v("数据包进行拦截处理，比如插入"),t("code",[_._v("JS")]),_._v("代码")]),_._v(" "),t("h3",{attrs:{id:"_6-4-加密和解密"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-加密和解密"}},[_._v("#")]),_._v(" 6.4 加密和解密")]),_._v(" "),t("p",[t("code",[_._v("HTTP")]),_._v("协议默认是采用明文传输的，因此会有很大的安全隐患，常见的提高安全性的方法是：对通信内容进行加密后，再进行传输")]),_._v(" "),t("p",[_._v("常见的加密方式：")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("不可逆：单向散列函数："),t("code",[_._v("MD5")]),_._v("、"),t("code",[_._v("SHA")]),_._v("等")])]),_._v(" "),t("li",[t("p",[_._v("可逆")]),_._v(" "),t("p",[_._v("对称加密："),t("code",[_._v("DES")]),_._v("、"),t("code",[_._v("3DES")]),_._v("、"),t("code",[_._v("AES")]),_._v("等")]),_._v(" "),t("p",[_._v("非对称加密："),t("code",[_._v("RSA")]),_._v("等")])]),_._v(" "),t("li",[t("p",[_._v("其它")]),_._v(" "),t("p",[_._v("混合密码系统")]),_._v(" "),t("p",[_._v("数据签名")]),_._v(" "),t("p",[_._v("证书")])])]),_._v(" "),t("h4",{attrs:{id:"_6-4-1-单向散列函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-1-单向散列函数"}},[_._v("#")]),_._v(" 6.4.1 单向散列函数")]),_._v(" "),t("p",[_._v("单向散列函数，可以根据消息内容计算出散列值。散列值的长度和消息的长度无关，无论消息是"),t("code",[_._v("1bit")]),_._v("、"),t("code",[_._v("10M")]),_._v("、"),t("code",[_._v("100G")]),_._v("，单向散列函数都会计算出固定长度的散列值。根据散列值无法推算出原数据。")]),_._v(" "),t("p",[_._v("单向散列函数，也称为消息摘要函数"),t("code",[_._v("message digest function")]),_._v("、哈希函数"),t("code",[_._v("hash function")]),_._v("。输出的散列值，也称为消息摘要"),t("code",[_._v("message digest")]),_._v("、指纹"),t("code",[_._v("fingerprint")])]),_._v(" "),t("p",[t("strong",[_._v("常见的散列函数")])]),_._v(" "),t("p",[t("code",[_._v("MD4")]),_._v("、"),t("code",[_._v("MD5")]),_._v("：产生128bit的散列值，"),t("code",[_._v("MD")]),_._v("就是"),t("code",[_._v("message Digest")]),_._v("的缩写，目前已不安全（被枚举破解）")]),_._v(" "),t("p",[t("code",[_._v("SHA-1")]),_._v("：产生160bit的散列值，目前已经不安全")]),_._v(" "),t("p",[t("code",[_._v("SHA-2")]),_._v("："),t("code",[_._v("SHA-256")]),_._v("、"),t("code",[_._v("SHA-384")]),_._v("、"),t("code",[_._v("SHA-512")]),_._v("，散列值的长度分别是256bit、384bit、512bit")]),_._v(" "),t("p",[t("code",[_._v("SHA-3")]),_._v("：全新的标准")]),_._v(" "),t("h4",{attrs:{id:"_6-4-2-对称加密"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-2-对称加密"}},[_._v("#")]),_._v(" 6.4.2 对称加密")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133646.png",alt:"image-20210221165558662"}})]),_._v(" "),t("p",[_._v("对称加密"),t("code",[_._v("Symmetric Cryptography")]),_._v("，加密用的密钥和解密用的密钥是相同的")]),_._v(" "),t("p",[t("strong",[_._v("常见的对称加密的算法")])]),_._v(" "),t("ol",[t("li",[t("p",[t("code",[_._v("DES(Data Encryption Standard)")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133810.png",alt:"image-20210221170053778"}})]),_._v(" "),t("p",[t("code",[_._v("DES")]),_._v("是一种将"),t("code",[_._v("64bit")]),_._v("明文加密成"),t("code",[_._v("64bit")]),_._v("密文的对称加密算法，密钥长度"),t("code",[_._v("56bit")])]),_._v(" "),t("p",[_._v("规格上来说，密钥长度是"),t("code",[_._v("64bit")]),_._v("，但每隔"),t("code",[_._v("7bit")]),_._v("会设置一个用错误检查的"),t("code",[_._v("bit")]),_._v("，因此密钥长度实质上是"),t("code",[_._v("56bit")])]),_._v(" "),t("p",[_._v("由于"),t("code",[_._v("DES")]),_._v("每次只能加密"),t("code",[_._v("64bit")]),_._v("的数据，遇到比较大的数据，需要对"),t("code",[_._v("DES")]),_._v("加密进行迭代")]),_._v(" "),t("p",[_._v("目前已经可以在短时间内被破解，不建议使用")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("3DES(Triple Data Encryption Algorithm)")])]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133823.png",alt:"image-20210221171054789"}})]),_._v(" "),t("p",[t("code",[_._v("3DES")]),_._v("，将"),t("code",[_._v("DES")]),_._v("重复3次所得到的一种密码算法，也叫做3重"),t("code",[_._v("DES")]),_._v("。"),t("code",[_._v("3DES")]),_._v("并不是进行三次"),t("code",[_._v("DES")]),_._v("加密，而是加密"),t("code",[_._v("Encryption")]),_._v("->解密"),t("code",[_._v("Decryption")]),_._v("->加密"),t("code",[_._v("Encryption")]),_._v("的过程")]),_._v(" "),t("p",[_._v("目前还被一些银行等机构使用，但处理速度不高，安全性逐渐暴露出问题")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("AES(Advanced Encryption Standard)")])]),_._v(" "),t("p",[_._v("取代"),t("code",[_._v("DES")]),_._v("成为新标准的一种对称加密算法，又称"),t("code",[_._v("Rijndael")]),_._v("加密算法")]),_._v(" "),t("p",[t("code",[_._v("AES")]),_._v("的密钥长度有128、192、256bit三种")]),_._v(" "),t("p",[_._v("目前"),t("code",[_._v("AES")]),_._v("，已经逐步取代"),t("code",[_._v("DES")]),_._v("、"),t("code",[_._v("3DES")]),_._v("，成为首选的对称加密算法")])])]),_._v(" "),t("p",[t("strong",[_._v("密钥配送")])]),_._v(" "),t("p",[_._v("在使用对称加密时，首先要进行双方的密钥交换")]),_._v(" "),t("p",[_._v("密钥配送方法")]),_._v(" "),t("ul",[t("li",[_._v("事先共享密钥")]),_._v(" "),t("li",[_._v("密钥分配中心"),t("code",[_._v("Key Distribution Center")]),_._v("，简称"),t("code",[_._v("KDC")])]),_._v(" "),t("li",[t("code",[_._v("Diffie-Hellman")]),_._v("密钥交换")]),_._v(" "),t("li",[_._v("非对称加密")])]),_._v(" "),t("h4",{attrs:{id:"_6-4-3-非对称加密"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-3-非对称加密"}},[_._v("#")]),_._v(" 6.4.3 非对称加密")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403134134.png",alt:"image-20210221165719710"}})]),_._v(" "),t("p",[_._v("非对称加密"),t("code",[_._v("Asymmetric Cryptography")]),_._v("，加密用的密钥和解密用的密钥是不同的，分为加密密钥和解密密钥2种")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133854.png"}}),_._v(" "),t("ul",[t("li",[_._v("加密密钥：一般是公开的，因此该密钥称为公钥"),t("code",[_._v("public key")]),_._v("。非对称加密也被称为公钥密码"),t("code",[_._v("Public-key Cryptography")])]),_._v(" "),t("li",[_._v("解密密钥：由消息接受者自己保管，不能公开，因此也称为私钥"),t("code",[_._v("private key")])]),_._v(" "),t("li",[_._v("公钥和私钥是一一对应的")]),_._v(" "),t("li",[_._v("由公钥加密的密文，必须使用该公钥对应的私钥才能解密")]),_._v(" "),t("li",[_._v("由私钥加密的密文，必须使用该私钥对应的公钥才能解密")])]),_._v(" "),t("h4",{attrs:{id:"_6-4-4-混合密码系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-4-混合密码系统"}},[_._v("#")]),_._v(" 6.4.4 混合密码系统")]),_._v(" "),t("p",[_._v("对称加密的缺点：不能很好的解决密钥配送的问题")]),_._v(" "),t("p",[_._v("非对称加密的缺点：加密解密速度比较慢")]),_._v(" "),t("p",[_._v("混合密码系统：可以解决上述问题")]),_._v(" "),t("p",[_._v("网络上的密码通信所用的"),t("code",[_._v("SSL/TLS")]),_._v("都运用了混合密码系统")]),_._v(" "),t("p",[t("strong",[_._v("加密")])]),_._v(" "),t("p",[_._v("回话密钥"),t("code",[_._v("session key")])]),_._v(" "),t("ul",[t("li",[_._v("为本次通信随机生成的临时密钥")]),_._v(" "),t("li",[_._v("作为对称加密的密钥，用于加密消息，提高速度")])]),_._v(" "),t("p",[t("strong",[_._v("加密步骤")])]),_._v(" "),t("ol",[t("li",[_._v("首先，消息发送者要拥有消息接受者的公钥")]),_._v(" "),t("li",[_._v("生成回话密钥，作为对称加密的密钥，加密消息")]),_._v(" "),t("li",[_._v("用消息接受者的公钥，加密回话密钥")]),_._v(" "),t("li",[_._v("将前两步生成的加密结果，一并发给消息接受者")])]),_._v(" "),t("p",[t("strong",[_._v("解密过程")])]),_._v(" "),t("ol",[t("li",[_._v("消息接受者用自己的私钥解密出会话密钥")]),_._v(" "),t("li",[_._v("再用第一步解密出来的会话密钥，解密消息")])]),_._v(" "),t("h4",{attrs:{id:"_6-4-5-数字签名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-5-数字签名"}},[_._v("#")]),_._v(" 6.4.5 数字签名")]),_._v(" "),t("Mermaid",{attrs:{id:"mermaid_3005d938",graph:_.$dataBlock.mermaid_3005d938}}),t("p",[t("code",[_._v("A")]),_._v("发送的内容可能是被篡改的，或者有人伪装成"),t("code",[_._v("A")]),_._v("发消息，或者就是"),t("code",[_._v("A")]),_._v("发的，但它可以否认。"),t("code",[_._v("B")]),_._v("如何确定这段消息的真实性？")]),_._v(" "),t("p",[_._v("数字签名")]),_._v(" "),t("ul",[t("li",[_._v("生成签名，由消息的发送者完成，通过“签名密钥”生成。一般是通过消息发送者的私钥进行签名")]),_._v(" "),t("li",[_._v("验证签名，由消息的接受者完成，通过“验证密钥”验证")])]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403134211.png"}}),_._v(" "),t("h4",{attrs:{id:"_6-4-6-证书"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-6-证书"}},[_._v("#")]),_._v(" 6.4.6 证书")]),_._v(" "),t("p",[_._v("密码学中的证书，全称叫公钥证书"),t("code",[_._v("Public-key Certificate, PKC")]),_._v("，并由认证机构"),t("code",[_._v("Certificate Authority, CA")]),_._v("施加数字签名")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403134223.png"}}),_._v(" "),t("p",[_._v("各大"),t("code",[_._v("CA")]),_._v("的公钥，默认已经内置在浏览器和操作系统中")]),_._v(" "),t("p",[_._v("证书的注册和下载")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403134236.png"}}),_._v(" "),t("h2",{attrs:{id:"_7-其他协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-其他协议"}},[_._v("#")]),_._v(" 7. 其他协议")]),_._v(" "),t("h3",{attrs:{id:"_7-1-ftp、websocket"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-ftp、websocket"}},[_._v("#")]),_._v(" 7.1 FTP、WebSocket")]),_._v(" "),t("h4",{attrs:{id:"_7-1-1-websocket"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-1-websocket"}},[_._v("#")]),_._v(" 7.1.1 WebSocket")]),_._v(" "),t("p",[_._v("HTTP请求的特点，通信只能由客户端发起。所以，早期很多网站为了实现推送技术，所用的技术都是轮询。即浏览器每隔一段时间去请求服务器，为了能更好的节省服务器资源和带宽，并且能够实时地进行通讯，"),t("code",[_._v("HTML5")]),_._v("规范中出现了"),t("code",[_._v("WebSocket")]),_._v("协议")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403134249.png"}}),_._v(" "),t("p",[t("code",[_._v("WebSocket")]),_._v("是基于"),t("code",[_._v("TCP")]),_._v("的支持全双工通信的应用层协议，客户端，服务器都可以主动发消息给对方")]),_._v(" "),t("p",[t("code",[_._v("WebSocket")]),_._v("使用"),t("code",[_._v("80(ws://)")]),_._v("、"),t("code",[_._v("443(wss://)")]),_._v("端口，可以饶过大多数防火墙的限制")]),_._v(" "),t("p",[_._v("通信之前，"),t("code",[_._v("WebSocket")]),_._v("需要先建立连接")]),_._v(" "),t("p",[t("code",[_._v("WebSocket")]),_._v("需要借助"),t("code",[_._v("HTTP")]),_._v("协议来建立连接（也叫做握手，"),t("code",[_._v("Handshake")]),_._v("），需要由客户端主动发出握手请求")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403134303.png"}}),_._v(" "),t("ul",[t("li",[t("p",[t("code",[_._v("Connection")]),_._v("必须设置"),t("code",[_._v("Upgrade")]),_._v("，表示客户端希望连接升级")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("Upgrade")]),_._v("必须设置"),t("code",[_._v("websocket")]),_._v("，表示希望升级到"),t("code",[_._v("WebSocket")]),_._v("协议")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("Sec-WebSocket-Version")]),_._v("表示支持的表示支持的"),t("code",[_._v("WebSocket")]),_._v("的版本")])]),_._v(" "),t("li",[t("p",[t("code",[_._v("Sec-WebSocket-key")]),_._v("是客户端生成的随机字符串，服务器收到后会进行如下操作")]),_._v(" "),t("p",[_._v("在"),t("code",[_._v("Sec-WebSocket-key")]),_._v("的后面加上一个固定的"),t("code",[_._v("GUID")]),_._v("值"),t("code",[_._v("258EAFA5-E914-47DA-95CA-C5AB0DC85B11")])]),_._v(" "),t("p",[_._v("将上述结果进行"),t("code",[_._v("SHA-1")]),_._v("摘要计算，得到的结果进行"),t("code",[_._v("HexBase64")]),_._v("编码，这次的结果作为"),t("code",[_._v("Sec-WebSocket-Accept")]),_._v("响应头的值，返回给客户端")])])]),_._v(" "),t("h4",{attrs:{id:"_7-1-2-ftp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-2-ftp"}},[_._v("#")]),_._v(" 7.1.2 FTP")]),_._v(" "),t("p",[t("code",[_._v("FTP(File Transport Protocol)")]),_._v("，文件传输协议，是基于"),t("code",[_._v("TCP")]),_._v("的应用层协议")]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133453.png"}}),_._v(" "),t("p",[t("code",[_._v("FTP")]),_._v("的"),t("code",[_._v("URL")]),_._v("格式")]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[_._v("ftp://[user[:password]]@host[:port]/url-path\n")])])]),t("p",[t("code",[_._v("FTP")]),_._v("有2种连接模式：主动"),t("code",[_._v("Active")]),_._v("和被动"),t("code",[_._v("Passive")]),_._v("，不管是哪种模式，都需要客户端和服务器建立2个连接")]),_._v(" "),t("p",[_._v("不管是哪种模式，都需要客户端和服务器建立2个连接")]),_._v(" "),t("ul",[t("li",[_._v("控制连接：用于传输状态信息（命令，"),t("code",[_._v("cmd")]),_._v("）")]),_._v(" "),t("li",[_._v("数据连接：用于传输文件和目录信息（"),t("code",[_._v("data")]),_._v("）")])]),_._v(" "),t("p",[t("strong",[_._v("主动连接")])]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133504.png"}}),_._v(" "),t("ol",[t("li",[t("p",[_._v("客户端打开一个随机的命令端口，端口号大于"),t("code",[_._v("1024")]),_._v("假设为"),t("code",[_._v("N")]),_._v("，同时连接到服务器的命令端口21")])]),_._v(" "),t("li",[t("p",[_._v("客户端开始监听"),t("code",[_._v("N+1")]),_._v("数据端口，同时向服务器发送一个"),t("code",[_._v("Port")]),_._v("命令给服务器的命令端口21")]),_._v(" "),t("p",[_._v("此命令告诉服务器，客户端正在监听的数据端口是"),t("code",[_._v("N+1")]),_._v("，并且已准备好从端口接收数据")])]),_._v(" "),t("li",[t("p",[_._v("服务器打开20号数据端口，并且创建和客户端数据端口"),t("code",[_._v("N+1")]),_._v("的连接")])])]),_._v(" "),t("p",[t("strong",[_._v("被动模式")])]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133517.png"}}),_._v(" "),t("ol",[t("li",[t("p",[_._v("客户端通过两个随机端口与服务器建立连接")]),_._v(" "),t("p",[_._v("命令端口"),t("code",[_._v("N")]),_._v("、数据端口"),t("code",[_._v("N+1")])])]),_._v(" "),t("li",[t("p",[_._v("客户端的命令端口"),t("code",[_._v("N")]),_._v("用于连接服务器的命令端口21")])]),_._v(" "),t("li",[t("p",[_._v("客户端通过命令端口"),t("code",[_._v("N")]),_._v("发送"),t("code",[_._v("PASV")]),_._v("命令给服务器的命令端口21")])]),_._v(" "),t("li",[t("p",[_._v("服务器打开一个随机的数据端口"),t("code",[_._v("P")]),_._v("，并告知客户端该端口号P")])]),_._v(" "),t("li",[t("p",[_._v("客户端数据端口"),t("code",[_._v("N+1")]),_._v("发起与服务器数据端口"),t("code",[_._v("P")]),_._v("的连接")])])]),_._v(" "),t("h3",{attrs:{id:"_7-2-邮件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-邮件"}},[_._v("#")]),_._v(" 7.2 邮件")]),_._v(" "),t("p",[t("strong",[_._v("发邮件使用的协议")])]),_._v(" "),t("p",[t("code",[_._v("SMTP(Simple Mail Transfer Protocol)")]),_._v("，简单邮件传输协议，基于"),t("code",[_._v("TCP")]),_._v("，服务器默认使用25端口，"),t("code",[_._v("SSL/TLS")]),_._v("使用465端口")]),_._v(" "),t("p",[t("strong",[_._v("收邮件的协议")])]),_._v(" "),t("p",[t("code",[_._v("POP(Post Office Protocol)")]),_._v("，邮局协议，基于"),t("code",[_._v("TCP")]),_._v("，服务器默认使用110端口，"),t("code",[_._v("SSL/TLS")]),_._v("使用995端口")]),_._v(" "),t("p",[t("code",[_._v("IMAP(Internet Message Access Protocol)")]),_._v("，因特网信息访问协议，基于"),t("code",[_._v("TCP")]),_._v("，服务器默认使用143端口，"),t("code",[_._v("SSL/TLS")]),_._v("使用993端口")]),_._v(" "),t("p",[t("strong",[_._v("收发邮件的过程")])]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403133426.png"}}),_._v(" "),t("p",[t("strong",[_._v("POP和IMAP")])]),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403134326.png"}}),_._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://gitee.com/dingwanli/picture/raw/master/20210403134428.png"}}),_._v(" "),t("p",[t("code",[_._v("POP")]),_._v("的特点")]),_._v(" "),t("ul",[t("li",[_._v("客户端连接服务器时，将会从服务器下载所有邮件，可以设置下载完成之后，立即或一段时间后删除服务器邮件")]),_._v(" "),t("li",[_._v("客户端的操作（比如删除邮件，移动到文件夹）不会跟服务器同步")]),_._v(" "),t("li",[_._v("每个客户端都是独立的，都可以获得其自己的邮件副本")])]),_._v(" "),t("p",[t("code",[_._v("IMAP")]),_._v("的特点")]),_._v(" "),t("ul",[t("li",[_._v("客户端连接服务器时，获取的是服务器上邮件的基本信息，并不会下载邮件，等打开邮件时，才会下载邮件")]),_._v(" "),t("li",[_._v("客户端的操作（比如删除邮件、移动到文件夹）会跟服务器同步")]),_._v(" "),t("li",[_._v("所有客户端始终会看到相同的文件夹")])]),_._v(" "),t("h3",{attrs:{id:"_7-3-即时通信"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-即时通信"}},[_._v("#")]),_._v(" 7.3 即时通信")]),_._v(" "),t("p",[_._v("即时通信"),t("code",[_._v("Instant Messaging")]),_._v("，简称"),t("code",[_._v("IM")]),_._v("，平时使用的"),t("code",[_._v("QQ")]),_._v("、微信，都属于典型的"),t("code",[_._v("IM")]),_._v("应用")]),_._v(" "),t("p",[_._v("常用的协议")]),_._v(" "),t("p",[t("strong",[_._v("XMPP")])]),_._v(" "),t("p",[t("code",[_._v("XMPP(Extensible Messaging and Presence Protocol)")]),_._v("，可扩展消息与存在协议，前身是"),t("code",[_._v("Jabber")]),_._v("，基于"),t("code",[_._v("TCP")]),_._v("，默认端口是"),t("code",[_._v("5222")]),_._v("、"),t("code",[_._v("5269")])]),_._v(" "),t("p",[_._v("使用"),t("code",[_._v("XML")]),_._v("格式进行传输，体积较大")]),_._v(" "),t("p",[t("strong",[_._v("MQTT")])]),_._v(" "),t("p",[t("code",[_._v("MQTT(Message Queuing Telemetry Transport)")]),_._v("，消息队列遥测传输，基于"),t("code",[_._v("TCP")]),_._v("，默认端口"),t("code",[_._v("1883")]),_._v("、"),t("code",[_._v("8883")]),_._v("(带SSL/TLS)")]),_._v(" "),t("p",[_._v("开销很小，以降低网络流量，信息冗余远小于"),t("code",[_._v("XMPP")]),_._v("，不是专门为"),t("code",[_._v("IM")]),_._v("设计的协议，很多功能需要自己实现")]),_._v(" "),t("h3",{attrs:{id:"_7-4-流媒体"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-流媒体"}},[_._v("#")]),_._v(" 7.4 流媒体")]),_._v(" "),t("p",[_._v("流媒体"),t("code",[_._v("Streaming Media")]),_._v("，又叫流式媒体。是指将一连串的多媒体数据压缩后，经过互联网分段发送数据，在互联网上即时传输影音以供观赏的一种技术。此技术使得数据包得以像流水一样发送，不使用此技术，就必须使用提前现在整个媒体文件")]),_._v(" "),t("p",[t("strong",[_._v("常见协议")])]),_._v(" "),t("p",[t("code",[_._v("RTP(Real-Time Transport Protocol)")]),_._v("，实时传输协议，基于"),t("code",[_._v("UDP")])]),_._v(" "),t("p",[t("code",[_._v("RTCP(Real-Time Transport Control Protocol)")]),_._v("，实时传输控制协议，基于"),t("code",[_._v("UDP")]),_._v("，使用"),t("code",[_._v("RTP")]),_._v("的下一个端口")]),_._v(" "),t("p",[t("code",[_._v("RTSP(Real-Time Streaming Protocol)")]),_._v("，实时流协议，基于"),t("code",[_._v("TCP")]),_._v("、"),t("code",[_._v("UDP")]),_._v("的554端口")]),_._v(" "),t("p",[t("code",[_._v("RTMP(Real-Time Messaging Protocol)")]),_._v("，实时消息传输协议，基于"),t("code",[_._v("TCP")]),_._v("，默认端口"),t("code",[_._v("1935")])]),_._v(" "),t("p",[t("code",[_._v("HLS(HTTP Live Streaming)")]),_._v("，基于"),t("code",[_._v("HTTP")]),_._v("的流媒体网络传输协议")])],1)}),[],!1,null,null,null);"function"==typeof a&&a(c);v.default=c.exports}}]);